var AF=Object.create;var Vc=Object.defineProperty;var kF=Object.getOwnPropertyDescriptor;var qF=Object.getOwnPropertyNames;var jF=Object.getPrototypeOf,DF=Object.prototype.hasOwnProperty;var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),LF=(t,e)=>{for(var r in e)Vc(t,r,{get:e[r],enumerable:!0})},J$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of qF(e))!DF.call(t,s)&&s!==r&&Vc(t,s,{get:()=>e[s],enumerable:!(n=kF(e,s))||n.enumerable});return t};var xF=(t,e,r)=>(r=t!=null?AF(jF(t)):{},J$(e||!t||!t.__esModule?Vc(r,"default",{value:t,enumerable:!0}):r,t)),MF=t=>J$(Vc({},"__esModule",{value:!0}),t);var Y$=_((Ihe,W$)=>{"use strict";function FF(t){var e=new t,r=e;function n(){var i=e;return i.next?e=i.next:(e=new t,r=e),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}W$.exports=FF});var Q$=_((Che,kp)=>{"use strict";var VF=Y$();function X$(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=VF(zF),s=null,i=null,o=0,a=null,u={push:m,drain:Br,saturated:Br,pause:l,paused:!1,get concurrency(){return r},set concurrency(S){if(!(S>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=S,!u.paused)for(;s&&o<r;)o++,E()},running:c,resume:d,idle:p,length:f,getQueue:h,unshift:g,empty:Br,kill:$,killAndDrain:v,error:y};return u;function c(){return o}function l(){u.paused=!0}function f(){for(var S=s,N=0;S;)S=S.next,N++;return N}function h(){for(var S=s,N=[];S;)N.push(S.value),S=S.next;return N}function d(){if(u.paused){if(u.paused=!1,s===null){o++,E();return}for(;s&&o<r;)o++,E()}}function p(){return o===0&&u.length()===0}function m(S,N){var w=n.get();w.context=t,w.release=E,w.value=S,w.callback=N||Br,w.errorHandler=a,o>=r||u.paused?i?(i.next=w,i=w):(s=w,i=w,u.saturated()):(o++,e.call(t,w.value,w.worked))}function g(S,N){var w=n.get();w.context=t,w.release=E,w.value=S,w.callback=N||Br,w.errorHandler=a,o>=r||u.paused?s?(w.next=s,s=w):(s=w,i=w,u.saturated()):(o++,e.call(t,w.value,w.worked))}function E(S){S&&n.release(S);var N=s;N&&o<=r?u.paused?o--:(i===s&&(i=null),s=N.next,N.next=null,e.call(t,N.value,N.worked),i===null&&u.empty()):--o===0&&u.drain()}function $(){s=null,i=null,u.drain=Br}function v(){s=null,i=null,u.drain(),u.drain=Br}function y(S){a=S}}function Br(){}function zF(){this.value=null,this.callback=Br,this.next=null,this.release=Br,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,n){var s=t.callback,i=t.errorHandler,o=t.value;t.value=null,t.callback=Br,t.errorHandler&&i(r,o),s.call(t.context,r,n),t.release(t)}}function HF(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function n(l,f){e.call(this,l).then(function(h){f(null,h)},f)}var s=X$(t,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=u,s.drained=c,s;function a(l){var f=new Promise(function(h,d){i(l,function(p,m){if(p){d(p);return}h(m)})});return f.catch(Br),f}function u(l){var f=new Promise(function(h,d){o(l,function(p,m){if(p){d(p);return}h(m)})});return f.catch(Br),f}function c(){if(s.idle())return new Promise(function(h){h()});var l=s.drain,f=new Promise(function(h){s.drain=function(){l(),h()}});return f}}kp.exports=X$;kp.exports.promise=HF});var jp=_((Ahe,zc)=>{"use strict";var{format:UF}=require("node:util");function KF(){return`${this.name} [${this.code}]: ${this.message}`}function qp(t,e,r=500,n=Error){if(!t)throw new Error("Fastify error code must not be empty");if(!e)throw new Error("Fastify error message must not be empty");t=t.toUpperCase(),!r&&(r=void 0);function s(...i){if(!new.target)return new s(...i);this.code=t,this.name="FastifyError",this.statusCode=r;let o=i.length-1;o!==-1&&i[o]&&typeof i[o]=="object"&&"cause"in i[o]&&(this.cause=i.pop().cause),this.message=UF(e,...i),Error.stackTraceLimit!==0&&Error.captureStackTrace(this,s)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),s.prototype[Symbol.toStringTag]="Error",s.prototype.toString=KF,s}zc.exports=qp;zc.exports.default=qp;zc.exports.createError=qp});var Hc=_((khe,Z$)=>{"use strict";var{createError:Ls}=jp();Z$.exports={AVV_ERR_EXPOSE_ALREADY_DEFINED:Ls("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:Ls("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:Ls("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Ls("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Ls("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Ls("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Ls("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:Ls("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var Io=_((qhe,eb)=>{"use strict";var BF=Symbol("avvio.Boot"),GF=Symbol("isOnCloseHandler"),JF=Symbol("avvio.ThenifyDoNotWrap"),WF=Symbol("avvio.TimeTree.untrackNode"),YF=Symbol("avvio.TimeTree.trackNode"),XF=Symbol("avvio.TimeTree.getParent"),QF=Symbol("avvio.TimeTree.getNode"),ZF=Symbol("avvio.TimeTree.addNode"),eV=Symbol.for("plugin-meta");eb.exports={kAvvio:BF,kIsOnCloseHandler:GF,kThenifyDoNotWrap:JF,kUntrackNode:WF,kTrackNode:YF,kGetParent:XF,kGetNode:QF,kAddNode:ZF,kPluginMeta:eV}});var ab=_((jhe,ob)=>{"use strict";var{kUntrackNode:tb,kTrackNode:Dp,kGetParent:rb,kGetNode:nb,kAddNode:sb}=Io(),Lp=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[Dp](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[tb](e){this.tableId.delete(e.id);let r=this.tableLabel.get(e.label);r.pop(),r.length===0&&this.tableLabel.delete(e.label)}[rb](e){if(e===null)return null;if(this.tableLabel.has(e)){let r=this.tableLabel.get(e);return r[r.length-1]}else return null}[nb](e){return this.tableId.get(e)}[sb](e,r,n){let s=this[rb](e);if(s===null)return this.root={parent:null,id:"root",label:r,nodes:[],start:n,stop:null,diff:-1},this[Dp](this.root),this.root.id;let o=`${r}-${Math.random()}`,a={parent:e,id:o,label:r,nodes:[],start:n,stop:null,diff:-1};return s.nodes.push(a),this[Dp](a),o}start(e,r,n=Date.now()){return this[sb](e,r,n)}stop(e,r=Date.now()){let n=this[nb](e);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[tb](n))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return ib(this.toJSON())}};function ib(t,e=""){let r=e,n=t.nodes.length,s=n-1;r+=`${t.label} ${t.diff} ms
`;for(let i=0;i<n;++i){let o=t.nodes[i],a=e+(i===s?"  ":"\u2502 ");r+=e,r+=i===s?"\u2514\u2500":"\u251C\u2500",r+=o.nodes.length===0?"\u2500 ":"\u252C ",r+=ib(o,a).slice(e.length+2)}return r}ob.exports={TimeTree:Lp}});var Uc=_((Dhe,ub)=>{"use strict";var{debuglog:tV}=require("node:util"),rV=tV("avvio");ub.exports={debug:rV}});var cb=_((Lhe,lb)=>{"use strict";function nV(){let t={resolve:null,reject:null,promise:null};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}lb.exports={createPromise:nV}});var db=_((xhe,fb)=>{"use strict";var{kPluginMeta:xp}=Io();function sV(t,e){return t[xp]&&t[xp].name?t[xp].name:e&&e.name?e.name:t.name?t.name:t.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}fb.exports={getPluginName:sV}});var Kc=_((Mhe,hb)=>{"use strict";function iV(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}hb.exports={isPromiseLike:iV}});var mb=_((Fhe,pb)=>{"use strict";var{EventEmitter:oV}=require("node:events"),{inherits:aV}=require("node:util"),{debug:zt}=Uc(),{createPromise:uV}=cb(),{AVV_ERR_PLUGIN_EXEC_TIMEOUT:lV}=Hc(),{getPluginName:cV}=db(),{isPromiseLike:fV}=Kc();function Co(t,e,r,n,s){this.queue=t,this.func=e,this.options=r,this.isAfter=n,this.timeout=s,this.started=!1,this.name=cV(e,r),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null}aV(Co,oV);Co.prototype.exec=function(t,e){zt("exec",this.name),this.server=t;let r=this.func,n=this.name,s=!1;this.options=typeof this.options=="function"?this.options(this.server):this.options;let i=null,o=u=>{if(s){zt("loading complete",n);return}this._error=u,zt(u?"exec errored":"exec completed",n),s=!0,i&&clearTimeout(i),e(u)};this.timeout>0&&(zt("setting up timeout",n,this.timeout),i=setTimeout(function(){zt("timed out",n),i=null;let u=new lV(n);u.fn=r,o(u)},this.timeout)),this.started=!0,this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.options,o);fV(a)&&(zt("exec: resolving promise",n),a.then(()=>process.nextTick(o),u=>process.nextTick(o,u)))};Co.prototype.loadedSoFar=function(){if(zt("loadedSoFar",this.name),this.loaded)return Promise.resolve();let t=()=>{this.server.after((r,n)=>{this._error=r,this.queue.pause(),r?(zt("rejecting promise",this.name,r),this._promise.reject(r)):(zt("resolving promise",this.name),this._promise.resolve()),this._promise=null,process.nextTick(n,r)}),this.queue.resume()},e;return this._promise?e=Promise.resolve():(this._promise=uV(),e=this._promise.promise,this.server?t():this.on("start",t)),e};Co.prototype.enqueue=function(t,e){zt("enqueue",this.name,t.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(t,e)};Co.prototype.finish=function(t,e){zt("finish",this.name,t);let r=()=>{this.loaded||(zt("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,e(t))};if(t){this._promise&&(this._promise.reject(t),this._promise=null),r();return}let n=()=>{if(zt("check",this.name,this.queue.length(),this.queue.running(),this._promise),this.queue.length()===0&&this.queue.running()===0)if(this._promise){let s=()=>{zt("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else zt("delayed",this.name),this.queue.drain=()=>{zt("drain",this.name),this.queue.drain=dV,queueMicrotask(n)}};queueMicrotask(n),this.queue.resume()};function dV(){}pb.exports={Plugin:Co}});var gb=_((Vhe,yb)=>{"use strict";var{AVV_ERR_PLUGIN_NOT_VALID:Mp}=Hc();function hV(t){if(!(t&&(typeof t=="function"||typeof t.then=="function")))throw Array.isArray(t)?new Mp("array"):t===null?new Mp("null"):new Mp(typeof t)}yb.exports={validatePlugin:hV}});var vb=_((zhe,_b)=>{"use strict";function pV(t){return t!==null&&typeof t=="object"&&typeof t.default=="function"}_b.exports={isBundledOrTypescriptPlugin:pV}});var $b=_((Hhe,Sb)=>{"use strict";var{debug:Eb}=Uc(),{kThenifyDoNotWrap:Fp}=Io();function mV(){if(this.booted){Eb("thenify returning undefined because we are already booted");return}if(this[Fp]){this[Fp]=!1;return}return Eb("thenify"),(t,e)=>this._loadRegistered().then(()=>(this[Fp]=!0,t(this._server)),e)}Sb.exports={thenify:mV}});var wb=_((Uhe,bb)=>{"use strict";var{isPromiseLike:yV}=Kc(),{kAvvio:gV}=Io();function _V(t,e,r){let n=t.apply(t,e);yV(n)&&!n[gV]?n.then(()=>process.nextTick(r),s=>process.nextTick(r,s)):r&&process.nextTick(r)}bb.exports={executeWithThenable:_V}});var Ab=_((Khe,zp)=>{"use strict";var Bc=Q$(),vV=require("node:events").EventEmitter,EV=require("node:util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:ru,AVV_ERR_CALLBACK_NOT_FN:Ao,AVV_ERR_ROOT_PLG_BOOTED:SV,AVV_ERR_READY_TIMEOUT:$V,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:bV}=Hc(),{kAvvio:Tb,kIsOnCloseHandler:Ob}=Io(),{TimeTree:wV}=ab(),{Plugin:Nb}=mb(),{debug:ko}=Uc(),{validatePlugin:RV}=gb(),{isBundledOrTypescriptPlugin:PV}=vb(),{isPromiseLike:TV}=Kc(),{thenify:Ib}=$b(),{executeWithThenable:Rb}=wb();function wt(t,e,r){if(typeof t=="function"&&arguments.length===1&&(r=t,e={},t=null),typeof e=="function"&&(r=e,e={}),e=e||{},e.autostart=e.autostart!==!1,e.timeout=Number(e.timeout)||0,e.expose=e.expose||{},!new.target)return new wt(t,e,r);this._server=t||this,this._opts=e,t&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new wV,this._readyQ=Bc(this,Cb,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=Pb},this._closeQ=Bc(this,NV,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=Pb},this._doStart=null;let n=this;this._root=new Nb(Bc(this,this._loadPluginNextTick,1),function(i,o,a){n._doStart=a,o.autostart&&n.start()},e,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,s=>{ko("root plugin ready");try{this.emit("preReady"),this._root=null}catch(i){s=s||this._error||i}if(s){if(this._error=s,this._readyQ.length()===0)throw s}else this.booted=!0;this._readyQ.resume()})}EV(wt,vV);wt.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};wt.prototype.override=function(t,e,r){return t};wt.prototype[Tb]=!0;wt.prototype.use=function(t,e){return this._lastUsed=this._addPlugin(t,e,!1),this};wt.prototype._loadRegistered=function(){let t=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.queue.resume()),t?t.loadedSoFar():Promise.resolve()};Object.defineProperty(wt.prototype,"then",{get:Ib});wt.prototype._addPlugin=function(t,e,r){if(PV(t)&&(t=t.default),RV(t),e=e||{},this.booted)throw new SV;let n=this._current[0],s=new Nb(Bc(this,this._loadPluginNextTick,1),t,e,r,this._opts.timeout);if(this._trackPluginLoading(s),n.loaded)throw new Error(s.name,n.name);return n.enqueue(s,i=>{i&&(this._error=i)}),s};wt.prototype._expose=function(){let e=this,r=e._server,{use:n="use",after:s="after",ready:i="ready",onClose:o="onClose",close:a="close"}=this._opts.expose;if(r[n])throw new ru(n,"use");if(r[n]=function(u,c){return e.use(u,c),this},r[s])throw new ru(s,"after");if(r[s]=function(u){return typeof u!="function"?e._loadRegistered():(e.after(Vp(u,this)),this)},r[i])throw new ru(i,"ready");if(r[i]=function(u){if(u&&typeof u!="function")throw new Ao(i,typeof u);return e.ready(u?Vp(u,this):void 0)},r[o])throw new ru(o,"onClose");if(r[o]=function(u){if(typeof u!="function")throw new Ao(o,typeof u);return e.onClose(IV(u,this)),this},r[a])throw new ru(a,"close");if(r[a]=function(u){if(u&&typeof u!="function")throw new Ao(a,typeof u);return u?(e.close(Vp(u,this)),this):e.close()},r.then)throw new bV("then");Object.defineProperty(r,"then",{get:Ib.bind(e)}),r[Tb]=!0};wt.prototype.after=function(t){if(!t)return this._loadRegistered();this._addPlugin(e.bind(this),{},!0);function e(r,n,s){Cb.call(this,t,s)}return this};wt.prototype.onClose=function(t){if(typeof t!="function")throw new Ao("onClose",typeof t);return t[Ob]=!0,this._closeQ.unshift(t,e=>{e&&(this._error=e)}),this};wt.prototype.close=function(t){let e;if(t){if(typeof t!="function")throw new Ao("close",typeof t)}else e=new Promise(function(r,n){t=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(t),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),e};wt.prototype.ready=function(t){if(t){if(typeof t!="function")throw new Ao("ready",typeof t);this._readyQ.push(t),queueMicrotask(this.start.bind(this));return}return new Promise((e,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):e(n),process.nextTick(a)}})};wt.prototype._trackPluginLoading=function(t){let e=this._current[0]?.name||null;t.once("start",(r,n,s)=>{let i=this.pluginTree.start(e||null,n,s);t.once("loaded",(o,a,u)=>{this.pluginTree.stop(i,u)})})};wt.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()};wt.prototype.toJSON=function(){return this.pluginTree.toJSON()};wt.prototype._loadPlugin=function(t,e){let r=this;if(TV(t.func)){t.func.then(o=>{typeof o.default=="function"&&(o=o.default),t.func=o,this._loadPlugin(t,e)},e);return}let n=r._current[0];if(r._current.unshift(t),r._error&&!t.isAfter){ko("skipping loading of plugin as instance errored and it is not an after",t.name),process.nextTick(i);return}let s=n&&n.server||r._server;if(!t.isAfter)try{s=r.override(s,t.func,t.options)}catch(o){return ko("override errored",t.name),i(o)}t.exec(s,i);function i(o){t.finish(o,a=>{r._current.shift(),e(a)})}};wt.prototype._loadPluginNextTick=function(t,e){process.nextTick(this._loadPlugin.bind(this),t,e)};function Pb(){}function Cb(t,e){let r=this._server,n=this._error;if(this._error=null,t.length===0)this._error=n,Rb(t,[],e);else if(t.length===1)Rb(t,[n],e);else if(this._opts.timeout===0){let s=i=>{this._error=i,e(this._error)};t.length===2?t(n,s):t(n,r,s)}else OV.call(this,t,n,r,e)}function OV(t,e,r,n){let s=t.name;ko("setting up ready timeout",s,this._opts.timeout);let i=setTimeout(()=>{ko("timed out",s),i=null;let a=new $V(s);a.fn=t,this._error=a,n(a)},this._opts.timeout);t.length===2?t(e,o.bind(this)):t(e,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function NV(t,e){let r=this._server,n=t[Ob];if(t.length===0||t.length===1){let s;n?s=t(r):s=t(this._error),s&&typeof s.then=="function"?(ko("resolving close/onClose promise"),s.then(()=>process.nextTick(e),i=>process.nextTick(e,i))):process.nextTick(e)}else t.length===2?t(n?r:this._error,e):n?t(r,e):t(this._error,r,e)}function IV(t,e){return r.bind(e);function r(n,s){let i;t.length===0?(i=t(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===1?(i=t(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t(this,s)}}function Vp(t,e){return r.bind(e);function r(n,s){let i;t?t.length===0?(i=t(),i&&i.then?i.then(function(){process.nextTick(s,n)},s):process.nextTick(s,n)):t.length===1?(i=t(n),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===2?t(n,s):t(n,this,s):process.nextTick(s)}}zp.exports=wt;zp.exports.express=function(t){return wt(t,{expose:{use:"load"}})}});var Mt=_((Bhe,kb)=>{"use strict";var CV={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kPublicRouteContext:Symbol("fastify.routeOptions"),kGenReqId:Symbol("fastify.genReqId"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};kb.exports=CV});var Kp=_((Ghe,Gc)=>{"use strict";var{format:Hp}=require("node:util");function AV(t){return qb({...t,name:"DeprecationWarning"})}function qb({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,u){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code))}};n&&(s={[t]:function(o,a,u){i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code)}});let i=s[t];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=e,i.format=function(o,a,u){let c;return o&&a&&u?c=Hp(r,o,a,u):o&&a?c=Hp(r,o,a):o?c=Hp(r,o):c=r,c},i}var Up={createWarning:qb,createDeprecation:AV};Gc.exports=Up;Gc.exports.default=Up;Gc.exports.processWarning=Up});var ls=_((Jhe,Db)=>{"use strict";var{createDeprecation:tr,createWarning:jb}=Kp(),kV=tr({code:"FSTDEP005",message:'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.'}),qV=tr({code:"FSTDEP006",message:"You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s"}),jV=tr({code:"FSTDEP007",message:'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.'}),DV=tr({code:"FSTDEP008",message:'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.'}),LV=tr({code:"FSTDEP009",message:'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.'}),xV=tr({code:"FSTDEP010",message:'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.'}),MV=tr({code:"FSTDEP011",message:'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.'}),FV=tr({code:"FSTDEP012",message:'request.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "request.context" will be removed in `fastify@5`.'}),VV=tr({code:"FSTDEP013",message:'Direct return of "trailers" function is deprecated. Please use "callback" or "async-await" for return value. The support of direct return will removed in `fastify@5`.'}),zV=tr({code:"FSTDEP014",message:"You are trying to set/access the default route. This property is deprecated. Please, use setNotFoundHandler if you want to custom a 404 handler or the wildcard (*) to match all routes."}),HV=tr({code:"FSTDEP015",message:'You are accessing the deprecated "request.routeSchema" property. Use "request.routeOptions.schema" instead. Property "req.routeSchema" will be removed in `fastify@5`.'}),UV=tr({code:"FSTDEP016",message:'You are accessing the deprecated "request.routeConfig" property. Use "request.routeOptions.config" instead. Property "req.routeConfig" will be removed in `fastify@5`.'}),KV=tr({code:"FSTDEP017",message:'You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.'}),BV=tr({code:"FSTDEP018",message:'You are accessing the deprecated "request.routerMethod" property. Use "request.routeOptions.method" instead. Property "req.routerMethod" will be removed in `fastify@5`.'}),GV=tr({code:"FSTDEP019",message:'reply.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "reply.context" will be removed in `fastify@5`.'}),JV=tr({code:"FSTDEP020",message:'You are using the deprecated "reply.getResponseTime()" method. Use the "reply.elapsedTime" property instead. Method "reply.getResponseTime()" will be removed in `fastify@5`.'}),WV=jb({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),YV=jb({name:"FastifyWarning",code:"FSTWRN002",message:"The %s plugin being registered mixes async and callback styles, which will result in an error in `fastify@5`",unlimited:!0});Db.exports={FSTDEP005:kV,FSTDEP006:qV,FSTDEP007:jV,FSTDEP008:DV,FSTDEP009:LV,FSTDEP010:xV,FSTDEP011:MV,FSTDEP012:FV,FSTDEP013:VV,FSTDEP014:zV,FSTDEP015:HV,FSTDEP016:UV,FSTDEP017:KV,FSTDEP018:BV,FSTDEP019:GV,FSTDEP020:JV,FSTWRN001:WV,FSTWRN002:YV}});var rr=_((Whe,Jc)=>{"use strict";var V=jp(),Pi={FST_ERR_NOT_FOUND:V("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:V("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:V("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:V("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:V("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:V("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:V("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VERSION_CONSTRAINT_NOT_STR:V("FST_ERR_VERSION_CONSTRAINT_NOT_STR","Version constraint should be a string.",500,TypeError),FST_ERR_VALIDATION:V("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:V("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:V("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:V("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:V("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:V("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:V("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:V("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:V("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:V("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:V("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:V("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:V("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:V("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:V("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:V("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:V("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:V("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:V("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:V("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:V("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:V("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:V("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:V("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:V("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:V("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:V("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_ALREADY_SENT:V("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:V("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:V("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:V("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:V("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:V("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:V("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:V("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:V("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:V("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:V("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:V("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:V("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:V("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:V("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:V("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:V("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:V("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:V("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:V("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:V("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:V("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:V("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:V("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:V("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:V("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:V("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:V("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:V("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:V("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:V("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:V("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:V("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:V("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:V("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:V("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:V("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:V("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:V("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:V("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_CALLBACK_NOT_FN:V("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:V("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:V("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:V("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:V("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function XV(t,e){return e.cause=t,e}Jc.exports=Pi;Jc.exports.appendStackTrace=XV;Jc.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Pi.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Pi.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Pi.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Pi.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Pi.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:Pi.FST_ERR_PLUGIN_TIMEOUT}});var xs=_((Yhe,Kb)=>{"use strict";var QV=["onRoute","onRegister","onReady","onListen","preClose","onClose"],Fb=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],ZV=Fb.concat(QV),{FST_ERR_HOOK_INVALID_TYPE:e2,FST_ERR_HOOK_INVALID_HANDLER:t2,FST_ERR_SEND_UNDEFINED_ERR:Wc,FST_ERR_HOOK_TIMEOUT:r2,FST_ERR_HOOK_NOT_SUPPORTED:n2,AVVIO_ERRORS_MAP:Lb,appendStackTrace:xb}=rr(),{kChildren:nu,kHooks:Vb,kRequestPayloadStream:Mb}=Mt();function su(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}su.prototype=Object.create(null);su.prototype.validate=function(t,e){if(typeof t!="string")throw new e2;if(Array.isArray(this[t])===!1)throw new n2(t);if(typeof e!="function")throw new t2(t,Object.prototype.toString.call(e))};su.prototype.add=function(t,e){this.validate(t,e),this[t].push(e)};function s2(t){let e=new su;return e.onRequest=t.onRequest.slice(),e.preParsing=t.preParsing.slice(),e.preValidation=t.preValidation.slice(),e.preSerialization=t.preSerialization.slice(),e.preHandler=t.preHandler.slice(),e.onSend=t.onSend.slice(),e.onResponse=t.onResponse.slice(),e.onError=t.onError.slice(),e.onRoute=t.onRoute.slice(),e.onRegister=t.onRegister.slice(),e.onTimeout=t.onTimeout.slice(),e.onRequestAbort=t.onRequestAbort.slice(),e.onReady=[],e.onListen=[],e.preClose=[],e}function zb(t,e,r,n){let s=r[Vb][t],i=0,o=0;u();function a(l){if(l){l.code==="AVV_ERR_READY_TIMEOUT"?l=xb(l,new r2(t)):l=Lb[l.code]!=null?xb(l,new Lb[l.code](l.message)):l,n(l);return}n()}function u(l){if(l){a(l);return}if(i===s.length&&o===r[nu].length){i===0&&o===0?a():e(function(h,d){a(h),d(h)});return}if(i===s.length&&o<r[nu].length){let f=r[nu][o++];zb(t,e,f,u);return}e(c(s[i++],r)),u()}function c(l,f){return function(h,d){if(h){d(h);return}if(l.length===1){try{l.call(f,d)}catch(p){d(p)}return}try{let p=l.call(f);if(p&&typeof p.then=="function"){p.then(d,d);return}}catch(p){h=p}d(h)}}}function Hb(t){let e=t[Vb].onListen,r=e.length,n=0,s=0;i();function i(a){if(a&&t.log.error(a),n===r){for(;s<t[nu].length;){let u=t[nu][s++];Hb(u)}return}o(e[n++],t,i)}async function o(a,u,c){if(a.length===1){try{a.call(u,c)}catch(l){c(l)}return}try{let l=a.call(u);if(l&&typeof l.then=="function"){l.then(c,c);return}c()}catch(l){c(l)}}}function qo(t){return function(r,n,s,i){let o=0;function a(l){if(l||o===r.length){i(l,n,s);return}let f;try{f=t(r[o++],n,s,a)}catch(h){i(h,n,s);return}f&&typeof f.then=="function"&&f.then(u,c)}function u(){a()}function c(l){l||(l=new Wc),i(l,n,s)}a()}}function i2(t,e,r,n){return t(e,r,n)}var o2=qo(i2),a2=qo(iu),u2=qo(iu),l2=qo(iu),c2=qo(iu);function Ub(t,e,r,n,s){let i=0;function o(c,l){if(c){s(c,e,r,n);return}if(l!==void 0&&(n=l),i===t.length){s(null,e,r,n);return}let f;try{f=t[i++](e,r,n,o)}catch(h){s(h,e,r);return}f&&typeof f.then=="function"&&f.then(a,u)}function a(c){o(null,c)}function u(c){c||(c=new Wc),s(c,e,r,n)}o()}var f2=Ub;function d2(t,e,r,n){let s=0;function i(u,c){if(r.sent)return;if(c!==void 0&&(e[Mb]=c),u||s===t.length){n(u,e,r);return}let l;try{l=t[s++](e,r,e[Mb],i)}catch(f){n(f,e,r);return}l&&typeof l.then=="function"&&l.then(o,a)}function o(u){i(null,u)}function a(u){u||(u=new Wc),n(u,e,r)}i()}function h2(t,e,r){let n=0;function s(a){if(a||n===t.length){r(a,e);return}let u;try{u=t[n++](e,s)}catch(c){r(c,e);return}u&&typeof u.then=="function"&&u.then(i,o)}function i(){s()}function o(a){a||(a=new Wc),r(a,e)}s()}function iu(t,e,r,n){if(r.sent!==!0)return t(e,r,n)}Kb.exports={Hooks:su,buildHooks:s2,hookRunnerGenerator:qo,preParsingHookRunner:d2,onResponseHookRunner:o2,onSendHookRunner:Ub,preSerializationHookRunner:f2,onRequestAbortHookRunner:h2,hookIterator:iu,hookRunnerApplication:zb,onListenHookRunner:Hb,preHandlerHookRunner:u2,preValidationHookRunner:a2,onRequestHookRunner:c2,onTimeoutHookRunner:l2,lifecycleHooks:Fb,supportedHooks:ZV}});var tw=_((Xhe,Gp)=>{"use strict";var p2=require("node:http"),m2=require("node:https"),y2=require("node:dns"),{FSTDEP011:Bb}=ls(),{kState:nr,kOptions:g2,kServerBindings:_2}=Mt(),{onListenHookRunner:Yc}=xs(),{FST_ERR_HTTP2_INVALID_VERSION:v2,FST_ERR_REOPENED_CLOSE_SERVER:Wb,FST_ERR_REOPENED_SERVER:Yb,FST_ERR_LISTEN_OPTIONS_INVALID:E2}=rr();Gp.exports.createServer=S2;Gp.exports.compileValidateHTTPVersion=b2;function Xb(t){return`Server listening at ${t}`}function S2(t,e){let r=Zb(t,e);function n(s,...i){let o=i.slice(-1).pop(),a=Object.prototype.toString.call(arguments[0]);if(arguments.length===0)s=Bp([]);else if(arguments.length>0&&a!=="[object Object]"&&a!=="[object Function]")Bb(),s=Bp(Array.from(arguments)),o=s.cb;else if(i.length>1){Bb();let c=s.path?[s.path]:[s.port??0,s.host??"localhost"];Object.assign(s,Bp([...c,...i]))}else s.cb=o;if(s.signal){if(typeof s.signal.on!="function"&&typeof s.signal.addEventListener!="function")throw new E2("Invalid options.signal");if(s.signal.aborted)this.close();else{let c=()=>{this.close()};s.signal.addEventListener("abort",c,{once:!0})}}let u;if(s.path==null?u=s.host??"localhost":u=s.host,Object.prototype.hasOwnProperty.call(s,"host")===!1&&(s.host=u),u==="localhost"?s.cb=(c,l)=>{if(c){o(c,l);return}Gb.call(this,r,e,t,s,()=>{this[nr].listening=!0,o(null,l),Yc(this)})}:s.cb=(c,l)=>{if(c){o(c,l);return}this[nr].listening=!0,o(null,l),Yc(this)},o===void 0)return $2.call(this,r,s).then(l=>new Promise((f,h)=>{u==="localhost"?Gb.call(this,r,e,t,s,()=>{this[nr].listening=!0,f(l),Yc(this)}):(f(l),Yc(this))}));this.ready(Qb.call(this,r,s))}return{server:r,listen:n}}function Gb(t,e,r,n,s){this[nr].listening=!1,y2.lookup(n.host,{all:!0},(i,o)=>{if(i){s();return}let a=t.listening&&r.serverFactory,u=0,c=0;if(!a){let f=t.address();for(let h of o)if(h.address!==f.address){u++;let d=Object.assign({},n,{host:h.address,port:f.port,cb:g=>{c++,g||this[_2].push(p),c===u&&s()}}),p=Zb(r,e),m=()=>{p.close(()=>{}),r.forceCloseConnections==="idle"?p.closeIdleConnections():typeof p.closeAllConnections=="function"&&r.forceCloseConnections&&p.closeAllConnections()};p.on("upgrade",t.emit.bind(t,"upgrade")),t.on("unref",m),t.on("close",m),t.on("error",m),this[nr].listening=!1,Qb.call(this,p,d)()}}if(u===0){s();return}let l=t.unref;t.unref=function(){l.call(t),t.emit("unref")}})}function Qb(t,e){let r=n=>{if(t.removeListener("error",r),n)this[nr].listening=!1,e.cb(n,null);else{let s=ew.call(this,t,e.listenTextResolver||Xb);e.cb(null,s)}};return n=>{if(n!=null)return e.cb(n);if(this[nr].listening&&this[nr].closing)return e.cb(new Wb,null);if(this[nr].listening)return e.cb(new Yb,null);t.once("error",r),this[nr].closing||(t.listen(e,r),this[nr].listening=!0)}}function $2(t,e){return this[nr].listening&&this[nr].closing?Promise.reject(new Wb):this[nr].listening?Promise.reject(new Yb):this.ready().then(()=>{let r,n=new Promise((i,o)=>{r=a=>{this[nr].listening=!1,o(a)},t.once("error",r)}),s=new Promise((i,o)=>{t.listen(e,()=>{t.removeListener("error",r),i(ew.call(this,t,e.listenTextResolver||Xb))}),this[nr].listening=!0});return Promise.race([n,s])})}function b2(t){let e=!1,r=new Map;return t.serverFactory&&(e=!0),t.http2?(r.set("2.0",!0),t.https&&t.https.allowHTTP1===!0&&(r.set("1.1",!0),r.set("1.0",!0))):(r.set("1.1",!0),r.set("1.0",!0)),function(s){return e||r.has(s)}}function Zb(t,e){let r=null,n=t.https===!0?{}:t.https;return t.serverFactory?r=t.serverFactory(e,t):t.http2?(typeof n=="object"?r=Jb().createSecureServer(n,e):r=Jb().createServer(e),r.on("session",R2(t.http2SessionTimeout))):(n?r=m2.createServer(n,e):r=p2.createServer(t.http,e),r.keepAliveTimeout=t.keepAliveTimeout,r.requestTimeout=t.requestTimeout,t.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=t.maxRequestsPerSocket)),t.serverFactory||r.setTimeout(t.connectionTimeout),r}function Bp(t){if(t.length===0)return{port:0,host:"localhost"};let r={cb:typeof t[t.length-1]=="function"?t.pop():void 0},n=t[0],s=t.length,i=t[s-1];return typeof n=="string"&&isNaN(n)?(r.path=n,r.backlog=s>1?i:void 0):(r.port=s>=1&&Number.isInteger(n)?n:w2(n),r.host=s>=2&&t[1]?t[1]:"localhost",r.backlog=s>=3?t[2]:void 0),r}function w2(t){let e=Number(t);return e>=0&&!Number.isNaN(e)&&Number.isInteger(e)?e:0}function ew(t,e){let r=t.address(),n=typeof r=="string";n||(r.address.indexOf(":")===-1?r=r.address+":"+r.port:r="["+r.address+"]:"+r.port),r=(n?"":"http"+(this[g2].https?"s":"")+"://")+r;let s=e(r);return this.log.info(s),r}function Jb(){try{return require("node:http2")}catch{throw new v2}}function R2(t){return function(e){e.setTimeout(t,P2)}}function P2(){this.close()}});var Xp=_((Qhe,nw)=>{"use strict";var{kSchemaHeaders:Zc,kSchemaParams:Jp,kSchemaQuerystring:Wp,kSchemaBody:Yp,kSchemaResponse:rw}=Mt(),T2=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:O2}=rr(),{FSTWRN001:Xc}=ls();function N2(t,e){if(!t.schema||!t.schema.response)return;let{method:r,url:n}=t.config||{};t[rw]=Object.keys(t.schema.response).reduce(function(s,i){let o=t.schema.response[i];if(i=i.toLowerCase(),!T2.exec(i))throw new O2;if(o.content){let a={};for(let u of Object.keys(o.content)){let c=o.content[u].schema;a[u]=e({schema:c,url:n,method:r,httpStatus:i,contentType:u})}s[i]=a}else s[i]=e({schema:o,url:n,method:r,httpStatus:i});return s},{})}function I2(t,e,r){let{schema:n}=t;if(!n)return;let{method:s,url:i}=t.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))t[Zc]=e({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(u=>{a[u]=o[u]}),a.required instanceof Array&&(a.required=a.required.map(u=>u.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(u=>{a.properties[u.toLowerCase()]=o.properties[u]})),t[Zc]=e({schema:a,method:s,url:i,httpPart:"headers"})}else Object.prototype.hasOwnProperty.call(n,"headers")&&Xc("headers",s,i);n.body?t[Yp]=e({schema:n.body,method:s,url:i,httpPart:"body"}):Object.prototype.hasOwnProperty.call(n,"body")&&Xc("body",s,i),n.querystring?t[Wp]=e({schema:n.querystring,method:s,url:i,httpPart:"querystring"}):Object.prototype.hasOwnProperty.call(n,"querystring")&&Xc("querystring",s,i),n.params?t[Jp]=e({schema:n.params,method:s,url:i,httpPart:"params"}):Object.prototype.hasOwnProperty.call(n,"params")&&Xc("params",s,i)}function Qc(t,e,r){let n=e[r]===void 0,s=t&&t(n?null:e[r]);if(s?.then)return s.then(o=>i(o)).catch(o=>o);return i(s);function i(o){return o===!1?t.errors:o&&o.error?o.error:(o&&o.value&&(e[r]=o.value),!1)}}function ef(t,e,r){let n=r===void 0;if(n||!r.skipParams){let i=Qc(t[Jp],e,"params");if(i)return typeof i.then!="function"?Ms(i,"params",t.schemaErrorFormatter):C2(i,t,e)}if(n||!r.skipBody){let i=Qc(t[Yp],e,"body");if(i)return typeof i.then!="function"?Ms(i,"body",t.schemaErrorFormatter):A2(i,t,e)}if(n||!r.skipQuery){let i=Qc(t[Wp],e,"query");if(i)return typeof i.then!="function"?Ms(i,"querystring",t.schemaErrorFormatter):k2(i,t,e)}let s=Qc(t[Zc],e,"headers");return s?typeof s.then!="function"?Ms(s,"headers",t.schemaErrorFormatter):q2(s,t,e):!1}function C2(t,e,r){return t.then(n=>n?Ms(n,"params",e.schemaErrorFormatter):ef(e,r,{skipParams:!0}))}function A2(t,e,r){return t.then(n=>n?Ms(n,"body",e.schemaErrorFormatter):ef(e,r,{skipParams:!0,skipBody:!0}))}function k2(t,e,r){return t.then(n=>n?Ms(n,"querystring",e.schemaErrorFormatter):ef(e,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function q2(t,e,r){return t.then(n=>n?Ms(n,"headers",e.schemaErrorFormatter):!1)}function Ms(t,e,r){if(t instanceof Error)return t.statusCode=t.statusCode||400,t.code=t.code||"FST_ERR_VALIDATION",t.validationContext=t.validationContext||e,t;let n=r(t,e);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=t,n.validationContext=e,n}nw.exports={symbols:{bodySchema:Yp,querystringSchema:Wp,responseSchema:rw,paramsSchema:Jp,headersSchema:Zc},compileSchemasForValidation:I2,compileSchemasForSerialization:N2,validate:ef}});var Qp=_((Zhe,iw)=>{"use strict";var{kReplyIsError:sw,kReplyHijacked:j2}=Mt();function D2(t,e){t.then(function(r){if(e[j2]!==!0&&(r!==void 0||e.sent===!1&&e.raw.headersSent===!1&&e.request.raw.aborted===!1))try{e.send(r)}catch(n){e[sw]=!0,e.send(n)}},function(r){if(e.sent===!0){e.log.error({err:r},"Promise errored, but reply.sent = true was set");return}e[sw]=!0;try{e.send(r)}catch(n){e.send(n)}})}iw.exports=D2});var rm=_((epe,tm)=>{"use strict";var{validate:L2}=Xp(),{preValidationHookRunner:x2,preHandlerHookRunner:M2}=xs(),F2=Qp(),{kReplyIsError:tf,kRouteContext:Vs}=Mt();function V2(t,e,r){if(r.sent===!0)return;if(t!=null){r[tf]=!0,r.send(t);return}let n=e.raw.method,s=e.headers,i=e[Vs];if(n==="GET"||n==="HEAD"){Fs(e,r);return}let o=s["content-type"];if(n==="POST"||n==="PUT"||n==="PATCH"||n==="TRACE"||n==="SEARCH"){o===void 0?s["transfer-encoding"]===void 0&&(s["content-length"]==="0"||s["content-length"]===void 0)?Fs(e,r):i.contentTypeParser.run("",Fs,e,r):i.contentTypeParser.run(o,Fs,e,r);return}if(n==="OPTIONS"||n==="DELETE"){o!==void 0&&(s["transfer-encoding"]!==void 0||s["content-length"]!==void 0)?i.contentTypeParser.run(o,Fs,e,r):Fs(e,r);return}Fs(e,r)}function Fs(t,e){try{t[Vs].preValidation!==null?x2(t[Vs].preValidation,t,e,Zp):Zp(null,t,e)}catch(r){Zp(r,t,e)}}function Zp(t,e,r){if(r.sent===!0)return;if(t!=null){r[tf]=!0,r.send(t);return}let n=L2(r[Vs],e);if(n&&typeof n.then=="function"||!1){let i=ow.bind(null,e,r);n.then(i,i)}else ow(e,r,n)}function ow(t,e,r){if(r){if(e[Vs].attachValidation===!1){e.send(r);return}e.request.validationError=r}t[Vs].preHandler!==null?M2(t[Vs].preHandler,t,e,em):em(null,t,e)}function em(t,e,r){if(r.sent)return;if(t!=null){r[tf]=!0,r.send(t);return}let n;try{n=e[Vs].handler(e,r)}catch(s){r[tf]=!0,r.send(s);return}n!==void 0&&(n!==null&&typeof n.then=="function"?F2(n,r):r.send(n))}tm.exports=V2;tm.exports[Symbol.for("internals")]={handler:Fs,preHandlerCallback:em}});var uw=_((tpe,aw)=>{"use strict";function jo(){}var z2={fatal:jo,error:jo,warn:jo,info:jo,debug:jo,trace:jo};Object.defineProperty(aw,"exports",{get(){return Object.create(z2)}})});var sm=_((rpe,fw)=>{"use strict";var ou=t=>t&&typeof t.message=="string",nm=t=>{if(!t)return;let e=t.cause;if(typeof e=="function"){let r=t.cause();return ou(r)?r:void 0}else return ou(e)?e:void 0},lw=(t,e)=>{if(!ou(t))return"";let r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;let n=nm(t);return n?(e.add(t),r+`
caused by: `+lw(n,e)):r},H2=t=>lw(t,new Set),cw=(t,e,r)=>{if(!ou(t))return"";let n=r?"":t.message||"";if(e.has(t))return n+": ...";let s=nm(t);if(s){e.add(t);let i=typeof t.cause=="function";return n+(i?"":": ")+cw(s,e,i)}else return n},U2=t=>cw(t,new Set);fw.exports={isErrorLike:ou,getErrorCause:nm,stackWithCauses:H2,messageWithCauses:U2}});var im=_((npe,hw)=>{"use strict";var K2=Symbol("circular-ref-tag"),rf=Symbol("pino-raw-err-ref"),dw=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[rf]},set:function(t){this[rf]=t}}});Object.defineProperty(dw,rf,{writable:!0,value:{}});hw.exports={pinoErrProto:dw,pinoErrorSymbols:{seen:K2,rawSymbol:rf}}});var yw=_((spe,mw)=>{"use strict";mw.exports=am;var{messageWithCauses:B2,stackWithCauses:G2,isErrorLike:pw}=sm(),{pinoErrProto:J2,pinoErrorSymbols:W2}=im(),{seen:om}=W2,{toString:Y2}=Object.prototype;function am(t){if(!pw(t))return t;t[om]=void 0;let e=Object.create(J2);e.type=Y2.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=B2(t),e.stack=G2(t),Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>am(r)));for(let r in t)if(e[r]===void 0){let n=t[r];pw(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,om)&&(e[r]=am(n)):e[r]=n}return delete t[om],e.raw=t,e}});var _w=_((ipe,gw)=>{"use strict";gw.exports=sf;var{isErrorLike:um}=sm(),{pinoErrProto:X2,pinoErrorSymbols:Q2}=im(),{seen:nf}=Q2,{toString:Z2}=Object.prototype;function sf(t){if(!um(t))return t;t[nf]=void 0;let e=Object.create(X2);e.type=Z2.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=t.message,e.stack=t.stack,Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>sf(r))),um(t.cause)&&!Object.prototype.hasOwnProperty.call(t.cause,nf)&&(e.cause=sf(t.cause));for(let r in t)if(e[r]===void 0){let n=t[r];um(n)?Object.prototype.hasOwnProperty.call(n,nf)||(e[r]=sf(n)):e[r]=n}return delete t[nf],e.raw=t,e}});var $w=_((ope,Sw)=>{"use strict";Sw.exports={mapHttpRequest:ez,reqSerializer:Ew};var lm=Symbol("pino-raw-req-ref"),vw=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[lm]},set:function(t){this[lm]=t}}});Object.defineProperty(vw,lm,{writable:!0,value:{}});function Ew(t){let e=t.info||t.socket,r=Object.create(vw);if(r.id=typeof t.id=="function"?t.id():t.id||(t.info?t.info.id:void 0),r.method=t.method,t.originalUrl)r.url=t.originalUrl;else{let n=t.path;r.url=typeof n=="string"?n:t.url?t.url.path||t.url:void 0}return t.query&&(r.query=t.query),t.params&&(r.params=t.params),r.headers=t.headers,r.remoteAddress=e&&e.remoteAddress,r.remotePort=e&&e.remotePort,r.raw=t.raw||t,r}function ez(t){return{req:Ew(t)}}});var Pw=_((ape,Rw)=>{"use strict";Rw.exports={mapHttpResponse:tz,resSerializer:ww};var cm=Symbol("pino-raw-res-ref"),bw=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[cm]},set:function(t){this[cm]=t}}});Object.defineProperty(bw,cm,{writable:!0,value:{}});function ww(t){let e=Object.create(bw);return e.statusCode=t.headersSent?t.statusCode:null,e.headers=t.getHeaders?t.getHeaders():t._headers,e.raw=t,e}function tz(t){return{res:ww(t)}}});var dm=_((upe,Tw)=>{"use strict";var fm=yw(),rz=_w(),of=$w(),af=Pw();Tw.exports={err:fm,errWithCause:rz,mapHttpRequest:of.mapHttpRequest,mapHttpResponse:af.mapHttpResponse,req:of.reqSerializer,res:af.resSerializer,wrapErrorSerializer:function(e){return e===fm?e:function(n){return e(fm(n))}},wrapRequestSerializer:function(e){return e===of.reqSerializer?e:function(n){return e(of.reqSerializer(n))}},wrapResponseSerializer:function(e){return e===af.resSerializer?e:function(n){return e(af.resSerializer(n))}}}});var hm=_((lpe,Ow)=>{"use strict";function nz(t,e){return e}Ow.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=nz;let r=new Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var Iw=_((cpe,Nw)=>{"use strict";Nw.exports=sz;function sz(t={}){let{ERR_PATHS_MUST_BE_STRINGS:e=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=t;return function({paths:s}){s.forEach(i=>{if(typeof i!="string")throw Error(e());try{if(//.test(i))throw Error();let o=(i[0]==="["?"":".")+i.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${o}
            if ([o${o}].length !== 1) throw Error()`)()}catch{throw Error(r(i))}})}}});var uf=_((fpe,Cw)=>{"use strict";Cw.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var kw=_((dpe,Aw)=>{"use strict";var iz=uf();Aw.exports=oz;function oz({paths:t}){let e=[];var r=0;let n=t.reduce(function(s,i,o){var a=i.match(iz).map(l=>l.replace(/'|"|`/g,""));let u=i[0]==="[";a=a.map(l=>l[0]==="["?l.substr(1,l.length-2):l);let c=a.indexOf("*");if(c>-1){let l=a.slice(0,c),f=l.join("."),h=a.slice(c+1,a.length),d=h.length>0;r++,e.push({before:l,beforeStr:f,after:h,nested:d})}else s[i]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(i),leadingBracket:u};return s},{});return{wildcards:e,wcLen:r,secret:n}}});var jw=_((hpe,qw)=>{"use strict";var az=uf();qw.exports=uz;function uz({secret:t,serialize:e,wcLen:r,strict:n,isCensorFct:s,censorFctTakesPath:i},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${dz(n,e)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${lz(t,s,i)}
    this.compileRestore()
    ${cz(r>0,s,i)}
    this.secret = originalSecret
    ${fz(e)}
  `).bind(o);return a.state=o,e===!1&&(a.restore=u=>o.restore(u)),a}function lz(t,e,r){return Object.keys(t).map(n=>{let{escPath:s,leadingBracket:i,path:o}=t[n],a=i?1:0,u=i?"":".",c=[];for(var l;(l=az.exec(n))!==null;){let[,p]=l,{index:m,input:g}=l;m>a&&c.push(g.substring(0,m-(p?0:1)))}var f=c.map(p=>`o${u}${p}`).join(" && ");f.length===0?f+=`o${u}${n} != null`:f+=` && o${u}${n} != null`;let h=`
      switch (true) {
        ${c.reverse().map(p=>`
          case o${u}${p} === censor:
            secret[${s}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${f}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${s}].precensored = true
        } else {
          secret[${s}].val = val
          o${u}${n} = ${e?`censor(${d})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function cz(t,e,r){return t===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${e}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${e}, ${r})
      }
    }
  `:""}function fz(t){return t===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function dz(t,e){return t===!0?"throw Error('fast-redact: primitives cannot be redacted')":e===!1?"return o":"return this.serialize(o)"}});var mm=_((ppe,xw)=>{"use strict";xw.exports={groupRedact:pz,groupRestore:hz,nestedRedact:yz,nestedRestore:mz};function hz({keys:t,values:e,target:r}){if(r==null||typeof r=="string")return;let n=t.length;for(var s=0;s<n;s++){let i=t[s];r[i]=e[s]}}function pz(t,e,r,n,s){let i=Dw(t,e);if(i==null||typeof i=="string")return{keys:null,values:null,target:i,flat:!0};let o=Object.keys(i),a=o.length,u=e.length,c=s?[...e]:void 0,l=new Array(a);for(var f=0;f<a;f++){let h=o[f];l[f]=i[h],s?(c[u]=h,i[h]=r(i[h],c)):n?i[h]=r(i[h]):i[h]=r}return{keys:o,values:l,target:i,flat:!0}}function mz(t){for(let e=0;e<t.length;e++){let{target:r,path:n,value:s}=t[e],i=r;for(let o=n.length-1;o>0;o--)i=i[n[o]];i[n[0]]=s}}function yz(t,e,r,n,s,i,o){let a=Dw(e,r);if(a==null)return;let u=Object.keys(a),c=u.length;for(var l=0;l<c;l++){let f=u[l];gz(t,a,f,r,n,s,i,o)}return t}function pm(t,e){return t!=null?"hasOwn"in Object?Object.hasOwn(t,e):Object.prototype.hasOwnProperty.call(t,e):!1}function gz(t,e,r,n,s,i,o,a){let u=s.length,c=u-1,l=r;var f=-1,h,d,p,m=null,g=null,E,$,v=!1,y=0,S=0,N=_z();if(p=h=e[r],typeof h=="object"){for(;h!=null&&++f<u&&(S+=1,r=s[f],m=p,!(r!=="*"&&!g&&!(typeof h=="object"&&r in h)));)if(!(r==="*"&&(g==="*"&&(v=!0),g=r,f!==c))){if(g){let T=Object.keys(h);for(var w=0;w<T.length;w++){let A=T[w];if($=h[A],E=r==="*",v)N=cs(N,A,S),y=f,p=Lw($,y-1,r,n,s,i,o,a,l,h,d,p,E,A,f,c,N,t,e[l],S+1);else if(E||typeof $=="object"&&$!==null&&r in $){if(E?p=$:p=$[r],d=f!==c?p:o?a?i(p,[...n,l,...s]):i(p):i,E){let R=au(cs(N,A,S),p,e[l]);t.push(R),h[A]=d}else if($[r]!==d)if(d===void 0&&i!==void 0||pm($,r)&&d===p)N=cs(N,A,S);else{N=cs(N,A,S);let R=au(cs(N,r,S+1),p,e[l]);t.push(R),$[r]=d}}}g=null}else{if(p=h[r],N=cs(N,r,S),d=f!==c?p:o?a?i(p,[...n,l,...s]):i(p):i,!(pm(h,r)&&d===p||d===void 0&&i!==void 0)){let T=au(N,p,e[l]);t.push(T),h[r]=d}h=h[r]}if(typeof h!="object")break}}}function Dw(t,e){for(var r=-1,n=e.length,s=t;s!=null&&++r<n;)s=s[e[r]];return s}function Lw(t,e,r,n,s,i,o,a,u,c,l,f,h,d,p,m,g,E,$,v){if(e===0&&(h||typeof t=="object"&&t!==null&&r in t)){if(h?f=t:f=t[r],l=p!==m?f:o?a?i(f,[...n,u,...s]):i(f):i,h){let y=au(g,f,$);E.push(y),c[d]=l}else if(t[r]!==l){if(!(l===void 0&&i!==void 0||pm(t,r)&&l===f)){let y=au(cs(g,r,v+1),f,$);E.push(y),t[r]=l}}}for(let y in t)typeof t[y]=="object"&&(g=cs(g,y,v),Lw(t[y],e-1,r,n,s,i,o,a,u,c,l,f,h,d,p,m,g,E,$,v+1))}function _z(){return{parent:null,key:null,children:[],depth:0}}function cs(t,e,r){if(t.depth===r)return cs(t.parent,e,r);var n={parent:t,key:e,depth:r,children:[]};return t.children.push(n),n}function au(t,e,r){let n=t,s=[];do s.push(n.key),n=n.parent;while(n.parent!=null);return{path:s,value:e,target:r}}});var Fw=_((mpe,Mw)=>{"use strict";var{groupRestore:vz,nestedRestore:Ez}=mm();Mw.exports=Sz;function Sz(){return function(){if(this.restore){this.restore.state.secret=this.secret;return}let{secret:e,wcLen:r}=this,n=Object.keys(e),s=$z(e,n),i=r>0,o=i?{secret:e,groupRestore:vz,nestedRestore:Ez}:{secret:e};this.restore=Function("o",bz(s,n,i)).bind(o),this.restore.state=o}}function $z(t,e){return e.map(r=>{let{circle:n,escPath:s,leadingBracket:i}=t[r],a=n?`o.${n} = secret[${s}].val`:`o${i?"":"."}${r} = secret[${s}].val`,u=`secret[${s}].val = undefined`;return`
      if (secret[${s}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function bz(t,e,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${e.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${t}
    return o
  `}});var zw=_((ype,Vw)=>{"use strict";Vw.exports=wz;function wz(t){let{secret:e,censor:r,compileRestore:n,serialize:s,groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}=t,c=[{secret:e,censor:r,compileRestore:n}];return s!==!1&&c.push({serialize:s}),u>0&&c.push({groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}),Object.assign(...c)}});var Kw=_((gpe,Uw)=>{"use strict";var Hw=Iw(),Rz=kw(),Pz=jw(),Tz=Fw(),{groupRedact:Oz,nestedRedact:Nz}=mm(),Iz=zw(),Cz=uf(),Az=Hw(),ym=t=>t;ym.restore=ym;var kz="[REDACTED]";gm.rx=Cz;gm.validator=Hw;Uw.exports=gm;function gm(t={}){let e=Array.from(new Set(t.paths||[])),r="serialize"in t&&(t.serialize===!1||typeof t.serialize=="function")?t.serialize:JSON.stringify,n=t.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let s=n===!0?void 0:"censor"in t?t.censor:kz,i=typeof s=="function",o=i&&s.length>1;if(e.length===0)return r||ym;Az({paths:e,serialize:r,censor:s});let{wildcards:a,wcLen:u,secret:c}=Rz({paths:e,censor:s}),l=Tz(),f="strict"in t?t.strict:!0;return Pz({secret:c,wcLen:u,serialize:r,strict:f,isCensorFct:i,censorFctTakesPath:o},Iz({secret:c,censor:s,compileRestore:l,serialize:r,groupRedact:Oz,nestedRedact:Nz,wildcards:a,wcLen:u}))}});var Do=_((_pe,Bw)=>{"use strict";var qz=Symbol("pino.setLevel"),jz=Symbol("pino.getLevel"),Dz=Symbol("pino.levelVal"),Lz=Symbol("pino.levelComp"),xz=Symbol("pino.useLevelLabels"),Mz=Symbol("pino.useOnlyCustomLevels"),Fz=Symbol("pino.mixin"),Vz=Symbol("pino.lsCache"),zz=Symbol("pino.chindings"),Hz=Symbol("pino.asJson"),Uz=Symbol("pino.write"),Kz=Symbol("pino.redactFmt"),Bz=Symbol("pino.time"),Gz=Symbol("pino.timeSliceIndex"),Jz=Symbol("pino.stream"),Wz=Symbol("pino.stringify"),Yz=Symbol("pino.stringifySafe"),Xz=Symbol("pino.stringifiers"),Qz=Symbol("pino.end"),Zz=Symbol("pino.formatOpts"),eH=Symbol("pino.messageKey"),tH=Symbol("pino.errorKey"),rH=Symbol("pino.nestedKey"),nH=Symbol("pino.nestedKeyStr"),sH=Symbol("pino.mixinMergeStrategy"),iH=Symbol("pino.msgPrefix"),oH=Symbol("pino.wildcardFirst"),aH=Symbol.for("pino.serializers"),uH=Symbol.for("pino.formatters"),lH=Symbol.for("pino.hooks"),cH=Symbol.for("pino.metadata");Bw.exports={setLevelSym:qz,getLevelSym:jz,levelValSym:Dz,levelCompSym:Lz,useLevelLabelsSym:xz,mixinSym:Fz,lsCacheSym:Vz,chindingsSym:zz,asJsonSym:Hz,writeSym:Uz,serializersSym:aH,redactFmtSym:Kz,timeSym:Bz,timeSliceIndexSym:Gz,streamSym:Jz,stringifySym:Wz,stringifySafeSym:Yz,stringifiersSym:Xz,endSym:Qz,formatOptsSym:Zz,messageKeySym:eH,errorKeySym:tH,nestedKeySym:rH,wildcardFirstSym:oH,needsMetadataGsym:cH,useOnlyCustomLevelsSym:Mz,formattersSym:uH,hooksSym:lH,nestedKeyStrSym:nH,mixinMergeStrategySym:sH,msgPrefixSym:iH}});var Em=_((vpe,Yw)=>{"use strict";var vm=Kw(),{redactFmtSym:fH,wildcardFirstSym:lf}=Do(),{rx:_m,validator:dH}=vm,Gw=dH({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:t=>`pino \u2013 redact paths array contains an invalid path (${t})`}),Jw="[Redacted]",Ww=!1;function hH(t,e){let{paths:r,censor:n}=pH(t),s=r.reduce((a,u)=>{_m.lastIndex=0;let c=_m.exec(u),l=_m.exec(u),f=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(f==="*"&&(f=lf),l===null)return a[f]=null,a;if(a[f]===null)return a;let{index:h}=l,d=`${u.substr(h,u.length-1)}`;return a[f]=a[f]||[],f!==lf&&a[f].length===0&&a[f].push(...a[lf]||[]),f===lf&&Object.keys(a).forEach(function(p){a[p]&&a[p].push(d)}),a[f].push(d),a},{}),i={[fH]:vm({paths:r,censor:n,serialize:e,strict:Ww})},o=(...a)=>e(typeof n=="function"?n(...a):n);return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce((a,u)=>{if(s[u]===null)a[u]=c=>o(c,[u]);else{let c=typeof n=="function"?(l,f)=>n(l,[u,...f]):n;a[u]=vm({paths:s[u],censor:c,serialize:e,strict:Ww})}return a},i)}function pH(t){if(Array.isArray(t))return t={paths:t,censor:Jw},Gw(t),t;let{paths:e,censor:r=Jw,remove:n}=t;if(Array.isArray(e)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),Gw({paths:e,censor:r}),{paths:e,censor:r}}Yw.exports=hH});var Qw=_((Epe,Xw)=>{"use strict";var mH=()=>"",yH=()=>`,"time":${Date.now()}`,gH=()=>`,"time":${Math.round(Date.now()/1e3)}`,_H=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;Xw.exports={nullTime:mH,epochTime:yH,unixTime:gH,isoTime:_H}});var eR=_((Spe,Zw)=>{"use strict";function vH(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Zw.exports=EH;function EH(t,e,r){var n=r&&r.stringify||vH,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=n(t);for(var a=1;a<i;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var c="",l=1-s,f=-1,h=t&&t.length||0,d=0;d<h;){if(t.charCodeAt(d)===37&&d+1<h){switch(f=f>-1?f:0,t.charCodeAt(d+1)){case 100:case 102:if(l>=u||e[l]==null)break;f<d&&(c+=t.slice(f,d)),c+=Number(e[l]),f=d+2,d++;break;case 105:if(l>=u||e[l]==null)break;f<d&&(c+=t.slice(f,d)),c+=Math.floor(Number(e[l])),f=d+2,d++;break;case 79:case 111:case 106:if(l>=u||e[l]===void 0)break;f<d&&(c+=t.slice(f,d));var p=typeof e[l];if(p==="string"){c+="'"+e[l]+"'",f=d+2,d++;break}if(p==="function"){c+=e[l].name||"<anonymous>",f=d+2,d++;break}c+=n(e[l]),f=d+2,d++;break;case 115:if(l>=u)break;f<d&&(c+=t.slice(f,d)),c+=String(e[l]),f=d+2,d++;break;case 37:f<d&&(c+=t.slice(f,d)),c+="%",f=d+2,d++,l--;break}++l}++d}return f===-1?t:(f<h&&(c+=t.slice(f)),c)}});var $m=_(($pe,Sm)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let e=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(t,0,0,Number(r))},t=new Int32Array(new SharedArrayBuffer(4));Sm.exports=e}else{let t=function(e){if((e>0&&e<1/0)===!1)throw typeof e!="number"&&typeof e!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(e);for(;n>Date.now(););};Sm.exports=t}});var uR=_((bpe,aR)=>{"use strict";var Rt=require("fs"),SH=require("events"),$H=require("util").inherits,tR=require("path"),wm=$m(),cf=100,ff=Buffer.allocUnsafe(0),bH=16*1024,rR="buffer",nR="utf8";function sR(t,e){e._opening=!0,e._writing=!0,e._asyncDrainScheduled=!1;function r(i,o){if(i){e._reopening=!1,e._writing=!1,e._opening=!1,e.sync?process.nextTick(()=>{e.listenerCount("error")>0&&e.emit("error",i)}):e.emit("error",i);return}e.fd=o,e.file=t,e._reopening=!1,e._opening=!1,e._writing=!1,e.sync?process.nextTick(()=>e.emit("ready")):e.emit("ready"),!(e._reopening||e.destroyed)&&(!e._writing&&e._len>e.minLength||e._flushPending)&&e._actualWrite()}let n=e.append?"a":"w",s=e.mode;if(e.sync)try{e.mkdir&&Rt.mkdirSync(tR.dirname(t),{recursive:!0});let i=Rt.openSync(t,n,s);r(null,i)}catch(i){throw r(i),i}else e.mkdir?Rt.mkdir(tR.dirname(t),{recursive:!0},i=>{if(i)return r(i);Rt.open(t,n,s,r)}):Rt.open(t,n,s,r)}function gn(t){if(!(this instanceof gn))return new gn(t);let{fd:e,dest:r,minLength:n,maxLength:s,maxWrite:i,sync:o,append:a=!0,mkdir:u,retryEAGAIN:c,fsync:l,contentMode:f,mode:h}=t||{};e=e||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||bH,this.sync=o||!1,this.writable=!0,this._fsync=l||!1,this.append=a||!1,this.mode=h,this.retryEAGAIN=c||(()=>!0),this.mkdir=u||!1;let d,p;if(f===rR)this._writingBuf=ff,this.write=PH,this.flush=OH,this.flushSync=IH,this._actualWrite=AH,d=()=>Rt.writeSync(this.fd,this._writingBuf),p=()=>Rt.write(this.fd,this._writingBuf,this.release);else if(f===void 0||f===nR)this._writingBuf="",this.write=RH,this.flush=TH,this.flushSync=NH,this._actualWrite=CH,d=()=>Rt.writeSync(this.fd,this._writingBuf,"utf8"),p=()=>Rt.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${nR}" and "${rR}", but passed ${f}`);if(typeof e=="number")this.fd=e,process.nextTick(()=>this.emit("ready"));else if(typeof e=="string")sR(e,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(m,g)=>{if(m){if((m.code==="EAGAIN"||m.code==="EBUSY")&&this.retryEAGAIN(m,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{wm(cf),this.release(void 0,0)}catch(v){this.release(v)}else setTimeout(p,cf);else this._writing=!1,this.emit("error",m);return}this.emit("write",g);let E=bm(this._writingBuf,this._len,g);if(this._len=E.len,this._writingBuf=E.writingBuf,this._writingBuf.length){if(!this.sync){p();return}try{do{let v=d(),y=bm(this._writingBuf,this._len,v);this._len=y.len,this._writingBuf=y.writingBuf}while(this._writingBuf.length)}catch(v){this.release(v);return}}this._fsync&&Rt.fsyncSync(this.fd);let $=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):$>this.minLength?this._actualWrite():this._ending?$>0?this._actualWrite():(this._writing=!1,df(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(wH,this)):this.emit("drain"))},this.on("newListener",function(m){m==="drain"&&(this._asyncDrainScheduled=!1)})}function bm(t,e,r){return typeof t=="string"&&Buffer.byteLength(t)!==r&&(r=Buffer.from(t).subarray(0,r).toString().length),e=Math.max(e-r,0),t=t.slice(r),{writingBuf:t,len:e}}function wH(t){t.listenerCount("drain")>0&&(t._asyncDrainScheduled=!1,t.emit("drain"))}$H(gn,SH);function iR(t,e){return t.length===0?ff:t.length===1?t[0]:Buffer.concat(t,e)}function RH(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||r[r.length-1].length+t.length>this.maxWrite?r.push(""+t):r[r.length-1]+=t,this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function PH(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs,n=this._lens;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||n[n.length-1]+t.length>this.maxWrite?(r.push([t]),n.push(t.length)):(r[r.length-1].push(t),n[n.length-1]+=t.length),this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function oR(t){this._flushPending=!0;let e=()=>{this._fsync?(this._flushPending=!1,t()):Rt.fsync(this.fd,n=>{this._flushPending=!1,t(n)}),this.off("error",r)},r=n=>{this._flushPending=!1,t(n),this.off("drain",e)};this.once("drain",e),this.once("error",r)}function TH(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&oR.call(this,t),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function OH(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&oR.call(this,t),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}gn.prototype.reopen=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let e=this.fd;this.once("ready",()=>{e!==this.fd&&Rt.close(e,r=>{if(r)return this.emit("error",r)})}),sR(t||this.file,this)};gn.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():df(this)))};function NH(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let t="";for(;this._bufs.length||t;){t.length<=0&&(t=this._bufs[0]);try{let e=Rt.writeSync(this.fd,t,"utf8"),r=bm(t,this._len,e);t=r.writingBuf,this._len=r.len,t.length<=0&&this._bufs.shift()}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;wm(cf)}}try{Rt.fsyncSync(this.fd)}catch{}}function IH(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=ff);let t=ff;for(;this._bufs.length||t.length;){t.length<=0&&(t=iR(this._bufs[0],this._lens[0]));try{let e=Rt.writeSync(this.fd,t);t=t.subarray(e),this._len=Math.max(this._len-e,0),t.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;wm(cf)}}}gn.prototype.destroy=function(){this.destroyed||df(this)};function CH(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let e=Rt.writeSync(this.fd,this._writingBuf,"utf8");t(null,e)}catch(e){t(e)}else Rt.write(this.fd,this._writingBuf,"utf8",t)}function AH(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:iR(this._bufs.shift(),this._lens.shift()),this.sync)try{let e=Rt.writeSync(this.fd,this._writingBuf);t(null,e)}catch(e){t(e)}else Rt.write(this.fd,this._writingBuf,t)}function df(t){if(t.fd===-1){t.once("ready",df.bind(null,t));return}t.destroyed=!0,t._bufs=[],t._lens=[],Rt.fsync(t.fd,e);function e(){t.fd!==1&&t.fd!==2?Rt.close(t.fd,r):r()}function r(n){if(n){t.emit("error",n);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}}gn.SonicBoom=gn;gn.default=gn;aR.exports=gn});var Rm=_((wpe,hR)=>{"use strict";var _n={exit:[],beforeExit:[]},lR={exit:jH,beforeExit:DH},Lo;function kH(){Lo===void 0&&(Lo=new FinalizationRegistry(LH))}function qH(t){_n[t].length>0||process.on(t,lR[t])}function cR(t){_n[t].length>0||(process.removeListener(t,lR[t]),_n.exit.length===0&&_n.beforeExit.length===0&&(Lo=void 0))}function jH(){fR("exit")}function DH(){fR("beforeExit")}function fR(t){for(let e of _n[t]){let r=e.deref(),n=e.fn;r!==void 0&&n(r,t)}_n[t]=[]}function LH(t){for(let e of["exit","beforeExit"]){let r=_n[e].indexOf(t);_n[e].splice(r,r+1),cR(e)}}function dR(t,e,r){if(e===void 0)throw new Error("the object can't be undefined");qH(t);let n=new WeakRef(e);n.fn=r,kH(),Lo.register(e,n),_n[t].push(n)}function xH(t,e){dR("exit",t,e)}function MH(t,e){dR("beforeExit",t,e)}function FH(t){if(Lo!==void 0){Lo.unregister(t);for(let e of["exit","beforeExit"])_n[e]=_n[e].filter(r=>{let n=r.deref();return n&&n!==t}),cR(e)}}hR.exports={register:xH,registerBeforeExit:MH,unregister:FH}});var pR=_((Rpe,VH)=>{VH.exports={name:"thread-stream",version:"2.4.1",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^8.0.1","pino-elasticsearch":"^6.0.0","sonic-boom":"^3.0.0",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^4.7.2","why-is-node-running":"^2.2.2"},scripts:{test:"standard && npm run transpile && tap test/*.test.*js && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var yR=_((Ppe,mR)=>{"use strict";function zH(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o===r){s(null,"ok");return}let a=o,u=c=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(t,e),o===a?u(c>=1e3?1e3:c*2):o===r?s(null,"ok"):s(null,"not-equal")},c)};u(1)}function HH(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o!==r){s(null,"ok");return}let a=u=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(t,e),o!==r?s(null,"ok"):a(u>=1e3?1e3:u*2)},u)};a(1)}mR.exports={wait:zH,waitDiff:HH}});var _R=_((Tpe,gR)=>{"use strict";gR.exports={WRITE_INDEX:4,READ_INDEX:8}});var bR=_((Ope,$R)=>{"use strict";var{version:UH}=pR(),{EventEmitter:KH}=require("events"),{Worker:BH}=require("worker_threads"),{join:GH}=require("path"),{pathToFileURL:JH}=require("url"),{wait:WH}=yR(),{WRITE_INDEX:wr,READ_INDEX:Ln}=_R(),YH=require("buffer"),XH=require("assert"),L=Symbol("kImpl"),QH=YH.constants.MAX_STRING_LENGTH,uu=class{constructor(e){this._value=e}deref(){return this._value}},pf=class{register(){}unregister(){}},ZH=process.env.NODE_V8_COVERAGE?pf:global.FinalizationRegistry||pf,eU=process.env.NODE_V8_COVERAGE?uu:global.WeakRef||uu,vR=new ZH(t=>{t.exited||t.terminate()});function tU(t,e){let{filename:r,workerData:n}=e,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||GH(__dirname,"lib","worker.js"),o=new BH(i,{...e.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:JH(r).href,dataBuf:t[L].dataBuf,stateBuf:t[L].stateBuf,workerData:{$context:{threadStreamVersion:UH},...n}}});return o.stream=new uu(t),o.on("message",rU),o.on("exit",SR),vR.register(t,o),o}function ER(t){XH(!t[L].sync),t[L].needDrain&&(t[L].needDrain=!1,t.emit("drain"))}function hf(t){let e=Atomics.load(t[L].state,wr),r=t[L].data.length-e;if(r>0){if(t[L].buf.length===0){t[L].flushing=!1,t[L].ending?Im(t):t[L].needDrain&&process.nextTick(ER,t);return}let n=t[L].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(t[L].buf=t[L].buf.slice(r),mf(t,n,hf.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[L].state,Ln,0),Atomics.store(t[L].state,wr,0);s>t[L].data.length;)r=r/2,n=t[L].buf.slice(0,r),s=Buffer.byteLength(n);t[L].buf=t[L].buf.slice(r),mf(t,n,hf.bind(null,t))}})}else if(r===0){if(e===0&&t[L].buf.length===0)return;t.flush(()=>{Atomics.store(t[L].state,Ln,0),Atomics.store(t[L].state,wr,0),hf(t)})}else xn(t,new Error("overwritten"))}function rU(t){let e=this.stream.deref();if(e===void 0){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new eU(e),e.flush(()=>{e[L].ready=!0,e.emit("ready")});break;case"ERROR":xn(e,t.err);break;case"EVENT":Array.isArray(t.args)?e.emit(t.name,...t.args):e.emit(t.name,t.args);break;case"WARNING":process.emitWarning(t.err);break;default:xn(e,new Error("this should not happen: "+t.code))}}function SR(t){let e=this.stream.deref();e!==void 0&&(vR.unregister(e),e.worker.exited=!0,e.worker.off("exit",SR),xn(e,t!==0?new Error("the worker thread exited"):null))}var Tm=class extends KH{constructor(e={}){if(super(),e.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[L]={},this[L].stateBuf=new SharedArrayBuffer(128),this[L].state=new Int32Array(this[L].stateBuf),this[L].dataBuf=new SharedArrayBuffer(e.bufferSize||4*1024*1024),this[L].data=Buffer.from(this[L].dataBuf),this[L].sync=e.sync||!1,this[L].ending=!1,this[L].ended=!1,this[L].needDrain=!1,this[L].destroyed=!1,this[L].flushing=!1,this[L].ready=!1,this[L].finished=!1,this[L].errored=null,this[L].closed=!1,this[L].buf="",this.worker=tU(this,e)}write(e){if(this[L].destroyed)return Om(this,new Error("the worker has exited")),!1;if(this[L].ending)return Om(this,new Error("the worker is ending")),!1;if(this[L].flushing&&this[L].buf.length+e.length>=QH)try{Pm(this),this[L].flushing=!0}catch(r){return xn(this,r),!1}if(this[L].buf+=e,this[L].sync)try{return Pm(this),!0}catch(r){return xn(this,r),!1}return this[L].flushing||(this[L].flushing=!0,setImmediate(hf,this)),this[L].needDrain=this[L].data.length-this[L].buf.length-Atomics.load(this[L].state,wr)<=0,!this[L].needDrain}end(){this[L].destroyed||(this[L].ending=!0,Im(this))}flush(e){if(this[L].destroyed){typeof e=="function"&&process.nextTick(e,new Error("the worker has exited"));return}let r=Atomics.load(this[L].state,wr);WH(this[L].state,Ln,r,1/0,(n,s)=>{if(n){xn(this,n),process.nextTick(e,n);return}if(s==="not-equal"){this.flush(e);return}process.nextTick(e)})}flushSync(){this[L].destroyed||(Pm(this),Nm(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[L].ready}get destroyed(){return this[L].destroyed}get closed(){return this[L].closed}get writable(){return!this[L].destroyed&&!this[L].ending}get writableEnded(){return this[L].ending}get writableFinished(){return this[L].finished}get writableNeedDrain(){return this[L].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[L].errored}};function Om(t,e){setImmediate(()=>{t.emit("error",e)})}function xn(t,e){t[L].destroyed||(t[L].destroyed=!0,e&&(t[L].errored=e,Om(t,e)),t.worker.exited?setImmediate(()=>{t[L].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[L].closed=!0,t.emit("close")}))}function mf(t,e,r){let n=Atomics.load(t[L].state,wr),s=Buffer.byteLength(e);return t[L].data.write(e,n),Atomics.store(t[L].state,wr,n+s),Atomics.notify(t[L].state,wr),r(),!0}function Im(t){if(!(t[L].ended||!t[L].ending||t[L].flushing)){t[L].ended=!0;try{t.flushSync();let e=Atomics.load(t[L].state,Ln);Atomics.store(t[L].state,wr,-1),Atomics.notify(t[L].state,wr);let r=0;for(;e!==-1;){if(Atomics.wait(t[L].state,Ln,e,1e3),e=Atomics.load(t[L].state,Ln),e===-2){xn(t,new Error("end() failed"));return}if(++r===10){xn(t,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{t[L].finished=!0,t.emit("finish")})}catch(e){xn(t,e)}}}function Pm(t){let e=()=>{t[L].ending?Im(t):t[L].needDrain&&process.nextTick(ER,t)};for(t[L].flushing=!1;t[L].buf.length!==0;){let r=Atomics.load(t[L].state,wr),n=t[L].data.length-r;if(n===0){Nm(t),Atomics.store(t[L].state,Ln,0),Atomics.store(t[L].state,wr,0);continue}else if(n<0)throw new Error("overwritten");let s=t[L].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)t[L].buf=t[L].buf.slice(n),mf(t,s,e);else{for(Nm(t),Atomics.store(t[L].state,Ln,0),Atomics.store(t[L].state,wr,0);i>t[L].buf.length;)n=n/2,s=t[L].buf.slice(0,n),i=Buffer.byteLength(s);t[L].buf=t[L].buf.slice(n),mf(t,s,e)}}}function Nm(t){if(t[L].flushing)throw new Error("unable to flush while flushing");let e=Atomics.load(t[L].state,wr),r=0;for(;;){let n=Atomics.load(t[L].state,Ln);if(n===-2)throw Error("_flushSync failed");if(n!==e)Atomics.wait(t[L].state,Ln,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}$R.exports=Tm});var km=_((Npe,wR)=>{"use strict";var{createRequire:nU}=require("module"),sU=hm(),{join:Cm,isAbsolute:iU,sep:oU}=require("path"),aU=$m(),Am=Rm(),uU=bR();function lU(t){Am.register(t,fU),Am.registerBeforeExit(t,dU),t.on("close",function(){Am.unregister(t)})}function cU(t,e,r){let n=new uU({filename:t,workerData:e,workerOpts:r});n.on("ready",s),n.on("close",function(){process.removeListener("exit",i)}),process.on("exit",i);function s(){process.removeListener("exit",i),n.unref(),r.autoEnd!==!1&&lU(n)}function i(){n.closed||(n.flushSync(),aU(100),n.end())}return n}function fU(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}function dU(t){t.flushSync()}function hU(t){let{pipeline:e,targets:r,levels:n,dedupe:s,options:i={},worker:o={},caller:a=sU()}=t,u=typeof a=="string"?[a]:a,c="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},l=t.target;if(l&&r)throw new Error("only one of target or targets can be specified");return r?(l=c["pino-worker"]||Cm(__dirname,"worker.js"),i.targets=r.map(h=>({...h,target:f(h.target)}))):e&&(l=c["pino-pipeline-worker"]||Cm(__dirname,"worker-pipeline.js"),i.targets=e.map(h=>({...h,target:f(h.target)}))),n&&(i.levels=n),s&&(i.dedupe=s),cU(f(l),i,o);function f(h){if(h=c[h]||h,iU(h)||h.indexOf("file://")===0)return h;if(h==="pino/file")return Cm(__dirname,"..","file.js");let d;for(let p of u)try{let m=p==="node:repl"?process.cwd()+oU:p;d=nU(m).resolve(h);break}catch{continue}if(!d)throw new Error(`unable to determine transport target for "${h}"`);return d}}wR.exports=hU});var _f=_((Ipe,jR)=>{"use strict";var RR=eR(),{mapHttpRequest:pU,mapHttpResponse:mU}=dm(),jm=uR(),PR=Rm(),{lsCacheSym:yU,chindingsSym:NR,writeSym:TR,serializersSym:IR,formatOptsSym:OR,endSym:gU,stringifiersSym:CR,stringifySym:AR,stringifySafeSym:Dm,wildcardFirstSym:kR,nestedKeySym:_U,formattersSym:qR,messageKeySym:vU,errorKeySym:EU,nestedKeyStrSym:SU,msgPrefixSym:yf}=Do(),{isMainThread:$U}=require("worker_threads"),bU=km();function xo(){}function wU(t,e){if(!e)return r;return function(...s){e.call(this,s,r,t)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=pU(n):typeof n.setHeader=="function"&&(n=mU(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[yf]=="string"&&i!==void 0&&i!==null&&(i=this[yf]+i),this[TR](n,RR(i,o,this[OR]),t)}else{let i=n===void 0?s.shift():n;typeof this[yf]=="string"&&i!==void 0&&i!==null&&(i=this[yf]+i),this[TR](null,RR(i,s,this[OR]),t)}}}function qm(t){let e="",r=0,n=!1,s=255,i=t.length;if(i>100)return JSON.stringify(t);for(var o=0;o<i&&s>=32;o++)s=t.charCodeAt(o),(s===34||s===92)&&(e+=t.slice(r,o)+"\\",r=o,n=!0);return n?e+=t.slice(r):e=t,s<32?JSON.stringify(t):'"'+e+'"'}function RU(t,e,r,n){let s=this[AR],i=this[Dm],o=this[CR],a=this[gU],u=this[NR],c=this[IR],l=this[qR],f=this[vU],h=this[EU],d=this[yU][r]+n;d=d+u;let p;l.log&&(t=l.log(t));let m=o[kR],g="";for(let $ in t)if(p=t[$],Object.prototype.hasOwnProperty.call(t,$)&&p!==void 0){c[$]?p=c[$](p):$===h&&c.err&&(p=c.err(p));let v=o[$]||m;switch(typeof p){case"undefined":case"function":continue;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":v&&(p=v(p));break;case"string":p=(v||qm)(p);break;default:p=(v||s)(p,i)}if(p===void 0)continue;let y=qm($);g+=","+y+":"+p}let E="";if(e!==void 0){p=c[f]?c[f](e):e;let $=o[f]||m;switch(typeof p){case"function":break;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":$&&(p=$(p)),E=',"'+f+'":'+p;break;case"string":p=($||qm)(p),E=',"'+f+'":'+p;break;default:p=($||s)(p,i),E=',"'+f+'":'+p}}return this[_U]&&g?d+this[SU]+g.slice(1)+"}"+E+a:d+g+E+a}function PU(t,e){let r,n=t[NR],s=t[AR],i=t[Dm],o=t[CR],a=o[kR],u=t[IR],c=t[qR].bindings;e=c(e);for(let l in e)if(r=e[l],(l!=="level"&&l!=="serializers"&&l!=="formatters"&&l!=="customLevels"&&e.hasOwnProperty(l)&&r!==void 0)===!0){if(r=u[l]?u[l](r):r,r=(o[l]||a||s)(r,i),r===void 0)continue;n+=',"'+l+'":'+r}return n}function TU(t){return t.write!==t.constructor.prototype.write}var OU=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function gf(t){let e=new jm(t);return e.on("error",r),!OU&&!t.sync&&$U&&(PR.register(e,NU),e.on("close",function(){PR.unregister(e)})),e;function r(n){if(n.code==="EPIPE"){e.write=xo,e.end=xo,e.flushSync=xo,e.destroy=xo;return}e.removeListener("error",r),e.emit("error",n)}}function NU(t,e){t.destroyed||(e==="beforeExit"?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function IU(t){return function(r,n,s={},i){if(typeof s=="string")i=gf({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=gf({dest:i})}else if(s instanceof jm||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof jm||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let u;s.customLevels&&(u=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=bU({caller:n,...s.transport,levels:u})}if(s=Object.assign({},t,s),s.serializers=Object.assign({},t.serializers,s.serializers),s.formatters=Object.assign({},t.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=xo),i||(TU(process.stdout)?i=process.stdout:i=gf({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function CU(t,e){try{return JSON.stringify(t)}catch{try{return(e||this[Dm])(t)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function AU(t,e,r){return{level:t,bindings:e,log:r}}function kU(t){let e=Number(t);return typeof t=="string"&&Number.isFinite(e)?e:t===void 0?1:t}jR.exports={noop:xo,buildSafeSonicBoom:gf,asChindings:PU,asJson:RU,genLog:wU,createArgsNormalizer:IU,stringify:CU,buildFormatters:AU,normalizeDestFileDescriptor:kU}});var vf=_((Cpe,DR)=>{var qU={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},jU={ASC:"ASC",DESC:"DESC"};DR.exports={DEFAULT_LEVELS:qU,SORTING_ORDER:jU}});var Mm=_((Ape,FR)=>{"use strict";var{lsCacheSym:DU,levelValSym:Lm,useOnlyCustomLevelsSym:LU,streamSym:xU,formattersSym:MU,hooksSym:FU,levelCompSym:LR}=Do(),{noop:VU,genLog:Ti}=_f(),{DEFAULT_LEVELS:Mn,SORTING_ORDER:xR}=vf(),MR={fatal:t=>{let e=Ti(Mn.fatal,t);return function(...r){let n=this[xU];if(e.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:t=>Ti(Mn.error,t),warn:t=>Ti(Mn.warn,t),info:t=>Ti(Mn.info,t),debug:t=>Ti(Mn.debug,t),trace:t=>Ti(Mn.trace,t)},xm=Object.keys(Mn).reduce((t,e)=>(t[Mn[e]]=e,t),{}),zU=Object.keys(xm).reduce((t,e)=>(t[e]='{"level":'+Number(e),t),{});function HU(t){let e=t[MU].level,{labels:r}=t.levels,n={};for(let s in r){let i=e(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return t[DU]=n,t}function UU(t,e){if(e)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function KU(t){let{labels:e,values:r}=this.levels;if(typeof t=="number"){if(e[t]===void 0)throw Error("unknown level value"+t);t=e[t]}if(r[t]===void 0)throw Error("unknown level "+t);let n=this[Lm],s=this[Lm]=r[t],i=this[LU],o=this[LR],a=this[FU].logMethod;for(let u in r){if(o(r[u],s)===!1){this[u]=VU;continue}this[u]=UU(u,i)?MR[u](a):Ti(r[u],a)}this.emit("level-change",t,s,e[n],n,this)}function BU(t){let{levels:e,levelVal:r}=this;return e&&e.labels?e.labels[r]:""}function GU(t){let{values:e}=this.levels,r=e[t];return r!==void 0&&this[LR](r,this[Lm])}function JU(t,e,r){return t===xR.DESC?e<=r:e>=r}function WU(t){return typeof t=="string"?JU.bind(null,t):t}function YU(t=null,e=!1){let r=t?Object.keys(t).reduce((i,o)=>(i[t[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),e?null:xm,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),e?null:Mn,t);return{labels:n,values:s}}function XU(t,e,r){if(typeof t=="number"){if(![].concat(Object.keys(e||{}).map(i=>e[i]),r?[]:Object.keys(xm).map(i=>+i),1/0).includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:Mn,e);if(!(t in n))throw Error(`default level:${t} must be included in custom levels`)}function QU(t,e){let{labels:r,values:n}=t;for(let s in e){if(s in n)throw Error("levels cannot be overridden");if(e[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}function ZU(t){if(typeof t!="function"&&!(typeof t=="string"&&Object.values(xR).includes(t)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}FR.exports={initialLsCache:zU,genLsCache:HU,levelMethods:MR,getLevel:BU,setLevel:KU,isLevelEnabled:GU,mappings:YU,assertNoLevelCollisions:QU,assertDefaultLevelFound:XU,genLevelComparison:WU,assertLevelComparison:ZU}});var Fm=_((kpe,VR)=>{"use strict";VR.exports={version:"8.19.0"}});var QR=_((jpe,XR)=>{"use strict";var{EventEmitter:e4}=require("events"),{lsCacheSym:t4,levelValSym:r4,setLevelSym:zm,getLevelSym:zR,chindingsSym:Hm,parsedChindingsSym:n4,mixinSym:s4,asJsonSym:GR,writeSym:i4,mixinMergeStrategySym:o4,timeSym:a4,timeSliceIndexSym:u4,streamSym:JR,serializersSym:Oi,formattersSym:Vm,errorKeySym:l4,messageKeySym:c4,useOnlyCustomLevelsSym:f4,needsMetadataGsym:d4,redactFmtSym:h4,stringifySym:p4,formatOptsSym:m4,stringifiersSym:y4,msgPrefixSym:HR}=Do(),{getLevel:g4,setLevel:_4,isLevelEnabled:v4,mappings:E4,initialLsCache:S4,genLsCache:$4,assertNoLevelCollisions:b4}=Mm(),{asChindings:WR,asJson:w4,buildFormatters:UR,stringify:KR}=_f(),{version:R4}=Fm(),P4=Em(),T4=class{},YR={constructor:T4,child:O4,bindings:N4,setBindings:I4,flush:q4,isLevelEnabled:v4,version:R4,get level(){return this[zR]()},set level(t){this[zm](t)},get levelVal(){return this[r4]},set levelVal(t){throw Error("levelVal is read-only")},[t4]:S4,[i4]:A4,[GR]:w4,[zR]:g4,[zm]:_4};Object.setPrototypeOf(YR,e4.prototype);XR.exports=function(){return Object.create(YR)};var BR=t=>t;function O4(t,e){if(!t)throw Error("missing bindings for child Pino");e=e||{};let r=this[Oi],n=this[Vm],s=Object.create(this);if(e.hasOwnProperty("serializers")===!0){s[Oi]=Object.create(null);for(let l in r)s[Oi][l]=r[l];let u=Object.getOwnPropertySymbols(r);for(var i=0;i<u.length;i++){let l=u[i];s[Oi][l]=r[l]}for(let l in e.serializers)s[Oi][l]=e.serializers[l];let c=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<c.length;o++){let l=c[o];s[Oi][l]=e.serializers[l]}}else s[Oi]=r;if(e.hasOwnProperty("formatters")){let{level:u,bindings:c,log:l}=e.formatters;s[Vm]=UR(u||n.level,c||BR,l||n.log)}else s[Vm]=UR(n.level,BR,n.log);if(e.hasOwnProperty("customLevels")===!0&&(b4(this.levels,e.customLevels),s.levels=E4(e.customLevels,s[f4]),$4(s)),typeof e.redact=="object"&&e.redact!==null||Array.isArray(e.redact)){s.redact=e.redact;let u=P4(s.redact,KR),c={stringify:u[h4]};s[p4]=KR,s[y4]=u,s[m4]=c}typeof e.msgPrefix=="string"&&(s[HR]=(this[HR]||"")+e.msgPrefix),s[Hm]=WR(s,t);let a=e.level||this.level;return s[zm](a),this.onChild(s),s}function N4(){let e=`{${this[Hm].substr(1)}}`,r=JSON.parse(e);return delete r.pid,delete r.hostname,r}function I4(t){let e=WR(this,t);this[Hm]=e,delete this[n4]}function C4(t,e){return Object.assign(e,t)}function A4(t,e,r){let n=this[a4](),s=this[s4],i=this[l4],o=this[c4],a=this[o4]||C4,u;t==null?u={}:t instanceof Error?(u={[i]:t},e===void 0&&(e=t.message)):(u=t,e===void 0&&t[o]===void 0&&t[i]&&(e=t[i].message)),s&&(u=a(u,s(u,r,this)));let c=this[GR](u,e,r,n),l=this[JR];l[d4]===!0&&(l.lastLevel=r,l.lastObj=u,l.lastMsg=e,l.lastTime=n.slice(this[u4]),l.lastLogger=this),l.write(c)}function k4(){}function q4(t){if(t!=null&&typeof t!="function")throw Error("callback must be a function");let e=this[JR];typeof e.flush=="function"?e.flush(t||k4):t&&t()}});var nP=_((Gm,rP)=>{"use strict";var{hasOwnProperty:Ef}=Object.prototype,Ii=Bm();Ii.configure=Bm;Ii.stringify=Ii;Ii.default=Ii;Gm.stringify=Ii;Gm.configure=Bm;rP.exports=Ii;var j4=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function zs(t){return t.length<5e3&&!j4.test(t)?`"${t}"`:JSON.stringify(t)}function Um(t){if(t.length>200)return t.sort();for(let e=1;e<t.length;e++){let r=t[e],n=e;for(;n!==0&&t[n-1]>r;)t[n]=t[n-1],n--;t[n]=r}return t}var D4=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Km(t){return D4.call(t)!==void 0&&t.length!==0}function ZR(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",s=`"0":${n}${t[0]}`;for(let i=1;i<r;i++)s+=`${e}"${i}":${n}${t[i]}`;return s}function L4(t){if(Ef.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function eP(t,e){let r;if(Ef.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function tP(t,e){let r;if(Ef.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Ni(t){return t===1?"1 item":`${t} items`}function x4(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function M4(t){if(Ef.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Bm(t){t={...t};let e=M4(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=L4(t),n=eP(t,"bigint"),s=eP(t,"deterministic"),i=tP(t,"maximumDepth"),o=tP(t,"maximumBreadth");function a(h,d,p,m,g,E){let $=d[h];switch(typeof $=="object"&&$!==null&&typeof $.toJSON=="function"&&($=$.toJSON(h)),$=m.call(d,h,$),typeof $){case"string":return zs($);case"object":{if($===null)return"null";if(p.indexOf($)!==-1)return r;let v="",y=",",S=E;if(Array.isArray($)){if($.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push($),g!==""&&(E+=g,v+=`
${E}`,y=`,
${E}`);let j=Math.min($.length,o),q=0;for(;q<j-1;q++){let ee=a(String(q),$,p,m,g,E);v+=ee!==void 0?ee:"null",v+=y}let D=a(String(q),$,p,m,g,E);if(v+=D!==void 0?D:"null",$.length-1>o){let ee=$.length-o-1;v+=`${y}"... ${Ni(ee)} not stringified"`}return g!==""&&(v+=`
${S}`),p.pop(),`[${v}]`}let N=Object.keys($),w=N.length;if(w===0)return"{}";if(i<p.length+1)return'"[Object]"';let T="",A="";g!==""&&(E+=g,y=`,
${E}`,T=" ");let R=Math.min(w,o);s&&!Km($)&&(N=Um(N)),p.push($);for(let j=0;j<R;j++){let q=N[j],D=a(q,$,p,m,g,E);D!==void 0&&(v+=`${A}${zs(q)}:${T}${D}`,A=y)}if(w>o){let j=w-o;v+=`${A}"...":${T}"${Ni(j)} not stringified"`,A=y}return g!==""&&A.length>1&&(v=`
${E}${v}
${S}`),p.pop(),`{${v}}`}case"number":return isFinite($)?String($):e?e($):"null";case"boolean":return $===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String($);default:return e?e($):void 0}}function u(h,d,p,m,g,E){switch(typeof d=="object"&&d!==null&&typeof d.toJSON=="function"&&(d=d.toJSON(h)),typeof d){case"string":return zs(d);case"object":{if(d===null)return"null";if(p.indexOf(d)!==-1)return r;let $=E,v="",y=",";if(Array.isArray(d)){if(d.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(d),g!==""&&(E+=g,v+=`
${E}`,y=`,
${E}`);let w=Math.min(d.length,o),T=0;for(;T<w-1;T++){let R=u(String(T),d[T],p,m,g,E);v+=R!==void 0?R:"null",v+=y}let A=u(String(T),d[T],p,m,g,E);if(v+=A!==void 0?A:"null",d.length-1>o){let R=d.length-o-1;v+=`${y}"... ${Ni(R)} not stringified"`}return g!==""&&(v+=`
${$}`),p.pop(),`[${v}]`}p.push(d);let S="";g!==""&&(E+=g,y=`,
${E}`,S=" ");let N="";for(let w of m){let T=u(w,d[w],p,m,g,E);T!==void 0&&(v+=`${N}${zs(w)}:${S}${T}`,N=y)}return g!==""&&N.length>1&&(v=`
${E}${v}
${$}`),p.pop(),`{${v}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return e?e(d):void 0}}function c(h,d,p,m,g){switch(typeof d){case"string":return zs(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return c(h,d,p,m,g);if(d===null)return"null"}if(p.indexOf(d)!==-1)return r;let E=g;if(Array.isArray(d)){if(d.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(d),g+=m;let T=`
${g}`,A=`,
${g}`,R=Math.min(d.length,o),j=0;for(;j<R-1;j++){let D=c(String(j),d[j],p,m,g);T+=D!==void 0?D:"null",T+=A}let q=c(String(j),d[j],p,m,g);if(T+=q!==void 0?q:"null",d.length-1>o){let D=d.length-o-1;T+=`${A}"... ${Ni(D)} not stringified"`}return T+=`
${E}`,p.pop(),`[${T}]`}let $=Object.keys(d),v=$.length;if(v===0)return"{}";if(i<p.length+1)return'"[Object]"';g+=m;let y=`,
${g}`,S="",N="",w=Math.min(v,o);Km(d)&&(S+=ZR(d,y,o),$=$.slice(d.length),w-=d.length,N=y),s&&($=Um($)),p.push(d);for(let T=0;T<w;T++){let A=$[T],R=c(A,d[A],p,m,g);R!==void 0&&(S+=`${N}${zs(A)}: ${R}`,N=y)}if(v>o){let T=v-o;S+=`${N}"...": "${Ni(T)} not stringified"`,N=y}return N!==""&&(S=`
${g}${S}
${E}`),p.pop(),`{${S}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return e?e(d):void 0}}function l(h,d,p){switch(typeof d){case"string":return zs(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return l(h,d,p);if(d===null)return"null"}if(p.indexOf(d)!==-1)return r;let m="";if(Array.isArray(d)){if(d.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(d);let y=Math.min(d.length,o),S=0;for(;S<y-1;S++){let w=l(String(S),d[S],p);m+=w!==void 0?w:"null",m+=","}let N=l(String(S),d[S],p);if(m+=N!==void 0?N:"null",d.length-1>o){let w=d.length-o-1;m+=`,"... ${Ni(w)} not stringified"`}return p.pop(),`[${m}]`}let g=Object.keys(d),E=g.length;if(E===0)return"{}";if(i<p.length+1)return'"[Object]"';let $="",v=Math.min(E,o);Km(d)&&(m+=ZR(d,",",o),g=g.slice(d.length),v-=d.length,$=","),s&&(g=Um(g)),p.push(d);for(let y=0;y<v;y++){let S=g[y],N=l(S,d[S],p);N!==void 0&&(m+=`${$}${zs(S)}:${N}`,$=",")}if(E>o){let y=E-o;m+=`${$}"...":"${Ni(y)} not stringified"`}return p.pop(),`{${m}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return e?e(d):void 0}}function f(h,d,p){if(arguments.length>1){let m="";if(typeof p=="number"?m=" ".repeat(Math.min(p,10)):typeof p=="string"&&(m=p.slice(0,10)),d!=null){if(typeof d=="function")return a("",{"":h},[],d,m,"");if(Array.isArray(d))return u("",h,[],x4(d),m,"")}if(m.length!==0)return c("",h,[],m,"")}return l("",h,[])}return f}});var oP=_((Dpe,iP)=>{"use strict";var Jm=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:sP}=vf(),F4=sP.info;function V4(t,e){let r=0;t=t||[],e=e||{dedupe:!1};let n=Object.create(sP);n.silent=1/0,e.levels&&typeof e.levels=="object"&&Object.keys(e.levels).forEach(l=>{n[l]=e.levels[l]});let s={write:i,add:a,flushSync:o,end:u,minLevel:0,streams:[],clone:c,[Jm]:!0,streamLevels:n};return Array.isArray(t)?t.forEach(a,s):a.call(s,t),t=null,s;function i(l){let f,h=this.lastLevel,{streams:d}=this,p=0,m;for(let g=H4(d.length,e.dedupe);K4(g,d.length,e.dedupe);g=U4(g,e.dedupe))if(f=d[g],f.level<=h){if(p!==0&&p!==f.level)break;if(m=f.stream,m[Jm]){let{lastTime:E,lastMsg:$,lastObj:v,lastLogger:y}=this;m.lastLevel=h,m.lastTime=E,m.lastMsg=$,m.lastObj=v,m.lastLogger=y}m.write(l),e.dedupe&&(p=f.level)}else if(!e.dedupe)break}function o(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync()}function a(l){if(!l)return s;let f=typeof l.write=="function"||l.stream,h=l.write?l:l.stream;if(!f)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:d,streamLevels:p}=this,m;typeof l.levelVal=="number"?m=l.levelVal:typeof l.level=="string"?m=p[l.level]:typeof l.level=="number"?m=l.level:m=F4;let g={stream:h,level:m,levelVal:void 0,id:r++};return d.unshift(g),d.sort(z4),this.minLevel=d[0].level,s}function u(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync(),l.end()}function c(l){let f=new Array(this.streams.length);for(let h=0;h<f.length;h++)f[h]={level:l,stream:this.streams[h].stream};return{write:i,add:a,minLevel:l,streams:f,clone:c,flushSync:o,[Jm]:!0}}}function z4(t,e){return t.level-e.level}function H4(t,e){return e?t-1:0}function U4(t,e){return e?t-1:t+1}function K4(t,e,r){return r?t>=0:t<e}iP.exports=V4});var vP=_((Lpe,Gr)=>{"use strict";var B4=require("os"),pP=dm(),G4=hm(),J4=Em(),mP=Qw(),W4=QR(),yP=Do(),{configure:Y4}=nP(),{assertDefaultLevelFound:X4,mappings:gP,genLsCache:Q4,genLevelComparison:Z4,assertLevelComparison:e5}=Mm(),{DEFAULT_LEVELS:t5,SORTING_ORDER:r5}=vf(),{createArgsNormalizer:n5,asChindings:s5,buildSafeSonicBoom:aP,buildFormatters:i5,stringify:Wm,normalizeDestFileDescriptor:uP,noop:o5}=_f(),{version:a5}=Fm(),{chindingsSym:lP,redactFmtSym:u5,serializersSym:cP,timeSym:l5,timeSliceIndexSym:c5,streamSym:f5,stringifySym:fP,stringifySafeSym:Ym,stringifiersSym:dP,setLevelSym:d5,endSym:h5,formatOptsSym:p5,messageKeySym:m5,errorKeySym:y5,nestedKeySym:g5,mixinSym:_5,levelCompSym:v5,useOnlyCustomLevelsSym:E5,formattersSym:hP,hooksSym:S5,nestedKeyStrSym:$5,mixinMergeStrategySym:b5,msgPrefixSym:w5}=yP,{epochTime:_P,nullTime:R5}=mP,{pid:P5}=process,T5=B4.hostname(),O5=pP.err,N5={level:"info",levelComparison:r5.ASC,levels:t5,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:P5,hostname:T5},serializers:Object.assign(Object.create(null),{err:O5}),formatters:Object.assign(Object.create(null),{bindings(t){return t},level(t,e){return{level:e}}}),hooks:{logMethod:void 0},timestamp:_P,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},I5=n5(N5),C5=Object.assign(Object.create(null),pP);function Xm(...t){let e={},{opts:r,stream:n}=I5(e,G4(),...t),{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:u,errorKey:c,nestedKey:l,base:f,name:h,level:d,customLevels:p,levelComparison:m,mixin:g,mixinMergeStrategy:E,useOnlyCustomLevels:$,formatters:v,hooks:y,depthLimit:S,edgeLimit:N,onChild:w,msgPrefix:T}=r,A=Y4({maximumDepth:S,maximumBreadth:N}),R=i5(v.level,v.bindings,v.log),j=Wm.bind({[Ym]:A}),q=s?J4(s,j):{},D=s?{stringify:q[u5]}:{stringify:j},ee="}"+(i?`\r
`:`
`),ve=s5.bind(null,{[lP]:"",[cP]:o,[dP]:q,[fP]:Wm,[Ym]:A,[hP]:R}),z="";f!==null&&(h===void 0?z=ve(f):z=ve(Object.assign({},f,{name:h})));let G=a instanceof Function?a:a?_P:R5,Je=G().indexOf(":")+1;if($&&!p)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(g&&typeof g!="function")throw Error(`Unknown mixin type "${typeof g}" - expected "function"`);if(T&&typeof T!="string")throw Error(`Unknown msgPrefix type "${typeof T}" - expected "string"`);X4(d,p,$);let H=gP(p,$);e5(m);let ht=Z4(m);return Object.assign(e,{levels:H,[v5]:ht,[E5]:$,[f5]:n,[l5]:G,[c5]:Je,[fP]:Wm,[Ym]:A,[dP]:q,[h5]:ee,[p5]:D,[m5]:u,[y5]:c,[g5]:l,[$5]:l?`,${JSON.stringify(l)}:{`:"",[cP]:o,[_5]:g,[b5]:E,[lP]:z,[hP]:R,[S5]:y,silent:o5,onChild:w,[w5]:T}),Object.setPrototypeOf(e,W4()),Q4(e),e[d5](d),e}Gr.exports=Xm;Gr.exports.destination=(t=process.stdout.fd)=>typeof t=="object"?(t.dest=uP(t.dest||process.stdout.fd),aP(t)):aP({dest:uP(t),minLength:0});Gr.exports.transport=km();Gr.exports.multistream=oP();Gr.exports.levels=gP();Gr.exports.stdSerializers=C5;Gr.exports.stdTimeFunctions=Object.assign({},mP);Gr.exports.symbols=yP;Gr.exports.version=a5;Gr.exports.default=Xm;Gr.exports.pino=Xm});var lu=_((xpe,wP)=>{"use strict";var A5=uw(),Sf=vP(),{serializersSym:EP}=Sf.symbols,{FST_ERR_LOG_INVALID_DESTINATION:k5,FST_ERR_LOG_INVALID_LOGGER:q5}=rr();function SP(t){if(t.stream&&t.file)throw new k5;t.file&&(t.stream=Sf.destination(t.file),delete t.file);let e=t.logger,r=t.genReqId,n=null;return e?(t.logger=void 0,t.genReqId=void 0,e[EP]&&(t.serializers=Object.assign({},t.serializers,e[EP])),n=e.child({},t),t.logger=e,t.genReqId=r):n=Sf(t,t.stream),n}var Qm={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],hostname:e.hostname,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:Sf.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};function j5(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}function D5(t){if(!t.logger){let n=A5;return n.child=()=>n,{logger:n,hasLogger:!1}}if($P(t.logger))return{logger:SP({logger:t.logger,serializers:Object.assign({},Qm,t.logger.serializers)}),hasLogger:!0};let e={};return Object.prototype.toString.call(t.logger)==="[object Object]"&&Reflect.ownKeys(t.logger).forEach(n=>{Object.defineProperty(e,n,{value:t.logger[n],writable:!0,enumerable:!0,configurable:!0})}),e.level=e.level||"info",e.serializers=Object.assign({},Qm,e.serializers),t.logger=e,{logger:SP(t.logger),hasLogger:!0}}function $P(t,e){let r=["info","error","debug","fatal","warn","trace","child"],n=t?r.filter(s=>!t[s]||typeof t[s]!="function"):r;if(n.length){if(n.length===r.length&&!e)return!1;throw q5(n.join(","))}else return!0}function L5(t,e,r,n,s){let i={[t.requestIdLogLabel]:n},o=t.childLoggerFactory.call(t.server,e,i,s||{},r);return t.childLoggerFactory!==bP&&$P(o,!0),o}function bP(t,e,r){return t.child(e,r)}wP.exports={createLogger:D5,createChildLogger:L5,defaultChildLoggerFactory:bP,serializers:Qm,now:j5}});var $f=_((Mpe,RP)=>{"use strict";RP.exports=x5;function Mo(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function x5(t){if(t=t||{},t.circles)return M5(t);return t.proto?n:r;function e(s,i){for(var o=Object.keys(s),a=new Array(o.length),u=0;u<o.length;u++){var c=o[u],l=s[c];typeof l!="object"||l===null?a[c]=l:l instanceof Date?a[c]=new Date(l):ArrayBuffer.isView(l)?a[c]=Mo(l):a[c]=i(l)}return a}function r(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return e(s,r);if(s instanceof Map)return new Map(e(Array.from(s),r));if(s instanceof Set)return new Set(e(Array.from(s),r));var i={};for(var o in s)if(Object.hasOwnProperty.call(s,o)!==!1){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(e(Array.from(a),r)):a instanceof Set?i[o]=new Set(e(Array.from(a),r)):ArrayBuffer.isView(a)?i[o]=Mo(a):i[o]=r(a)}return i}function n(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return e(s,n);if(s instanceof Map)return new Map(e(Array.from(s),n));if(s instanceof Set)return new Set(e(Array.from(s),n));var i={};for(var o in s){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(e(Array.from(a),n)):a instanceof Set?i[o]=new Set(e(Array.from(a),n)):ArrayBuffer.isView(a)?i[o]=Mo(a):i[o]=n(a)}return i}}function M5(t){var e=[],r=[];return t.proto?i:s;function n(o,a){for(var u=Object.keys(o),c=new Array(u.length),l=0;l<u.length;l++){var f=u[l],h=o[f];if(typeof h!="object"||h===null)c[f]=h;else if(h instanceof Date)c[f]=new Date(h);else if(ArrayBuffer.isView(h))c[f]=Mo(h);else{var d=e.indexOf(h);d!==-1?c[f]=r[d]:c[f]=a(h)}}return c}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,s);if(o instanceof Map)return new Map(n(Array.from(o),s));if(o instanceof Set)return new Set(n(Array.from(o),s));var a={};e.push(o),r.push(a);for(var u in o)if(Object.hasOwnProperty.call(o,u)!==!1){var c=o[u];if(typeof c!="object"||c===null)a[u]=c;else if(c instanceof Date)a[u]=new Date(c);else if(c instanceof Map)a[u]=new Map(n(Array.from(c),s));else if(c instanceof Set)a[u]=new Set(n(Array.from(c),s));else if(ArrayBuffer.isView(c))a[u]=Mo(c);else{var l=e.indexOf(c);l!==-1?a[u]=r[l]:a[u]=s(c)}}return e.pop(),r.pop(),a}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,i);if(o instanceof Map)return new Map(n(Array.from(o),i));if(o instanceof Set)return new Set(n(Array.from(o),i));var a={};e.push(o),r.push(a);for(var u in o){var c=o[u];if(typeof c!="object"||c===null)a[u]=c;else if(c instanceof Date)a[u]=new Date(c);else if(c instanceof Map)a[u]=new Map(n(Array.from(c),i));else if(c instanceof Set)a[u]=new Set(n(Array.from(c),i));else if(ArrayBuffer.isView(c))a[u]=Mo(c);else{var l=e.indexOf(c);l!==-1?a[u]=r[l]:a[u]=i(c)}}return e.pop(),r.pop(),a}}});var cu=_((Fpe,NP)=>{"use strict";var F5=$f()({circles:!1,proto:!0}),{kSchemaVisited:PP,kSchemaResponse:V5}=Mt(),ey=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:z5,FST_ERR_SCH_ALREADY_PRESENT:H5,FST_ERR_SCH_DUPLICATE:U5,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:K5}=rr(),OP=["params","body","querystring","query","headers"];function bf(t){this.store=t||{}}bf.prototype.add=function(t){let e=F5(t.isFluentSchema||t.isFluentJSONSchema||t[ey]?t.valueOf():t),r=e.$id;if(!r)throw new z5;if(this.store[r])throw new H5(r);this.store[r]=e};bf.prototype.getSchemas=function(){return Object.assign({},this.store)};bf.prototype.getSchema=function(t){return this.store[t]};function TP(t){return typeof t=="object"&&Object.getPrototypeOf(t)!==Object.prototype}function B5(t,e){if(t[PP])return t;if(t.query){if(t.querystring)throw new U5("querystring");t.querystring=t.query}G5(t);for(let r of OP){let n=t[r];n&&!TP(n)&&(t[r]=Zm(n,e.jsonShorthand))}if(t.response){let r=Object.keys(t.response);for(let n of r){if(TP(t.response[n]))continue;let s=t.response[n].content,i=!1;if(s){let o=Object.keys(s);for(let a=0;a<o.length;a++){let u=o[a];if(!s[u].schema){if(o.length===1)break;throw new K5(u)}t.response[n].content[u].schema=Zm(s[u].schema,e.jsonShorthand),a===o.length-1&&(i=!0)}}i||(t.response[n]=Zm(t.response[n],e.jsonShorthand))}}return t[PP]=!0,t}function G5(t){for(let e of OP)t[e]&&(t[e].isFluentSchema||t[e][ey])&&(t[e]=t[e].valueOf());if(t.response){let e=Object.keys(t.response);for(let r of e)(t.response[r].isFluentSchema||t.response[r][ey])&&(t.response[r]=t.response[r].valueOf())}}function Zm(t,e){return!e||t.$ref||t.oneOf||t.allOf||t.anyOf||t.$merge||t.$patch?t:!t.type&&!t.properties?{type:"object",properties:t}:t}function J5(t,e,r){let n=t[V5];if(!n)return!1;if(n[e]){if(n[e].constructor===Object&&r){let i=r.split(";",1)[0];return n[e][i]?n[e][i]:!1}return n[e]}let s=(e+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";",1)[0];return n[s][i]?n[s][i]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";",1)[0];return n.default[i]?n.default[i]:!1}return n.default}return!1}NP.exports={buildSchemas(t){return new bf(t)},getSchemaSerializer:J5,normalizeSchema:B5}});var ty=_((Vpe,CP)=>{"use strict";var W5=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;CP.exports=class IP{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=e}asInteger(e){if(typeof e=="number"){if(e===1/0||e===-1/0)throw new Error(`The value "${e}" cannot be converted to an integer.`);if(Number.isInteger(e))return""+e;if(Number.isNaN(e))throw new Error(`The value "${e}" cannot be converted to an integer.`);return this.parseInteger(e)}else{if(e===null)return"0";if(typeof e=="bigint")return e.toString();{let r=this.parseInteger(e);if(Number.isFinite(r))return""+r;throw new Error(`The value "${e}" cannot be converted to an integer.`)}}}asNumber(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`The value "${e}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:"null"}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){return e.length<42?this.asStringSmall(e):e.length<5e3&&W5.test(e)===!1?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}asStringSmall(e){let r=e.length,n="",s=-1,i=255;for(var o=0;o<r;o++){if(i=e.charCodeAt(o),i<32||i>=55296&&i<=57343)return JSON.stringify(e);(i===34||i===92)&&(s===-1&&(s=0),n+=e.slice(s,o)+"\\",s=o)}return s===-1&&'"'+e+'"'||'"'+n+e.slice(s)+'"'}getState(){return this._options}static restoreFromState(e){return new IP(e)}}});var hu=_(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.regexpCode=je.getEsmExportName=je.getProperty=je.safeStringify=je.stringify=je.strConcat=je.addCodeArg=je.str=je._=je.nil=je._Code=je.Name=je.IDENTIFIER=je._CodeOrName=void 0;var fu=class{};je._CodeOrName=fu;je.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Ci=class extends fu{constructor(e){if(super(),!je.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};je.Name=Ci;var Jr=class extends fu{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Ci&&(r[n.str]=(r[n.str]||0)+1),r),{})}};je._Code=Jr;je.nil=new Jr("");function AP(t,...e){let r=[t[0]],n=0;for(;n<e.length;)ny(r,e[n]),r.push(t[++n]);return new Jr(r)}je._=AP;var ry=new Jr("+");function kP(t,...e){let r=[du(t[0])],n=0;for(;n<e.length;)r.push(ry),ny(r,e[n]),r.push(ry,du(t[++n]));return Y5(r),new Jr(r)}je.str=kP;function ny(t,e){e instanceof Jr?t.push(...e._items):e instanceof Ci?t.push(e):t.push(Z5(e))}je.addCodeArg=ny;function Y5(t){let e=1;for(;e<t.length-1;){if(t[e]===ry){let r=X5(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function X5(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Ci||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Ci))return`"${t}${e.slice(1)}`}function Q5(t,e){return e.emptyStr()?t:t.emptyStr()?e:kP`${t}${e}`}je.strConcat=Q5;function Z5(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:du(Array.isArray(t)?t.join(","):t)}function eK(t){return new Jr(du(t))}je.stringify=eK;function du(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}je.safeStringify=du;function tK(t){return typeof t=="string"&&je.IDENTIFIER.test(t)?new Jr(`.${t}`):AP`[${t}]`}je.getProperty=tK;function rK(t){if(typeof t=="string"&&je.IDENTIFIER.test(t))return new Jr(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}je.getEsmExportName=rK;function nK(t){return new Jr(t.toString())}je.regexpCode=nK});var ay=_(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.ValueScope=fr.ValueScopeName=fr.Scope=fr.varKinds=fr.UsedValueState=void 0;var Rr=hu(),sy=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},iy;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(iy=fr.UsedValueState||(fr.UsedValueState={}));fr.varKinds={const:new Rr.Name("const"),let:new Rr.Name("let"),var:new Rr.Name("var")};var wf=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Rr.Name?e:this.name(e)}name(e){return new Rr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};fr.Scope=wf;var Rf=class extends Rr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Rr._)`.${new Rr.Name(r)}[${n}]`}};fr.ValueScopeName=Rf;var sK=(0,Rr._)`\n`,oy=class extends wf{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?sK:Rr.nil}}get(){return this._scope}name(e){return new Rf(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Rr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Rr.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,iy.Started);let l=r(c);if(l){let f=this.opts.es5?fr.varKinds.var:fr.varKinds.const;i=(0,Rr._)`${i}${f} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,Rr._)`${i}${l}${this.opts._n}`;else throw new sy(c);u.set(c,iy.Completed)})}return i}};fr.ValueScope=oy});var Se=_(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.or=he.and=he.not=he.CodeGen=he.operators=he.varKinds=he.ValueScopeName=he.ValueScope=he.Scope=he.Name=he.regexpCode=he.stringify=he.getProperty=he.nil=he.strConcat=he.str=he._=void 0;var Te=hu(),vn=ay(),Hs=hu();Object.defineProperty(he,"_",{enumerable:!0,get:function(){return Hs._}});Object.defineProperty(he,"str",{enumerable:!0,get:function(){return Hs.str}});Object.defineProperty(he,"strConcat",{enumerable:!0,get:function(){return Hs.strConcat}});Object.defineProperty(he,"nil",{enumerable:!0,get:function(){return Hs.nil}});Object.defineProperty(he,"getProperty",{enumerable:!0,get:function(){return Hs.getProperty}});Object.defineProperty(he,"stringify",{enumerable:!0,get:function(){return Hs.stringify}});Object.defineProperty(he,"regexpCode",{enumerable:!0,get:function(){return Hs.regexpCode}});Object.defineProperty(he,"Name",{enumerable:!0,get:function(){return Hs.Name}});var Nf=ay();Object.defineProperty(he,"Scope",{enumerable:!0,get:function(){return Nf.Scope}});Object.defineProperty(he,"ValueScope",{enumerable:!0,get:function(){return Nf.ValueScope}});Object.defineProperty(he,"ValueScopeName",{enumerable:!0,get:function(){return Nf.ValueScopeName}});Object.defineProperty(he,"varKinds",{enumerable:!0,get:function(){return Nf.varKinds}});he.operators={GT:new Te._Code(">"),GTE:new Te._Code(">="),LT:new Te._Code("<"),LTE:new Te._Code("<="),EQ:new Te._Code("==="),NEQ:new Te._Code("!=="),NOT:new Te._Code("!"),OR:new Te._Code("||"),AND:new Te._Code("&&"),ADD:new Te._Code("+")};var fs=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},uy=class extends fs{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?vn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Vo(this.rhs,e,r)),this}get names(){return this.rhs instanceof Te._CodeOrName?this.rhs.names:{}}},Pf=class extends fs{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Te.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Vo(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Te.Name?{}:{...this.lhs.names};return Of(e,this.rhs)}},ly=class extends Pf{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},cy=class extends fs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},fy=class extends fs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},dy=class extends fs{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},hy=class extends fs{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Vo(this.code,e,r),this}get names(){return this.code instanceof Te._CodeOrName?this.code.names:{}}},pu=class extends fs{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(iK(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>qi(e,r.names),{})}},ds=class extends pu{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},py=class extends pu{},Fo=class extends ds{};Fo.kind="else";var Ai=class t extends ds{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Fo(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(qP(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Vo(this.condition,e,r),this}get names(){let e=super.names;return Of(e,this.condition),this.else&&qi(e,this.else.names),e}};Ai.kind="if";var ki=class extends ds{};ki.kind="for";var my=class extends ki{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Vo(this.iteration,e,r),this}get names(){return qi(super.names,this.iteration.names)}},yy=class extends ki{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?vn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Of(super.names,this.from);return Of(e,this.to)}},Tf=class extends ki{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Vo(this.iterable,e,r),this}get names(){return qi(super.names,this.iterable.names)}},mu=class extends ds{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};mu.kind="func";var yu=class extends pu{render(e){return"return "+super.render(e)}};yu.kind="return";var gy=class extends ds{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&qi(e,this.catch.names),this.finally&&qi(e,this.finally.names),e}},gu=class extends ds{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};gu.kind="catch";var _u=class extends ds{render(e){return"finally"+super.render(e)}};_u.kind="finally";var _y=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new vn.Scope({parent:e}),this._nodes=[new py]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new uy(e,i,n)),i}const(e,r,n){return this._def(vn.varKinds.const,e,r,n)}let(e,r,n){return this._def(vn.varKinds.let,e,r,n)}var(e,r,n){return this._def(vn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Pf(e,r,n))}add(e,r){return this._leafNode(new ly(e,he.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Te.nil&&this._leafNode(new hy(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Te.addCodeArg)(r,s));return r.push("}"),new Te._Code(r)}if(e,r,n){if(this._blockNode(new Ai(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Ai(e))}else(){return this._elseNode(new Fo)}endIf(){return this._endBlockNode(Ai,Fo)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new my(e),r)}forRange(e,r,n,s,i=this.opts.es5?vn.varKinds.var:vn.varKinds.let){let o=this._scope.toName(e);return this._for(new yy(i,o,r,n),()=>s(o))}forOf(e,r,n,s=vn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Te.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Te._)`${o}.length`,a=>{this.var(i,(0,Te._)`${o}[${a}]`),n(i)})}return this._for(new Tf("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?vn.varKinds.var:vn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Te._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Tf("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(ki)}label(e){return this._leafNode(new cy(e))}break(e){return this._leafNode(new fy(e))}return(e){let r=new yu;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(yu)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new gy;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new gu(i),r(i)}return n&&(this._currNode=s.finally=new _u,this.code(n)),this._endBlockNode(gu,_u)}throw(e){return this._leafNode(new dy(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Te.nil,n,s){return this._blockNode(new mu(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(mu)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Ai))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};he.CodeGen=_y;function qi(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Of(t,e){return e instanceof Te._CodeOrName?qi(t,e.names):t}function Vo(t,e,r){if(t instanceof Te.Name)return n(t);if(!s(t))return t;return new Te._Code(t._items.reduce((i,o)=>(o instanceof Te.Name&&(o=n(o)),o instanceof Te._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Te._Code&&i._items.some(o=>o instanceof Te.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function iK(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function qP(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Te._)`!${vy(t)}`}he.not=qP;var oK=jP(he.operators.AND);function aK(...t){return t.reduce(oK)}he.and=aK;var uK=jP(he.operators.OR);function lK(...t){return t.reduce(uK)}he.or=lK;function jP(t){return(e,r)=>e===Te.nil?r:r===Te.nil?e:(0,Te._)`${vy(e)} ${t} ${vy(r)}`}function vy(t){return t instanceof Te.Name?t:(0,Te._)`(${t})`}});var De=_(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.checkStrictMode=pe.getErrorPath=pe.Type=pe.useFunc=pe.setEvaluated=pe.evaluatedPropsToName=pe.mergeEvaluated=pe.eachItem=pe.unescapeJsonPointer=pe.escapeJsonPointer=pe.escapeFragment=pe.unescapeFragment=pe.schemaRefOrVal=pe.schemaHasRulesButRef=pe.schemaHasRules=pe.checkUnknownRules=pe.alwaysValidSchema=pe.toHash=void 0;var rt=Se(),cK=hu();function fK(t){let e={};for(let r of t)e[r]=!0;return e}pe.toHash=fK;function dK(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(xP(t,e),!MP(e,t.self.RULES.all))}pe.alwaysValidSchema=dK;function xP(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||HP(t,`unknown keyword: "${i}"`)}pe.checkUnknownRules=xP;function MP(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}pe.schemaHasRules=MP;function hK(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}pe.schemaHasRulesButRef=hK;function pK({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,rt._)`${r}`}return(0,rt._)`${t}${e}${(0,rt.getProperty)(n)}`}pe.schemaRefOrVal=pK;function mK(t){return FP(decodeURIComponent(t))}pe.unescapeFragment=mK;function yK(t){return encodeURIComponent(Ey(t))}pe.escapeFragment=yK;function Ey(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}pe.escapeJsonPointer=Ey;function FP(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}pe.unescapeJsonPointer=FP;function gK(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}pe.eachItem=gK;function DP({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof rt.Name?(i instanceof rt.Name?t(s,i,o):e(s,i,o),o):i instanceof rt.Name?(e(s,o,i),i):r(i,o);return a===rt.Name&&!(u instanceof rt.Name)?n(s,u):u}}pe.mergeEvaluated={props:DP({mergeNames:(t,e,r)=>t.if((0,rt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,rt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,rt._)`${r} || {}`).code((0,rt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,rt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,rt._)`${r} || {}`),Sy(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:VP}),items:DP({mergeNames:(t,e,r)=>t.if((0,rt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,rt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,rt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,rt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function VP(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,rt._)`{}`);return e!==void 0&&Sy(t,r,e),r}pe.evaluatedPropsToName=VP;function Sy(t,e,r){Object.keys(r).forEach(n=>t.assign((0,rt._)`${e}${(0,rt.getProperty)(n)}`,!0))}pe.setEvaluated=Sy;var LP={};function _K(t,e){return t.scopeValue("func",{ref:e,code:LP[e.code]||(LP[e.code]=new cK._Code(e.code))})}pe.useFunc=_K;var zP;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(zP=pe.Type||(pe.Type={}));function vK(t,e,r){if(t instanceof rt.Name){let n=e===zP.Num;return r?n?(0,rt._)`"[" + ${t} + "]"`:(0,rt._)`"['" + ${t} + "']"`:n?(0,rt._)`"/" + ${t}`:(0,rt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,rt.getProperty)(t).toString():"/"+Ey(t)}pe.getErrorPath=vK;function HP(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}pe.checkStrictMode=HP});var hs=_($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0});var sr=Se(),EK={data:new sr.Name("data"),valCxt:new sr.Name("valCxt"),instancePath:new sr.Name("instancePath"),parentData:new sr.Name("parentData"),parentDataProperty:new sr.Name("parentDataProperty"),rootData:new sr.Name("rootData"),dynamicAnchors:new sr.Name("dynamicAnchors"),vErrors:new sr.Name("vErrors"),errors:new sr.Name("errors"),this:new sr.Name("this"),self:new sr.Name("self"),scope:new sr.Name("scope"),json:new sr.Name("json"),jsonPos:new sr.Name("jsonPos"),jsonLen:new sr.Name("jsonLen"),jsonPart:new sr.Name("jsonPart")};$y.default=EK});var vu=_(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.extendErrors=ir.resetErrorsCount=ir.reportExtraError=ir.reportError=ir.keyword$DataError=ir.keywordError=void 0;var Ce=Se(),If=De(),dr=hs();ir.keywordError={message:({keyword:t})=>(0,Ce.str)`must pass "${t}" keyword validation`};ir.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ce.str)`"${t}" keyword must be ${e} ($data)`:(0,Ce.str)`"${t}" keyword is invalid ($data)`};function SK(t,e=ir.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=BP(t,e,r);n??(o||a)?UP(i,u):KP(s,(0,Ce._)`[${u}]`)}ir.reportError=SK;function $K(t,e=ir.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=BP(t,e,r);UP(s,a),i||o||KP(n,dr.default.vErrors)}ir.reportExtraError=$K;function bK(t,e){t.assign(dr.default.errors,e),t.if((0,Ce._)`${dr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ce._)`${dr.default.vErrors}.length`,e),()=>t.assign(dr.default.vErrors,null)))}ir.resetErrorsCount=bK;function wK({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,dr.default.errors,a=>{t.const(o,(0,Ce._)`${dr.default.vErrors}[${a}]`),t.if((0,Ce._)`${o}.instancePath === undefined`,()=>t.assign((0,Ce._)`${o}.instancePath`,(0,Ce.strConcat)(dr.default.instancePath,i.errorPath))),t.assign((0,Ce._)`${o}.schemaPath`,(0,Ce.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ce._)`${o}.schema`,r),t.assign((0,Ce._)`${o}.data`,n))})}ir.extendErrors=wK;function UP(t,e){let r=t.const("err",e);t.if((0,Ce._)`${dr.default.vErrors} === null`,()=>t.assign(dr.default.vErrors,(0,Ce._)`[${r}]`),(0,Ce._)`${dr.default.vErrors}.push(${r})`),t.code((0,Ce._)`${dr.default.errors}++`)}function KP(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ce._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ce._)`${n}.errors`,e),r.return(!1))}var ji={keyword:new Ce.Name("keyword"),schemaPath:new Ce.Name("schemaPath"),params:new Ce.Name("params"),propertyName:new Ce.Name("propertyName"),message:new Ce.Name("message"),schema:new Ce.Name("schema"),parentSchema:new Ce.Name("parentSchema")};function BP(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ce._)`{}`:RK(t,e,r)}function RK(t,e,r={}){let{gen:n,it:s}=t,i=[PK(s,r),TK(t,r)];return OK(t,e,i),n.object(...i)}function PK({errorPath:t},{instancePath:e}){let r=e?(0,Ce.str)`${t}${(0,If.getErrorPath)(e,If.Type.Str)}`:t;return[dr.default.instancePath,(0,Ce.strConcat)(dr.default.instancePath,r)]}function TK({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ce.str)`${e}/${t}`;return r&&(s=(0,Ce.str)`${s}${(0,If.getErrorPath)(r,If.Type.Str)}`),[ji.schemaPath,s]}function OK(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:f}=a;n.push([ji.keyword,s],[ji.params,typeof e=="function"?e(t):e||(0,Ce._)`{}`]),u.messages&&n.push([ji.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([ji.schema,o],[ji.parentSchema,(0,Ce._)`${l}${f}`],[dr.default.data,i]),c&&n.push([ji.propertyName,c])}});var JP=_(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.boolOrEmptySchema=zo.topBoolOrEmptySchema=void 0;var NK=vu(),IK=Se(),CK=hs(),AK={message:"boolean schema is false"};function kK(t){let{gen:e,schema:r,validateName:n}=t;r===!1?GP(t,!1):typeof r=="object"&&r.$async===!0?e.return(CK.default.data):(e.assign((0,IK._)`${n}.errors`,null),e.return(!0))}zo.topBoolOrEmptySchema=kK;function qK(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),GP(t)):r.var(e,!0)}zo.boolOrEmptySchema=qK;function GP(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,NK.reportError)(s,AK,void 0,e)}});var by=_(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.getRules=Ho.isJSONType=void 0;var jK=["string","number","integer","boolean","null","object","array"],DK=new Set(jK);function LK(t){return typeof t=="string"&&DK.has(t)}Ho.isJSONType=LK;function xK(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Ho.getRules=xK});var wy=_(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.shouldUseRule=Us.shouldUseGroup=Us.schemaHasRulesForType=void 0;function MK({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&WP(t,n)}Us.schemaHasRulesForType=MK;function WP(t,e){return e.rules.some(r=>YP(t,r))}Us.shouldUseGroup=WP;function YP(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Us.shouldUseRule=YP});var Su=_(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.reportTypeError=Ht.checkDataTypes=Ht.checkDataType=Ht.coerceAndCheckDataType=Ht.getJSONTypes=Ht.getSchemaTypes=Ht.DataType=void 0;var FK=by(),VK=wy(),zK=vu(),ue=Se(),XP=De(),Eu;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Eu=Ht.DataType||(Ht.DataType={}));function HK(t){let e=QP(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Ht.getSchemaTypes=HK;function QP(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(FK.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Ht.getJSONTypes=QP;function UK(t,e){let{gen:r,data:n,opts:s}=t,i=KK(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,VK.schemaHasRulesForType)(t,e[0]));if(o){let a=Py(e,n,s.strictNumbers,Eu.Wrong);r.if(a,()=>{i.length?BK(t,e,i):Ty(t)})}return o}Ht.coerceAndCheckDataType=UK;var ZP=new Set(["string","number","integer","boolean","null"]);function KK(t,e){return e?t.filter(r=>ZP.has(r)||e==="array"&&r==="array"):[]}function BK(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,ue._)`typeof ${s}`),a=n.let("coerced",(0,ue._)`undefined`);i.coerceTypes==="array"&&n.if((0,ue._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ue._)`${s}[0]`).assign(o,(0,ue._)`typeof ${s}`).if(Py(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,ue._)`${a} !== undefined`);for(let c of r)(ZP.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),Ty(t),n.endIf(),n.if((0,ue._)`${a} !== undefined`,()=>{n.assign(s,a),GK(t,a)});function u(c){switch(c){case"string":n.elseIf((0,ue._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ue._)`"" + ${s}`).elseIf((0,ue._)`${s} === null`).assign(a,(0,ue._)`""`);return;case"number":n.elseIf((0,ue._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,ue._)`+${s}`);return;case"integer":n.elseIf((0,ue._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,ue._)`+${s}`);return;case"boolean":n.elseIf((0,ue._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,ue._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ue._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ue._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,ue._)`[${s}]`)}}}function GK({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ue._)`${e} !== undefined`,()=>t.assign((0,ue._)`${e}[${r}]`,n))}function Ry(t,e,r,n=Eu.Correct){let s=n===Eu.Correct?ue.operators.EQ:ue.operators.NEQ,i;switch(t){case"null":return(0,ue._)`${e} ${s} null`;case"array":i=(0,ue._)`Array.isArray(${e})`;break;case"object":i=(0,ue._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,ue._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,ue._)`typeof ${e} ${s} ${t}`}return n===Eu.Correct?i:(0,ue.not)(i);function o(a=ue.nil){return(0,ue.and)((0,ue._)`typeof ${e} == "number"`,a,r?(0,ue._)`isFinite(${e})`:ue.nil)}}Ht.checkDataType=Ry;function Py(t,e,r,n){if(t.length===1)return Ry(t[0],e,r,n);let s,i=(0,XP.toHash)(t);if(i.array&&i.object){let o=(0,ue._)`typeof ${e} != "object"`;s=i.null?o:(0,ue._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=ue.nil;i.number&&delete i.integer;for(let o in i)s=(0,ue.and)(s,Ry(o,e,r,n));return s}Ht.checkDataTypes=Py;var JK={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ue._)`{type: ${t}}`:(0,ue._)`{type: ${e}}`};function Ty(t){let e=WK(t);(0,zK.reportError)(e,JK)}Ht.reportTypeError=Ty;function WK(t){let{gen:e,data:r,schema:n}=t,s=(0,XP.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var tT=_(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.assignDefaults=void 0;var Uo=Se(),YK=De();function XK(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)eT(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>eT(t,i,s.default))}Cf.assignDefaults=XK;function eT(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Uo._)`${i}${(0,Uo.getProperty)(e)}`;if(s){(0,YK.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,Uo._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Uo._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Uo._)`${a} = ${(0,Uo.stringify)(r)}`)}});var Wr=_(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.validateUnion=Qe.validateArray=Qe.usePattern=Qe.callValidateCode=Qe.schemaProperties=Qe.allSchemaProperties=Qe.noPropertyInData=Qe.propertyInData=Qe.isOwnProperty=Qe.hasPropFunc=Qe.reportMissingProp=Qe.checkMissingProp=Qe.checkReportMissingProp=void 0;var lt=Se(),Oy=De(),Ks=hs(),QK=De();function ZK(t,e){let{gen:r,data:n,it:s}=t;r.if(Iy(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,lt._)`${e}`},!0),t.error()})}Qe.checkReportMissingProp=ZK;function e9({gen:t,data:e,it:{opts:r}},n,s){return(0,lt.or)(...n.map(i=>(0,lt.and)(Iy(t,e,i,r.ownProperties),(0,lt._)`${s} = ${i}`)))}Qe.checkMissingProp=e9;function t9(t,e){t.setParams({missingProperty:e},!0),t.error()}Qe.reportMissingProp=t9;function rT(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,lt._)`Object.prototype.hasOwnProperty`})}Qe.hasPropFunc=rT;function Ny(t,e,r){return(0,lt._)`${rT(t)}.call(${e}, ${r})`}Qe.isOwnProperty=Ny;function r9(t,e,r,n){let s=(0,lt._)`${e}${(0,lt.getProperty)(r)} !== undefined`;return n?(0,lt._)`${s} && ${Ny(t,e,r)}`:s}Qe.propertyInData=r9;function Iy(t,e,r,n){let s=(0,lt._)`${e}${(0,lt.getProperty)(r)} === undefined`;return n?(0,lt.or)(s,(0,lt.not)(Ny(t,e,r))):s}Qe.noPropertyInData=Iy;function nT(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Qe.allSchemaProperties=nT;function n9(t,e){return nT(e).filter(r=>!(0,Oy.alwaysValidSchema)(t,e[r]))}Qe.schemaProperties=n9;function s9({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,lt._)`${t}, ${e}, ${n}${s}`:e,f=[[Ks.default.instancePath,(0,lt.strConcat)(Ks.default.instancePath,i)],[Ks.default.parentData,o.parentData],[Ks.default.parentDataProperty,o.parentDataProperty],[Ks.default.rootData,Ks.default.rootData]];o.opts.dynamicRef&&f.push([Ks.default.dynamicAnchors,Ks.default.dynamicAnchors]);let h=(0,lt._)`${l}, ${r.object(...f)}`;return u!==lt.nil?(0,lt._)`${a}.call(${u}, ${h})`:(0,lt._)`${a}(${h})`}Qe.callValidateCode=s9;var i9=(0,lt._)`new RegExp`;function o9({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,lt._)`${s.code==="new RegExp"?i9:(0,QK.useFunc)(t,s)}(${r}, ${n})`})}Qe.usePattern=o9;function a9(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,lt._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:Oy.Type.Num},i),e.if((0,lt.not)(i),a)})}}Qe.validateArray=a9;function u9(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Oy.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,lt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,lt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Qe.validateUnion=u9});var oT=_(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.validateKeywordUsage=Fn.validSchemaType=Fn.funcKeywordCode=Fn.macroKeywordCode=void 0;var hr=Se(),Di=hs(),l9=Wr(),c9=vu();function f9(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=iT(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:hr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}Fn.macroKeywordCode=f9;function d9(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;p9(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=iT(n,s,c),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&sT(t),g(()=>t.error());else{let E=e.async?d():p();e.modifying&&sT(t),g(()=>h9(t,E))}}function d(){let E=n.let("ruleErrs",null);return n.try(()=>m((0,hr._)`await `),$=>n.assign(f,!1).if((0,hr._)`${$} instanceof ${u.ValidationError}`,()=>n.assign(E,(0,hr._)`${$}.errors`),()=>n.throw($))),E}function p(){let E=(0,hr._)`${l}.errors`;return n.assign(E,null),m(hr.nil),E}function m(E=e.async?(0,hr._)`await `:hr.nil){let $=u.opts.passContext?Di.default.this:Di.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,hr._)`${E}${(0,l9.callValidateCode)(t,l,$,v)}`,e.modifying)}function g(E){var $;n.if((0,hr.not)(($=e.valid)!==null&&$!==void 0?$:f),E)}}Fn.funcKeywordCode=d9;function sT(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,hr._)`${n.parentData}[${n.parentDataProperty}]`))}function h9(t,e){let{gen:r}=t;r.if((0,hr._)`Array.isArray(${e})`,()=>{r.assign(Di.default.vErrors,(0,hr._)`${Di.default.vErrors} === null ? ${e} : ${Di.default.vErrors}.concat(${e})`).assign(Di.default.errors,(0,hr._)`${Di.default.vErrors}.length`),(0,c9.extendErrors)(t)},()=>t.error())}function p9({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function iT(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,hr.stringify)(r)})}function m9(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Fn.validSchemaType=m9;function y9({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Fn.validateKeywordUsage=y9});var uT=_(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.extendSubschemaMode=Bs.extendSubschemaData=Bs.getSubschema=void 0;var Vn=Se(),aT=De();function g9(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Vn._)`${t.schemaPath}${(0,Vn.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Vn._)`${t.schemaPath}${(0,Vn.getProperty)(e)}${(0,Vn.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,aT.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Bs.getSubschema=g9;function _9(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:f}=e,h=a.let("data",(0,Vn._)`${e.data}${(0,Vn.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Vn.str)`${c}${(0,aT.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Vn._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof Vn.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}Bs.extendSubschemaData=_9;function v9(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Bs.extendSubschemaMode=v9});var Yr=_((rme,lT)=>{"use strict";lT.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var fT=_((nme,cT)=>{"use strict";var Gs=cT.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Af(e,n,s,t,"",t)};Gs.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Gs.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Gs.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Gs.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Af(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var f=n[l];if(Array.isArray(f)){if(l in Gs.arrayKeywords)for(var h=0;h<f.length;h++)Af(t,e,r,f[h],s+"/"+l+"/"+h,i,s,l,n,h)}else if(l in Gs.propsKeywords){if(f&&typeof f=="object")for(var d in f)Af(t,e,r,f[d],s+"/"+l+"/"+E9(d),i,s,l,n,d)}else(l in Gs.keywords||t.allKeys&&!(l in Gs.skipKeywords))&&Af(t,e,r,f,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function E9(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var $u=_(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.getSchemaRefs=Pr.resolveUrl=Pr.normalizeId=Pr._getFullPath=Pr.getFullPath=Pr.inlineRef=void 0;var S9=De(),$9=Yr(),b9=fT(),w9=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function R9(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Cy(t):e?dT(t)<=e:!1}Pr.inlineRef=R9;var P9=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Cy(t){for(let e in t){if(P9.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Cy)||typeof r=="object"&&Cy(r))return!0}return!1}function dT(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!w9.has(r)&&(typeof t[r]=="object"&&(0,S9.eachItem)(t[r],n=>e+=dT(n)),e===1/0))return 1/0}return e}function hT(t,e="",r){r!==!1&&(e=Ko(e));let n=t.parse(e);return pT(t,n)}Pr.getFullPath=hT;function pT(t,e){return t.serialize(e).split("#")[0]+"#"}Pr._getFullPath=pT;var T9=/#\/?$/;function Ko(t){return t?t.replace(T9,""):""}Pr.normalizeId=Ko;function O9(t,e,r){return r=Ko(r),t.resolve(e,r)}Pr.resolveUrl=O9;var N9=/^[a-z_][-a-z0-9._]*$/i;function I9(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Ko(t[r]||e),i={"":s},o=hT(n,s,!1),a={},u=new Set;return b9(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,g=i[p];typeof f[r]=="string"&&(g=E.call(this,f[r])),$.call(this,f.$anchor),$.call(this,f.$dynamicAnchor),i[h]=g;function E(v){let y=this.opts.uriResolver.resolve;if(v=Ko(g?y(g,v):v),u.has(v))throw l(v);u.add(v);let S=this.refs[v];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(f,S.schema,v):v!==Ko(m)&&(v[0]==="#"?(c(f,a[v],v),a[v]=f):this.refs[v]=m),v}function $(v){if(typeof v=="string"){if(!N9.test(v))throw new Error(`invalid anchor "${v}"`);E.call(this,`#${v}`)}}}),a;function c(f,h,d){if(h!==void 0&&!$9(f,h))throw l(d)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Pr.getSchemaRefs=I9});var Ru=_(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.getData=Js.KeywordCxt=Js.validateFunctionCode=void 0;var vT=JP(),mT=Su(),ky=wy(),kf=Su(),C9=tT(),wu=oT(),Ay=uT(),J=Se(),re=hs(),A9=$u(),ps=De(),bu=vu();function k9(t){if($T(t)&&(bT(t),ST(t))){D9(t);return}ET(t,()=>(0,vT.topBoolOrEmptySchema)(t))}Js.validateFunctionCode=k9;function ET({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,J._)`${re.default.data}, ${re.default.valCxt}`,n.$async,()=>{t.code((0,J._)`"use strict"; ${yT(r,s)}`),j9(t,s),t.code(i)}):t.func(e,(0,J._)`${re.default.data}, ${q9(s)}`,n.$async,()=>t.code(yT(r,s)).code(i))}function q9(t){return(0,J._)`{${re.default.instancePath}="", ${re.default.parentData}, ${re.default.parentDataProperty}, ${re.default.rootData}=${re.default.data}${t.dynamicRef?(0,J._)`, ${re.default.dynamicAnchors}={}`:J.nil}}={}`}function j9(t,e){t.if(re.default.valCxt,()=>{t.var(re.default.instancePath,(0,J._)`${re.default.valCxt}.${re.default.instancePath}`),t.var(re.default.parentData,(0,J._)`${re.default.valCxt}.${re.default.parentData}`),t.var(re.default.parentDataProperty,(0,J._)`${re.default.valCxt}.${re.default.parentDataProperty}`),t.var(re.default.rootData,(0,J._)`${re.default.valCxt}.${re.default.rootData}`),e.dynamicRef&&t.var(re.default.dynamicAnchors,(0,J._)`${re.default.valCxt}.${re.default.dynamicAnchors}`)},()=>{t.var(re.default.instancePath,(0,J._)`""`),t.var(re.default.parentData,(0,J._)`undefined`),t.var(re.default.parentDataProperty,(0,J._)`undefined`),t.var(re.default.rootData,re.default.data),e.dynamicRef&&t.var(re.default.dynamicAnchors,(0,J._)`{}`)})}function D9(t){let{schema:e,opts:r,gen:n}=t;ET(t,()=>{r.$comment&&e.$comment&&RT(t),V9(t),n.let(re.default.vErrors,null),n.let(re.default.errors,0),r.unevaluated&&L9(t),wT(t),U9(t)})}function L9(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,J._)`${r}.evaluated`),e.if((0,J._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,J._)`${t.evaluated}.props`,(0,J._)`undefined`)),e.if((0,J._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,J._)`${t.evaluated}.items`,(0,J._)`undefined`))}function yT(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,J._)`/*# sourceURL=${r} */`:J.nil}function x9(t,e){if($T(t)&&(bT(t),ST(t))){M9(t,e);return}(0,vT.boolOrEmptySchema)(t,e)}function ST({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function $T(t){return typeof t.schema!="boolean"}function M9(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&RT(t),z9(t),H9(t);let i=n.const("_errs",re.default.errors);wT(t,i),n.var(e,(0,J._)`${i} === ${re.default.errors}`)}function bT(t){(0,ps.checkUnknownRules)(t),F9(t)}function wT(t,e){if(t.opts.jtd)return gT(t,[],!1,e);let r=(0,mT.getSchemaTypes)(t.schema),n=(0,mT.coerceAndCheckDataType)(t,r);gT(t,r,!n,e)}function F9(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ps.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function V9(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ps.checkStrictMode)(t,"default is ignored in the schema root")}function z9(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,A9.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function H9(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function RT({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,J._)`${re.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,J.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,J._)`${re.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function U9(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,J._)`${re.default.errors} === 0`,()=>e.return(re.default.data),()=>e.throw((0,J._)`new ${s}(${re.default.vErrors})`)):(e.assign((0,J._)`${n}.errors`,re.default.vErrors),i.unevaluated&&K9(t),e.return((0,J._)`${re.default.errors} === 0`))}function K9({gen:t,evaluated:e,props:r,items:n}){r instanceof J.Name&&t.assign((0,J._)`${e}.props`,r),n instanceof J.Name&&t.assign((0,J._)`${e}.items`,n)}function gT(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,ps.schemaHasRulesButRef)(i,l))){s.block(()=>TT(t,"$ref",l.all.$ref.definition));return}u.jtd||B9(t,e),s.block(()=>{for(let h of l.rules)f(h);f(l.post)});function f(h){(0,ky.shouldUseGroup)(i,h)&&(h.type?(s.if((0,kf.checkDataType)(h.type,o,u.strictNumbers)),_T(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,kf.reportTypeError)(t)),s.endIf()):_T(t,h),a||s.if((0,J._)`${re.default.errors} === ${n||0}`))}}function _T(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,C9.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,ky.shouldUseRule)(n,i)&&TT(t,i.keyword,i.definition,e.type)})}function B9(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(G9(t,e),t.opts.allowUnionTypes||J9(t,e),W9(t,t.dataTypes))}function G9(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{PT(t.dataTypes,r)||qy(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),X9(t,e)}}function J9(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&qy(t,"use allowUnionTypes to allow union type keyword")}function W9(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,ky.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Y9(e,o))&&qy(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Y9(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function PT(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function X9(t,e){let r=[];for(let n of t.dataTypes)PT(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function qy(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ps.checkStrictMode)(t,e,t.opts.strictTypes)}var qf=class{constructor(e,r,n){if((0,wu.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ps.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",OT(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,wu.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",re.default.errors))}result(e,r,n){this.failResult((0,J.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,J.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,J._)`${r} !== undefined && (${(0,J.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?bu.reportExtraError:bu.reportError)(this,this.def.error,r)}$dataError(){(0,bu.reportError)(this,this.def.$dataError||bu.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,bu.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=J.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=J.nil,r=J.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,J.or)((0,J._)`${s} === undefined`,r)),e!==J.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==J.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,J.or)(o(),a());function o(){if(n.length){if(!(r instanceof J.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,J._)`${(0,kf.checkDataTypes)(u,r,i.opts.strictNumbers,kf.DataType.Wrong)}`}return J.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,J._)`!${u}(${r})`}return J.nil}}subschema(e,r){let n=(0,Ay.getSubschema)(this.it,e);(0,Ay.extendSubschemaData)(n,this.it,e),(0,Ay.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return x9(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ps.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ps.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,J.Name)),!0}};Js.KeywordCxt=qf;function TT(t,e,r,n){let s=new qf(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,wu.funcKeywordCode)(s,r):"macro"in r?(0,wu.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,wu.funcKeywordCode)(s,r)}var Q9=/^\/(?:[^~]|~0|~1)*$/,Z9=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function OT(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return re.default.rootData;if(t[0]==="/"){if(!Q9.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=re.default.rootData}else{let c=Z9.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,J._)`${i}${(0,J.getProperty)((0,ps.unescapeJsonPointer)(c))}`,o=(0,J._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}Js.getData=OT});var jf=_(Dy=>{"use strict";Object.defineProperty(Dy,"__esModule",{value:!0});var jy=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Dy.default=jy});var Df=_(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});var Ly=$u(),xy=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ly.resolveUrl)(e,r,n),this.missingSchema=(0,Ly.normalizeId)((0,Ly.getFullPath)(e,this.missingRef))}};My.default=xy});var xf=_(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.resolveSchema=Xr.getCompilingSchema=Xr.resolveRef=Xr.compileSchema=Xr.SchemaEnv=void 0;var En=Se(),eB=jf(),Li=hs(),Sn=$u(),NT=De(),tB=Ru(),Bo=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Sn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Xr.SchemaEnv=Bo;function Vy(t){let e=IT.call(this,t);if(e)return e;let r=(0,Sn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new En.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:eB.default,code:(0,En._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:Li.default.data,parentData:Li.default.parentData,parentDataProperty:Li.default.parentDataProperty,dataNames:[Li.default.data],dataPathArr:[En.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,En.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:En.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,En._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,tB.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(Li.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let d=new Function(`${Li.default.self}`,`${Li.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=c;d.evaluated={props:p instanceof En.Name?void 0:p,items:m instanceof En.Name?void 0:m,dynamicProps:p instanceof En.Name,dynamicItems:m instanceof En.Name},d.source&&(d.source.evaluated=(0,En.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),f}finally{this._compilations.delete(t)}}Xr.compileSchema=Vy;function rB(t,e,r){var n;r=(0,Sn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=iB.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Bo({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=nB.call(this,i)}Xr.resolveRef=rB;function nB(t){return(0,Sn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Vy.call(this,t)}function IT(t){for(let e of this._compilations)if(sB(e,t))return e}Xr.getCompilingSchema=IT;function sB(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function iB(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Lf.call(this,t,e)}function Lf(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Sn._getFullPath)(this.opts.uriResolver,r),s=(0,Sn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Fy.call(this,r,t);let i=(0,Sn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Lf.call(this,t,o);return typeof a?.schema!="object"?void 0:Fy.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Vy.call(this,o),i===(0,Sn.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,Sn.resolveUrl)(this.opts.uriResolver,s,c)),new Bo({schema:a,schemaId:u,root:t,baseId:s})}return Fy.call(this,r,o)}}Xr.resolveSchema=Lf;var oB=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Fy(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,NT.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!oB.has(a)&&c&&(e=(0,Sn.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,NT.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Sn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Lf.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Bo({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var CT=_((lme,aB)=>{aB.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Ff=_((Mf,AT)=>{(function(t,e){typeof Mf=="object"&&typeof AT<"u"?e(Mf):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Mf,function(t){"use strict";function e(){for(var P=arguments.length,b=Array(P),O=0;O<P;O++)b[O]=arguments[O];if(b.length>1){b[0]=b[0].slice(0,-1);for(var C=b.length-1,k=1;k<C;++k)b[k]=b[k].slice(1,-1);return b[C]=b[C].slice(1),b.join("")}else return b[0]}function r(P){return"(?:"+P+")"}function n(P){return P===void 0?"undefined":P===null?"null":Object.prototype.toString.call(P).split(" ").pop().split("]").shift().toLowerCase()}function s(P){return P.toUpperCase()}function i(P){return P!=null?P instanceof Array?P:typeof P.length!="number"||P.split||P.setInterval||P.call?[P]:Array.prototype.slice.call(P):[]}function o(P,b){var O=P;if(b)for(var C in b)O[C]=b[C];return O}function a(P){var b="[A-Za-z]",O="[\\x0D]",C="[0-9]",k="[\\x22]",U=e(C,"[A-Fa-f]"),ae="[\\x0A]",qe="[\\x20]",Be=r(r("%[EFef]"+U+"%"+U+U+"%"+U+U)+"|"+r("%[89A-Fa-f]"+U+"%"+U+U)+"|"+r("%"+U+U)),qt="[\\:\\/\\?\\#\\[\\]\\@]",Ie="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",mt=e(qt,Ie),jt=P?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",pt=P?"[\\uE000-\\uF8FF]":"[]",Ve=e(b,C,"[\\-\\.\\_\\~]",jt),yt=r(b+e(b,C,"[\\+\\-\\.]")+"*"),Xe=r(r(Be+"|"+e(Ve,Ie,"[\\:]"))+"*"),bi=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("[1-9]"+C)+"|"+C),Mr=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("0?[1-9]"+C)+"|0?0?"+C),Ur=r(Mr+"\\."+Mr+"\\."+Mr+"\\."+Mr),tt=r(U+"{1,4}"),Fr=r(r(tt+"\\:"+tt)+"|"+Ur),Kr=r(r(tt+"\\:")+"{6}"+Fr),Dn=r("\\:\\:"+r(tt+"\\:")+"{5}"+Fr),wi=r(r(tt)+"?\\:\\:"+r(tt+"\\:")+"{4}"+Fr),os=r(r(r(tt+"\\:")+"{0,1}"+tt)+"?\\:\\:"+r(tt+"\\:")+"{3}"+Fr),Xa=r(r(r(tt+"\\:")+"{0,2}"+tt)+"?\\:\\:"+r(tt+"\\:")+"{2}"+Fr),xc=r(r(r(tt+"\\:")+"{0,3}"+tt)+"?\\:\\:"+tt+"\\:"+Fr),Mc=r(r(r(tt+"\\:")+"{0,4}"+tt)+"?\\:\\:"+Fr),wo=r(r(r(tt+"\\:")+"{0,5}"+tt)+"?\\:\\:"+tt),Ro=r(r(r(tt+"\\:")+"{0,6}"+tt)+"?\\:\\:"),as=r([Kr,Dn,wi,os,Xa,xc,Mc,wo,Ro].join("|")),Po=r(r(Ve+"|"+Be)+"+"),Cp=r(as+"\\%25"+Po),Ri=r(as+r("\\%25|\\%(?!"+U+"{2})")+Po),RF=r("[vV]"+U+"+\\."+e(Ve,Ie,"[\\:]")+"+"),PF=r("\\["+r(Ri+"|"+as+"|"+RF)+"\\]"),U$=r(r(Be+"|"+e(Ve,Ie))+"*"),Qa=r(PF+"|"+Ur+"(?!"+U$+")|"+U$),Za=r(C+"*"),K$=r(r(Xe+"@")+"?"+Qa+r("\\:"+Za)+"?"),eu=r(Be+"|"+e(Ve,Ie,"[\\:\\@]")),TF=r(eu+"*"),B$=r(eu+"+"),OF=r(r(Be+"|"+e(Ve,Ie,"[\\@]"))+"+"),us=r(r("\\/"+TF)+"*"),To=r("\\/"+r(B$+us)+"?"),Ap=r(OF+us),Fc=r(B$+us),Oo="(?!"+eu+")",She=r(us+"|"+To+"|"+Ap+"|"+Fc+"|"+Oo),No=r(r(eu+"|"+e("[\\/\\?]",pt))+"*"),tu=r(r(eu+"|[\\/\\?]")+"*"),G$=r(r("\\/\\/"+K$+us)+"|"+To+"|"+Fc+"|"+Oo),NF=r(yt+"\\:"+G$+r("\\?"+No)+"?"+r("\\#"+tu)+"?"),IF=r(r("\\/\\/"+K$+us)+"|"+To+"|"+Ap+"|"+Oo),CF=r(IF+r("\\?"+No)+"?"+r("\\#"+tu)+"?"),$he=r(NF+"|"+CF),bhe=r(yt+"\\:"+G$+r("\\?"+No)+"?"),whe="^("+yt+")\\:"+r(r("\\/\\/("+r("("+Xe+")@")+"?("+Qa+")"+r("\\:("+Za+")")+"?)")+"?("+us+"|"+To+"|"+Fc+"|"+Oo+")")+r("\\?("+No+")")+"?"+r("\\#("+tu+")")+"?$",Rhe="^(){0}"+r(r("\\/\\/("+r("("+Xe+")@")+"?("+Qa+")"+r("\\:("+Za+")")+"?)")+"?("+us+"|"+To+"|"+Ap+"|"+Oo+")")+r("\\?("+No+")")+"?"+r("\\#("+tu+")")+"?$",Phe="^("+yt+")\\:"+r(r("\\/\\/("+r("("+Xe+")@")+"?("+Qa+")"+r("\\:("+Za+")")+"?)")+"?("+us+"|"+To+"|"+Fc+"|"+Oo+")")+r("\\?("+No+")")+"?$",The="^"+r("\\#("+tu+")")+"?$",Ohe="^"+r("("+Xe+")@")+"?("+Qa+")"+r("\\:("+Za+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",b,C,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Ve,Ie),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Ve,Ie),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Ve,Ie),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Ve,Ie),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Ve,Ie,"[\\:\\@\\/\\?]",pt),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Ve,Ie,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Ve,Ie),"g"),UNRESERVED:new RegExp(Ve,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Ve,mt),"g"),PCT_ENCODED:new RegExp(Be,"g"),IPV4ADDRESS:new RegExp("^("+Ur+")$"),IPV6ADDRESS:new RegExp("^\\[?("+as+")"+r(r("\\%25|\\%(?!"+U+"{2})")+"("+Po+")")+"?\\]?$")}}var u=a(!1),c=a(!0),l=function(){function P(b,O){var C=[],k=!0,U=!1,ae=void 0;try{for(var qe=b[Symbol.iterator](),Be;!(k=(Be=qe.next()).done)&&(C.push(Be.value),!(O&&C.length===O));k=!0);}catch(qt){U=!0,ae=qt}finally{try{!k&&qe.return&&qe.return()}finally{if(U)throw ae}}return C}return function(b,O){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return P(b,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(P){if(Array.isArray(P)){for(var b=0,O=Array(P.length);b<P.length;b++)O[b]=P[b];return O}else return Array.from(P)},h=2147483647,d=36,p=1,m=26,g=38,E=700,$=72,v=128,y="-",S=/^xn--/,N=/[^\0-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=d-p,R=Math.floor,j=String.fromCharCode;function q(P){throw new RangeError(T[P])}function D(P,b){for(var O=[],C=P.length;C--;)O[C]=b(P[C]);return O}function ee(P,b){var O=P.split("@"),C="";O.length>1&&(C=O[0]+"@",P=O[1]),P=P.replace(w,".");var k=P.split("."),U=D(k,b).join(".");return C+U}function ve(P){for(var b=[],O=0,C=P.length;O<C;){var k=P.charCodeAt(O++);if(k>=55296&&k<=56319&&O<C){var U=P.charCodeAt(O++);(U&64512)==56320?b.push(((k&1023)<<10)+(U&1023)+65536):(b.push(k),O--)}else b.push(k)}return b}var z=function(b){return String.fromCodePoint.apply(String,f(b))},G=function(b){return b-48<10?b-22:b-65<26?b-65:b-97<26?b-97:d},Je=function(b,O){return b+22+75*(b<26)-((O!=0)<<5)},H=function(b,O,C){var k=0;for(b=C?R(b/E):b>>1,b+=R(b/O);b>A*m>>1;k+=d)b=R(b/A);return R(k+(A+1)*b/(b+g))},ht=function(b){var O=[],C=b.length,k=0,U=v,ae=$,qe=b.lastIndexOf(y);qe<0&&(qe=0);for(var Be=0;Be<qe;++Be)b.charCodeAt(Be)>=128&&q("not-basic"),O.push(b.charCodeAt(Be));for(var qt=qe>0?qe+1:0;qt<C;){for(var Ie=k,mt=1,jt=d;;jt+=d){qt>=C&&q("invalid-input");var pt=G(b.charCodeAt(qt++));(pt>=d||pt>R((h-k)/mt))&&q("overflow"),k+=pt*mt;var Ve=jt<=ae?p:jt>=ae+m?m:jt-ae;if(pt<Ve)break;var yt=d-Ve;mt>R(h/yt)&&q("overflow"),mt*=yt}var Xe=O.length+1;ae=H(k-Ie,Xe,Ie==0),R(k/Xe)>h-U&&q("overflow"),U+=R(k/Xe),k%=Xe,O.splice(k++,0,U)}return String.fromCodePoint.apply(String,O)},Hr=function(b){var O=[];b=ve(b);var C=b.length,k=v,U=0,ae=$,qe=!0,Be=!1,qt=void 0;try{for(var Ie=b[Symbol.iterator](),mt;!(qe=(mt=Ie.next()).done);qe=!0){var jt=mt.value;jt<128&&O.push(j(jt))}}catch(Ri){Be=!0,qt=Ri}finally{try{!qe&&Ie.return&&Ie.return()}finally{if(Be)throw qt}}var pt=O.length,Ve=pt;for(pt&&O.push(y);Ve<C;){var yt=h,Xe=!0,bi=!1,Mr=void 0;try{for(var Ur=b[Symbol.iterator](),tt;!(Xe=(tt=Ur.next()).done);Xe=!0){var Fr=tt.value;Fr>=k&&Fr<yt&&(yt=Fr)}}catch(Ri){bi=!0,Mr=Ri}finally{try{!Xe&&Ur.return&&Ur.return()}finally{if(bi)throw Mr}}var Kr=Ve+1;yt-k>R((h-U)/Kr)&&q("overflow"),U+=(yt-k)*Kr,k=yt;var Dn=!0,wi=!1,os=void 0;try{for(var Xa=b[Symbol.iterator](),xc;!(Dn=(xc=Xa.next()).done);Dn=!0){var Mc=xc.value;if(Mc<k&&++U>h&&q("overflow"),Mc==k){for(var wo=U,Ro=d;;Ro+=d){var as=Ro<=ae?p:Ro>=ae+m?m:Ro-ae;if(wo<as)break;var Po=wo-as,Cp=d-as;O.push(j(Je(as+Po%Cp,0))),wo=R(Po/Cp)}O.push(j(Je(wo,0))),ae=H(U,Kr,Ve==pt),U=0,++Ve}}}catch(Ri){wi=!0,os=Ri}finally{try{!Dn&&Xa.return&&Xa.return()}finally{if(wi)throw os}}++U,++k}return O.join("")},Ue=function(b){return ee(b,function(O){return S.test(O)?ht(O.slice(4).toLowerCase()):O})},ns=function(b){return ee(b,function(O){return N.test(O)?"xn--"+Hr(O):O})},Lt={version:"2.1.0",ucs2:{decode:ve,encode:z},decode:ht,encode:Hr,toASCII:ns,toUnicode:Ue},we={};function At(P){var b=P.charCodeAt(0),O=void 0;return b<16?O="%0"+b.toString(16).toUpperCase():b<128?O="%"+b.toString(16).toUpperCase():b<2048?O="%"+(b>>6|192).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase():O="%"+(b>>12|224).toString(16).toUpperCase()+"%"+(b>>6&63|128).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase(),O}function ie(P){for(var b="",O=0,C=P.length;O<C;){var k=parseInt(P.substr(O+1,2),16);if(k<128)b+=String.fromCharCode(k),O+=3;else if(k>=194&&k<224){if(C-O>=6){var U=parseInt(P.substr(O+4,2),16);b+=String.fromCharCode((k&31)<<6|U&63)}else b+=P.substr(O,6);O+=6}else if(k>=224){if(C-O>=9){var ae=parseInt(P.substr(O+4,2),16),qe=parseInt(P.substr(O+7,2),16);b+=String.fromCharCode((k&15)<<12|(ae&63)<<6|qe&63)}else b+=P.substr(O,9);O+=9}else b+=P.substr(O,3),O+=3}return b}function He(P,b){function O(C){var k=ie(C);return k.match(b.UNRESERVED)?k:C}return P.scheme&&(P.scheme=String(P.scheme).replace(b.PCT_ENCODED,O).toLowerCase().replace(b.NOT_SCHEME,"")),P.userinfo!==void 0&&(P.userinfo=String(P.userinfo).replace(b.PCT_ENCODED,O).replace(b.NOT_USERINFO,At).replace(b.PCT_ENCODED,s)),P.host!==void 0&&(P.host=String(P.host).replace(b.PCT_ENCODED,O).toLowerCase().replace(b.NOT_HOST,At).replace(b.PCT_ENCODED,s)),P.path!==void 0&&(P.path=String(P.path).replace(b.PCT_ENCODED,O).replace(P.scheme?b.NOT_PATH:b.NOT_PATH_NOSCHEME,At).replace(b.PCT_ENCODED,s)),P.query!==void 0&&(P.query=String(P.query).replace(b.PCT_ENCODED,O).replace(b.NOT_QUERY,At).replace(b.PCT_ENCODED,s)),P.fragment!==void 0&&(P.fragment=String(P.fragment).replace(b.PCT_ENCODED,O).replace(b.NOT_FRAGMENT,At).replace(b.PCT_ENCODED,s)),P}function Dr(P){return P.replace(/^0*(.*)/,"$1")||"0"}function Ke(P,b){var O=P.match(b.IPV4ADDRESS)||[],C=l(O,2),k=C[1];return k?k.split(".").map(Dr).join("."):P}function Re(P,b){var O=P.match(b.IPV6ADDRESS)||[],C=l(O,3),k=C[1],U=C[2];if(k){for(var ae=k.toLowerCase().split("::").reverse(),qe=l(ae,2),Be=qe[0],qt=qe[1],Ie=qt?qt.split(":").map(Dr):[],mt=Be.split(":").map(Dr),jt=b.IPV4ADDRESS.test(mt[mt.length-1]),pt=jt?7:8,Ve=mt.length-pt,yt=Array(pt),Xe=0;Xe<pt;++Xe)yt[Xe]=Ie[Xe]||mt[Ve+Xe]||"";jt&&(yt[pt-1]=Ke(yt[pt-1],b));var bi=yt.reduce(function(Kr,Dn,wi){if(!Dn||Dn==="0"){var os=Kr[Kr.length-1];os&&os.index+os.length===wi?os.length++:Kr.push({index:wi,length:1})}return Kr},[]),Mr=bi.sort(function(Kr,Dn){return Dn.length-Kr.length})[0],Ur=void 0;if(Mr&&Mr.length>1){var tt=yt.slice(0,Mr.index),Fr=yt.slice(Mr.index+Mr.length);Ur=tt.join(":")+"::"+Fr.join(":")}else Ur=yt.join(":");return U&&(Ur+="%"+U),Ur}else return P}var I=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,x="".match(/(){0}/)[1]===void 0;function F(P){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O={},C=b.iri!==!1?c:u;b.reference==="suffix"&&(P=(b.scheme?b.scheme+":":"")+"//"+P);var k=P.match(I);if(k){x?(O.scheme=k[1],O.userinfo=k[3],O.host=k[4],O.port=parseInt(k[5],10),O.path=k[6]||"",O.query=k[7],O.fragment=k[8],isNaN(O.port)&&(O.port=k[5])):(O.scheme=k[1]||void 0,O.userinfo=P.indexOf("@")!==-1?k[3]:void 0,O.host=P.indexOf("//")!==-1?k[4]:void 0,O.port=parseInt(k[5],10),O.path=k[6]||"",O.query=P.indexOf("?")!==-1?k[7]:void 0,O.fragment=P.indexOf("#")!==-1?k[8]:void 0,isNaN(O.port)&&(O.port=P.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?k[4]:void 0)),O.host&&(O.host=Re(Ke(O.host,C),C)),O.scheme===void 0&&O.userinfo===void 0&&O.host===void 0&&O.port===void 0&&!O.path&&O.query===void 0?O.reference="same-document":O.scheme===void 0?O.reference="relative":O.fragment===void 0?O.reference="absolute":O.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==O.reference&&(O.error=O.error||"URI is not a "+b.reference+" reference.");var U=we[(b.scheme||O.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!U||!U.unicodeSupport)){if(O.host&&(b.domainHost||U&&U.domainHost))try{O.host=Lt.toASCII(O.host.replace(C.PCT_ENCODED,ie).toLowerCase())}catch(ae){O.error=O.error||"Host's domain name can not be converted to ASCII via punycode: "+ae}He(O,u)}else He(O,C);U&&U.parse&&U.parse(O,b)}else O.error=O.error||"URI can not be parsed.";return O}function Q(P,b){var O=b.iri!==!1?c:u,C=[];return P.userinfo!==void 0&&(C.push(P.userinfo),C.push("@")),P.host!==void 0&&C.push(Re(Ke(String(P.host),O),O).replace(O.IPV6ADDRESS,function(k,U,ae){return"["+U+(ae?"%25"+ae:"")+"]"})),(typeof P.port=="number"||typeof P.port=="string")&&(C.push(":"),C.push(String(P.port))),C.length?C.join(""):void 0}var Ee=/^\.\.?\//,Z=/^\/\.(\/|$)/,We=/^\/\.\.(\/|$)/,hn=/^\/?(?:.|\n)*?(?=\/|$)/;function Ye(P){for(var b=[];P.length;)if(P.match(Ee))P=P.replace(Ee,"");else if(P.match(Z))P=P.replace(Z,"/");else if(P.match(We))P=P.replace(We,"/"),b.pop();else if(P==="."||P==="..")P="";else{var O=P.match(hn);if(O){var C=O[0];P=P.slice(C.length),b.push(C)}else throw new Error("Unexpected dot segment condition")}return b.join("")}function bt(P){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=b.iri?c:u,C=[],k=we[(b.scheme||P.scheme||"").toLowerCase()];if(k&&k.serialize&&k.serialize(P,b),P.host&&!O.IPV6ADDRESS.test(P.host)){if(b.domainHost||k&&k.domainHost)try{P.host=b.iri?Lt.toUnicode(P.host):Lt.toASCII(P.host.replace(O.PCT_ENCODED,ie).toLowerCase())}catch(qe){P.error=P.error||"Host's domain name can not be converted to "+(b.iri?"Unicode":"ASCII")+" via punycode: "+qe}}He(P,O),b.reference!=="suffix"&&P.scheme&&(C.push(P.scheme),C.push(":"));var U=Q(P,b);if(U!==void 0&&(b.reference!=="suffix"&&C.push("//"),C.push(U),P.path&&P.path.charAt(0)!=="/"&&C.push("/")),P.path!==void 0){var ae=P.path;!b.absolutePath&&(!k||!k.absolutePath)&&(ae=Ye(ae)),U===void 0&&(ae=ae.replace(/^\/\//,"/%2F")),C.push(ae)}return P.query!==void 0&&(C.push("?"),C.push(P.query)),P.fragment!==void 0&&(C.push("#"),C.push(P.fragment)),C.join("")}function z$(P,b){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments[3],k={};return C||(P=F(bt(P,O),O),b=F(bt(b,O),O)),O=O||{},!O.tolerant&&b.scheme?(k.scheme=b.scheme,k.userinfo=b.userinfo,k.host=b.host,k.port=b.port,k.path=Ye(b.path||""),k.query=b.query):(b.userinfo!==void 0||b.host!==void 0||b.port!==void 0?(k.userinfo=b.userinfo,k.host=b.host,k.port=b.port,k.path=Ye(b.path||""),k.query=b.query):(b.path?(b.path.charAt(0)==="/"?k.path=Ye(b.path):((P.userinfo!==void 0||P.host!==void 0||P.port!==void 0)&&!P.path?k.path="/"+b.path:P.path?k.path=P.path.slice(0,P.path.lastIndexOf("/")+1)+b.path:k.path=b.path,k.path=Ye(k.path)),k.query=b.query):(k.path=P.path,b.query!==void 0?k.query=b.query:k.query=P.query),k.userinfo=P.userinfo,k.host=P.host,k.port=P.port),k.scheme=P.scheme),k.fragment=b.fragment,k}function pn(P,b,O){var C=o({scheme:"null"},O);return bt(z$(F(P,C),F(b,C),C,!0),C)}function ss(P,b){return typeof P=="string"?P=bt(F(P,b),b):n(P)==="object"&&(P=F(bt(P,b),b)),P}function Wa(P,b,O){return typeof P=="string"?P=bt(F(P,O),O):n(P)==="object"&&(P=bt(P,O)),typeof b=="string"?b=bt(F(b,O),O):n(b)==="object"&&(b=bt(b,O)),P===b}function qs(P,b){return P&&P.toString().replace(!b||!b.iri?u.ESCAPE:c.ESCAPE,At)}function mn(P,b){return P&&P.toString().replace(!b||!b.iri?u.PCT_ENCODED:c.PCT_ENCODED,ie)}var Ya={scheme:"http",domainHost:!0,parse:function(b,O){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b},serialize:function(b,O){var C=String(b.scheme).toLowerCase()==="https";return(b.port===(C?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}},Zt={scheme:"https",domainHost:Ya.domainHost,parse:Ya.parse,serialize:Ya.serialize};function jc(P){return typeof P.secure=="boolean"?P.secure:String(P.scheme).toLowerCase()==="wss"}var js={scheme:"ws",domainHost:!0,parse:function(b,O){var C=b;return C.secure=jc(C),C.resourceName=(C.path||"/")+(C.query?"?"+C.query:""),C.path=void 0,C.query=void 0,C},serialize:function(b,O){if((b.port===(jc(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){var C=b.resourceName.split("?"),k=l(C,2),U=k[0],ae=k[1];b.path=U&&U!=="/"?U:void 0,b.query=ae,b.resourceName=void 0}return b.fragment=void 0,b}},ut={scheme:"wss",domainHost:js.domainHost,parse:js.parse,serialize:js.serialize},Lr={},SF=!0,xr="[A-Za-z0-9\\-\\.\\_\\~"+(SF?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",xt="[0-9A-Fa-f]",$F=r(r("%[EFef]"+xt+"%"+xt+xt+"%"+xt+xt)+"|"+r("%[89A-Fa-f]"+xt+"%"+xt+xt)+"|"+r("%"+xt+xt)),er="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ip="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",bF=e(Ip,'[\\"\\\\]'),kt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",$i=new RegExp(xr,"g"),bo=new RegExp($F,"g"),yn=new RegExp(e("[^]",er,"[\\.]",'[\\"]',bF),"g"),br=new RegExp(e("[^]",xr,kt),"g"),Dc=br;function jn(P){var b=ie(P);return b.match($i)?b:P}var Ds={scheme:"mailto",parse:function(b,O){var C=b,k=C.to=C.path?C.path.split(","):[];if(C.path=void 0,C.query){for(var U=!1,ae={},qe=C.query.split("&"),Be=0,qt=qe.length;Be<qt;++Be){var Ie=qe[Be].split("=");switch(Ie[0]){case"to":for(var mt=Ie[1].split(","),jt=0,pt=mt.length;jt<pt;++jt)k.push(mt[jt]);break;case"subject":C.subject=mn(Ie[1],O);break;case"body":C.body=mn(Ie[1],O);break;default:U=!0,ae[mn(Ie[0],O)]=mn(Ie[1],O);break}}U&&(C.headers=ae)}C.query=void 0;for(var Ve=0,yt=k.length;Ve<yt;++Ve){var Xe=k[Ve].split("@");if(Xe[0]=mn(Xe[0]),O.unicodeSupport)Xe[1]=mn(Xe[1],O).toLowerCase();else try{Xe[1]=Lt.toASCII(mn(Xe[1],O).toLowerCase())}catch(bi){C.error=C.error||"Email address's domain name can not be converted to ASCII via punycode: "+bi}k[Ve]=Xe.join("@")}return C},serialize:function(b,O){var C=b,k=i(b.to);if(k){for(var U=0,ae=k.length;U<ae;++U){var qe=String(k[U]),Be=qe.lastIndexOf("@"),qt=qe.slice(0,Be).replace(bo,jn).replace(bo,s).replace(yn,At),Ie=qe.slice(Be+1);try{Ie=O.iri?Lt.toUnicode(Ie):Lt.toASCII(mn(Ie,O).toLowerCase())}catch(Ve){C.error=C.error||"Email address's domain name can not be converted to "+(O.iri?"Unicode":"ASCII")+" via punycode: "+Ve}k[U]=qt+"@"+Ie}C.path=k.join(",")}var mt=b.headers=b.headers||{};b.subject&&(mt.subject=b.subject),b.body&&(mt.body=b.body);var jt=[];for(var pt in mt)mt[pt]!==Lr[pt]&&jt.push(pt.replace(bo,jn).replace(bo,s).replace(br,At)+"="+mt[pt].replace(bo,jn).replace(bo,s).replace(Dc,At));return jt.length&&(C.query=jt.join("&")),C}},Lc=/^([^\:]+)\:(.*)/,is={scheme:"urn",parse:function(b,O){var C=b.path&&b.path.match(Lc),k=b;if(C){var U=O.scheme||k.scheme||"urn",ae=C[1].toLowerCase(),qe=C[2],Be=U+":"+(O.nid||ae),qt=we[Be];k.nid=ae,k.nss=qe,k.path=void 0,qt&&(k=qt.parse(k,O))}else k.error=k.error||"URN can not be parsed.";return k},serialize:function(b,O){var C=O.scheme||b.scheme||"urn",k=b.nid,U=C+":"+(O.nid||k),ae=we[U];ae&&(b=ae.serialize(b,O));var qe=b,Be=b.nss;return qe.path=(k||O.nid)+":"+Be,qe}},wF=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,H$={scheme:"urn:uuid",parse:function(b,O){var C=b;return C.uuid=C.nss,C.nss=void 0,!O.tolerant&&(!C.uuid||!C.uuid.match(wF))&&(C.error=C.error||"UUID is not valid."),C},serialize:function(b,O){var C=b;return C.nss=(b.uuid||"").toLowerCase(),C}};we[Ya.scheme]=Ya,we[Zt.scheme]=Zt,we[js.scheme]=js,we[ut.scheme]=ut,we[Ds.scheme]=Ds,we[is.scheme]=is,we[H$.scheme]=H$,t.SCHEMES=we,t.pctEncChar=At,t.pctDecChars=ie,t.parse=F,t.removeDotSegments=Ye,t.serialize=bt,t.resolveComponents=z$,t.resolve=pn,t.normalize=ss,t.equal=Wa,t.escapeComponent=qs,t.unescapeComponent=mn,Object.defineProperty(t,"__esModule",{value:!0})})});var qT=_(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0});var kT=Ff();kT.code='require("ajv/dist/runtime/uri").default';zy.default=kT});var zT=_(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.CodeGen=Ut.Name=Ut.nil=Ut.stringify=Ut.str=Ut._=Ut.KeywordCxt=void 0;var uB=Ru();Object.defineProperty(Ut,"KeywordCxt",{enumerable:!0,get:function(){return uB.KeywordCxt}});var Go=Se();Object.defineProperty(Ut,"_",{enumerable:!0,get:function(){return Go._}});Object.defineProperty(Ut,"str",{enumerable:!0,get:function(){return Go.str}});Object.defineProperty(Ut,"stringify",{enumerable:!0,get:function(){return Go.stringify}});Object.defineProperty(Ut,"nil",{enumerable:!0,get:function(){return Go.nil}});Object.defineProperty(Ut,"Name",{enumerable:!0,get:function(){return Go.Name}});Object.defineProperty(Ut,"CodeGen",{enumerable:!0,get:function(){return Go.CodeGen}});var lB=jf(),MT=Df(),cB=by(),Pu=xf(),fB=Se(),Tu=$u(),Vf=Su(),Uy=De(),jT=CT(),dB=qT(),FT=(t,e)=>new RegExp(t,e);FT.code="new RegExp";var hB=["removeAdditional","useDefaults","coerceTypes"],pB=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),mB={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},yB={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},DT=200;function gB(t){var e,r,n,s,i,o,a,u,c,l,f,h,d,p,m,g,E,$,v,y,S,N,w,T,A;let R=t.strict,j=(e=t.code)===null||e===void 0?void 0:e.optimize,q=j===!0||j===void 0?1:j||0,D=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:FT,ee=(s=t.uriResolver)!==null&&s!==void 0?s:dB.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:R)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:R)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:R)!==null&&l!==void 0?l:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:R)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:R)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:q,regExp:D}:{optimize:q,regExp:D},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:DT,loopEnum:(g=t.loopEnum)!==null&&g!==void 0?g:DT,meta:(E=t.meta)!==null&&E!==void 0?E:!0,messages:($=t.messages)!==null&&$!==void 0?$:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(y=t.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:(N=t.validateSchema)!==null&&N!==void 0?N:!0,validateFormats:(w=t.validateFormats)!==null&&w!==void 0?w:!0,unicodeRegExp:(T=t.unicodeRegExp)!==null&&T!==void 0?T:!0,int32range:(A=t.int32range)!==null&&A!==void 0?A:!0,uriResolver:ee}}var Ou=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...gB(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new fB.ValueScope({scope:{},prefixes:pB,es5:r,lines:n}),this.logger=bB(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,cB.getRules)(),LT.call(this,mB,e,"NOT SUPPORTED"),LT.call(this,yB,e,"DEPRECATED","warn"),this._metaOpts=SB.call(this),e.formats&&vB.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&EB.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),_B.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=jT;n==="id"&&(s={...jT},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,f){await i.call(this,l.$schema);let h=this._addSchema(l,f);return h.validate||o.call(this,h)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(f){if(!(f instanceof MT.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:f}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${f} cannot be resolved`)}async function u(l){let f=await c.call(this,l);this.refs[l]||await i.call(this,f.$schema),this.refs[l]||this.addSchema(f,l,r)}async function c(l){let f=this._loading[l];if(f)return f;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Tu.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=xT.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Pu.SchemaEnv({schema:{},schemaId:n});if(r=Pu.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=xT.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Tu.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(RB.call(this,n,r),!r)return(0,Uy.eachItem)(n,i=>Hy.call(this,i)),this;TB.call(this,r);let s={...r,type:(0,Vf.getJSONTypes)(r.type),schemaType:(0,Vf.getJSONTypes)(r.schemaType)};return(0,Uy.eachItem)(n,s.type.length===0?i=>Hy.call(this,i,s):i=>s.type.forEach(o=>Hy.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=VT(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Tu.normalizeId)(o||n);let c=Tu.getSchemaRefs.call(this,e,n);return u=new Pu.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Pu.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Pu.compileSchema.call(this,e)}finally{this.opts=r}}};Ut.default=Ou;Ou.ValidationError=lB.default;Ou.MissingRefError=MT.default;function LT(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function xT(t){return t=(0,Tu.normalizeId)(t),this.schemas[t]||this.refs[t]}function _B(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function vB(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function EB(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function SB(){let t={...this.opts};for(let e of hB)delete t[e];return t}var $B={log(){},warn(){},error(){}};function bB(t){if(t===!1)return $B;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var wB=/^[a-z_$][a-z0-9_$:-]*$/i;function RB(t,e){let{RULES:r}=this;if((0,Uy.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!wB.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Hy(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Vf.getJSONTypes)(e.type),schemaType:(0,Vf.getJSONTypes)(e.schemaType)}};e.before?PB.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function PB(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function TB(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=VT(e)),t.validateSchema=this.compile(e,!0))}var OB={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function VT(t){return{anyOf:[t,OB]}}});var HT=_(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});var NB={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Ky.default=NB});var GT=_(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.callRef=xi.getValidate=void 0;var IB=Df(),UT=Wr(),Tr=Se(),Jo=hs(),KT=xf(),zf=De(),CB={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return f();let l=KT.resolveRef.call(u,c,s,r);if(l===void 0)throw new IB.default(n.opts.uriResolver,s,r);if(l instanceof KT.SchemaEnv)return h(l);return d(l);function f(){if(i===c)return Hf(t,o,i,i.$async);let p=e.scopeValue("root",{ref:c});return Hf(t,(0,Tr._)`${p}.validate`,c,c.$async)}function h(p){let m=BT(t,p);Hf(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Tr.stringify)(p)}:{ref:p}),g=e.name("valid"),E=t.subschema({schema:p,dataTypes:[],schemaPath:Tr.nil,topSchemaRef:m,errSchemaPath:r},g);t.mergeEvaluated(E),t.ok(g)}}};function BT(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Tr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}xi.getValidate=BT;function Hf(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?Jo.default.this:Tr.nil;n?l():f();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,Tr._)`await ${(0,UT.callValidateCode)(t,e,c)}`),d(e),o||s.assign(p,!0)},m=>{s.if((0,Tr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function f(){t.result((0,UT.callValidateCode)(t,e,c),()=>d(e),()=>h(e))}function h(p){let m=(0,Tr._)`${p}.errors`;s.assign(Jo.default.vErrors,(0,Tr._)`${Jo.default.vErrors} === null ? ${m} : ${Jo.default.vErrors}.concat(${m})`),s.assign(Jo.default.errors,(0,Tr._)`${Jo.default.vErrors}.length`)}function d(p){var m;if(!i.opts.unevaluated)return;let g=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=zf.mergeEvaluated.props(s,g.props,i.props));else{let E=s.var("props",(0,Tr._)`${p}.evaluated.props`);i.props=zf.mergeEvaluated.props(s,E,i.props,Tr.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=zf.mergeEvaluated.items(s,g.items,i.items));else{let E=s.var("items",(0,Tr._)`${p}.evaluated.items`);i.items=zf.mergeEvaluated.items(s,E,i.items,Tr.Name)}}}xi.callRef=Hf;xi.default=CB});var JT=_(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0});var AB=HT(),kB=GT(),qB=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",AB.default,kB.default];By.default=qB});var WT=_(Gy=>{"use strict";Object.defineProperty(Gy,"__esModule",{value:!0});var Uf=Se(),Ws=Uf.operators,Kf={maximum:{okStr:"<=",ok:Ws.LTE,fail:Ws.GT},minimum:{okStr:">=",ok:Ws.GTE,fail:Ws.LT},exclusiveMaximum:{okStr:"<",ok:Ws.LT,fail:Ws.GTE},exclusiveMinimum:{okStr:">",ok:Ws.GT,fail:Ws.LTE}},jB={message:({keyword:t,schemaCode:e})=>(0,Uf.str)`must be ${Kf[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Uf._)`{comparison: ${Kf[t].okStr}, limit: ${e}}`},DB={keyword:Object.keys(Kf),type:"number",schemaType:"number",$data:!0,error:jB,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Uf._)`${r} ${Kf[e].fail} ${n} || isNaN(${r})`)}};Gy.default=DB});var YT=_(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0});var Nu=Se(),LB={message:({schemaCode:t})=>(0,Nu.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Nu._)`{multipleOf: ${t}}`},xB={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:LB,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Nu._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Nu._)`${o} !== parseInt(${o})`;t.fail$data((0,Nu._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Jy.default=xB});var QT=_(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});function XT(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}Wy.default=XT;XT.code='require("ajv/dist/runtime/ucs2length").default'});var ZT=_(Yy=>{"use strict";Object.defineProperty(Yy,"__esModule",{value:!0});var Mi=Se(),MB=De(),FB=QT(),VB={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Mi.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Mi._)`{limit: ${t}}`},zB={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:VB,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Mi.operators.GT:Mi.operators.LT,o=s.opts.unicode===!1?(0,Mi._)`${r}.length`:(0,Mi._)`${(0,MB.useFunc)(t.gen,FB.default)}(${r})`;t.fail$data((0,Mi._)`${o} ${i} ${n}`)}};Yy.default=zB});var eO=_(Xy=>{"use strict";Object.defineProperty(Xy,"__esModule",{value:!0});var HB=Wr(),Bf=Se(),UB={message:({schemaCode:t})=>(0,Bf.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Bf._)`{pattern: ${t}}`},KB={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:UB,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Bf._)`(new RegExp(${s}, ${o}))`:(0,HB.usePattern)(t,n);t.fail$data((0,Bf._)`!${a}.test(${e})`)}};Xy.default=KB});var tO=_(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});var Iu=Se(),BB={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Iu.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Iu._)`{limit: ${t}}`},GB={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:BB,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Iu.operators.GT:Iu.operators.LT;t.fail$data((0,Iu._)`Object.keys(${r}).length ${s} ${n}`)}};Qy.default=GB});var rO=_(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});var Cu=Wr(),Au=Se(),JB=De(),WB={message:({params:{missingProperty:t}})=>(0,Au.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Au._)`{missingProperty: ${t}}`},YB={keyword:"required",type:"object",schemaType:"array",$data:!0,error:WB,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let g=o.schemaEnv.baseId+o.errSchemaPath,E=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,JB.checkStrictMode)(o,E,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(Au.nil,f);else for(let d of r)(0,Cu.checkReportMissingProp)(t,d)}function l(){let d=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,Cu.checkMissingProp)(t,r,d)),(0,Cu.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,Cu.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,Cu.propertyInData)(e,s,d,a.ownProperties)),e.if((0,Au.not)(p),()=>{t.error(),e.break()})},Au.nil)}}};Zy.default=YB});var nO=_(eg=>{"use strict";Object.defineProperty(eg,"__esModule",{value:!0});var ku=Se(),XB={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,ku.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,ku._)`{limit: ${t}}`},QB={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:XB,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?ku.operators.GT:ku.operators.LT;t.fail$data((0,ku._)`${r}.length ${s} ${n}`)}};eg.default=QB});var qu=_(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});var sO=Yr();sO.code='require("ajv/dist/runtime/equal").default';tg.default=sO});var iO=_(ng=>{"use strict";Object.defineProperty(ng,"__esModule",{value:!0});var rg=Su(),Kt=Se(),ZB=De(),e3=qu(),t3={message:({params:{i:t,j:e}})=>(0,Kt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Kt._)`{i: ${t}, j: ${e}}`},r3={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:t3,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,rg.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,Kt._)`${o} === false`),t.ok(u);function l(){let p=e.let("i",(0,Kt._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Kt._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function h(p,m){let g=e.name("item"),E=(0,rg.checkDataTypes)(c,g,a.opts.strictNumbers,rg.DataType.Wrong),$=e.const("indices",(0,Kt._)`{}`);e.for((0,Kt._)`;${p}--;`,()=>{e.let(g,(0,Kt._)`${r}[${p}]`),e.if(E,(0,Kt._)`continue`),c.length>1&&e.if((0,Kt._)`typeof ${g} == "string"`,(0,Kt._)`${g} += "_"`),e.if((0,Kt._)`typeof ${$}[${g}] == "number"`,()=>{e.assign(m,(0,Kt._)`${$}[${g}]`),t.error(),e.assign(u,!1).break()}).code((0,Kt._)`${$}[${g}] = ${p}`)})}function d(p,m){let g=(0,ZB.useFunc)(e,e3.default),E=e.name("outer");e.label(E).for((0,Kt._)`;${p}--;`,()=>e.for((0,Kt._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Kt._)`${g}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(E)})))}}};ng.default=r3});var oO=_(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});var sg=Se(),n3=De(),s3=qu(),i3={message:"must be equal to constant",params:({schemaCode:t})=>(0,sg._)`{allowedValue: ${t}}`},o3={keyword:"const",$data:!0,error:i3,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,sg._)`!${(0,n3.useFunc)(e,s3.default)}(${r}, ${s})`):t.fail((0,sg._)`${i} !== ${r}`)}};ig.default=o3});var aO=_(og=>{"use strict";Object.defineProperty(og,"__esModule",{value:!0});var ju=Se(),a3=De(),u3=qu(),l3={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,ju._)`{allowedValues: ${t}}`},c3={keyword:"enum",schemaType:"array",$data:!0,error:l3,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,a3.useFunc)(e,u3.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",i);l=(0,ju.or)(...s.map((p,m)=>h(d,m)))}t.pass(l);function f(){e.assign(l,!1),e.forOf("v",i,d=>e.if((0,ju._)`${c()}(${r}, ${d})`,()=>e.assign(l,!0).break()))}function h(d,p){let m=s[p];return typeof m=="object"&&m!==null?(0,ju._)`${c()}(${r}, ${d}[${p}])`:(0,ju._)`${r} === ${m}`}}};og.default=c3});var uO=_(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});var f3=WT(),d3=YT(),h3=ZT(),p3=eO(),m3=tO(),y3=rO(),g3=nO(),_3=iO(),v3=oO(),E3=aO(),S3=[f3.default,d3.default,h3.default,p3.default,m3.default,y3.default,g3.default,_3.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},v3.default,E3.default];ag.default=S3});var lg=_(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.validateAdditionalItems=void 0;var Fi=Se(),ug=De(),$3={message:({params:{len:t}})=>(0,Fi.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Fi._)`{limit: ${t}}`},b3={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:$3,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,ug.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}lO(t,n)}};function lO(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,Fi._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Fi._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,ug.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,Fi._)`${a} <= ${e.length}`);r.if((0,Fi.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:ug.Type.Num},c),o.allErrors||r.if((0,Fi.not)(c),()=>r.break())})}}Du.validateAdditionalItems=lO;Du.default=b3});var cg=_(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.validateTuple=void 0;var cO=Se(),Gf=De(),w3=Wr(),R3={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return fO(t,"additionalItems",e);r.items=!0,!(0,Gf.alwaysValidSchema)(r,e)&&t.ok((0,w3.validateArray)(t))}};function fO(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Gf.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,cO._)`${i}.length`);r.forEach((f,h)=>{(0,Gf.alwaysValidSchema)(a,f)||(n.if((0,cO._)`${c} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function l(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let g=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Gf.checkStrictMode)(a,g,h.strictTuples)}}}Lu.validateTuple=fO;Lu.default=R3});var dO=_(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});var P3=cg(),T3={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,P3.validateTuple)(t,"items")};fg.default=T3});var pO=_(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0});var hO=Se(),O3=De(),N3=Wr(),I3=lg(),C3={message:({params:{len:t}})=>(0,hO.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,hO._)`{limit: ${t}}`},A3={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:C3,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,O3.alwaysValidSchema)(n,e)&&(s?(0,I3.validateAdditionalItems)(t,s):t.ok((0,N3.validateArray)(t)))}};dg.default=A3});var mO=_(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});var Qr=Se(),Jf=De(),k3={message:({params:{min:t,max:e}})=>e===void 0?(0,Qr.str)`must contain at least ${t} valid item(s)`:(0,Qr.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Qr._)`{minContains: ${t}}`:(0,Qr._)`{minContains: ${t}, maxContains: ${e}}`},q3={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:k3,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,Qr._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Jf.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Jf.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Jf.alwaysValidSchema)(i,r)){let m=(0,Qr._)`${l} >= ${o}`;a!==void 0&&(m=(0,Qr._)`${m} && ${l} <= ${a}`),t.pass(m);return}i.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,Qr._)`${s}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),g=e.let("count",0);d(m,()=>e.if(m,()=>p(g)))}function d(m,g){e.forRange("i",0,l,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:Jf.Type.Num,compositeRule:!0},m),g()})}function p(m){e.code((0,Qr._)`${m}++`),a===void 0?e.if((0,Qr._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,Qr._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,Qr._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};hg.default=q3});var _O=_(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.validateSchemaDeps=zn.validatePropertyDeps=zn.error=void 0;var pg=Se(),j3=De(),xu=Wr();zn.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,pg.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,pg._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var D3={keyword:"dependencies",type:"object",schemaType:"object",error:zn.error,code(t){let[e,r]=L3(t);yO(t,e),gO(t,r)}};function L3({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function yO(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,xu.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,xu.checkReportMissingProp)(t,c)}):(r.if((0,pg._)`${u} && (${(0,xu.checkMissingProp)(t,a,i)})`),(0,xu.reportMissingProp)(t,i),r.else())}}zn.validatePropertyDeps=yO;function gO(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,j3.alwaysValidSchema)(i,e[a])||(r.if((0,xu.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}zn.validateSchemaDeps=gO;zn.default=D3});var EO=_(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});var vO=Se(),x3=De(),M3={message:"property name must be valid",params:({params:t})=>(0,vO._)`{propertyName: ${t.propertyName}}`},F3={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:M3,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,x3.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,vO.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};mg.default=F3});var gg=_(yg=>{"use strict";Object.defineProperty(yg,"__esModule",{value:!0});var Wf=Wr(),$n=Se(),V3=hs(),Yf=De(),z3={message:"must NOT have additional properties",params:({params:t})=>(0,$n._)`{additionalProperty: ${t.additionalProperty}}`},H3={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:z3,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Yf.alwaysValidSchema)(o,r))return;let c=(0,Wf.allSchemaProperties)(n.properties),l=(0,Wf.allSchemaProperties)(n.patternProperties);f(),t.ok((0,$n._)`${i} === ${V3.default.errors}`);function f(){e.forIn("key",s,g=>{!c.length&&!l.length?p(g):e.if(h(g),()=>p(g))})}function h(g){let E;if(c.length>8){let $=(0,Yf.schemaRefOrVal)(o,n.properties,"properties");E=(0,Wf.isOwnProperty)(e,$,g)}else c.length?E=(0,$n.or)(...c.map($=>(0,$n._)`${g} === ${$}`)):E=$n.nil;return l.length&&(E=(0,$n.or)(E,...l.map($=>(0,$n._)`${(0,Wf.usePattern)(t,$)}.test(${g})`))),(0,$n.not)(E)}function d(g){e.code((0,$n._)`delete ${s}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Yf.alwaysValidSchema)(o,r)){let E=e.name("valid");u.removeAdditional==="failing"?(m(g,E,!1),e.if((0,$n.not)(E),()=>{t.reset(),d(g)})):(m(g,E),a||e.if((0,$n.not)(E),()=>e.break()))}}function m(g,E,$){let v={keyword:"additionalProperties",dataProp:g,dataPropType:Yf.Type.Str};$===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,E)}}};yg.default=H3});var bO=_(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});var U3=Ru(),SO=Wr(),_g=De(),$O=gg(),K3={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&$O.default.code(new U3.KeywordCxt(i,$O.default,"additionalProperties"));let o=(0,SO.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=_g.mergeEvaluated.props(e,(0,_g.toHash)(o),i.props));let a=o.filter(f=>!(0,_g.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=e.name("valid");for(let f of a)c(f)?l(f):(e.if((0,SO.propertyInData)(e,s,f,i.opts.ownProperties)),l(f),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(u);function c(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function l(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};vg.default=K3});var TO=_(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});var wO=Wr(),Xf=Se(),RO=De(),PO=De(),B3={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,wO.allSchemaProperties)(r),u=a.filter(m=>(0,RO.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof Xf.Name)&&(i.props=(0,PO.evaluatedPropsToName)(e,i.props));let{props:f}=i;h();function h(){for(let m of a)c&&d(m),i.allErrors?p(m):(e.var(l,!0),p(m),e.if(l))}function d(m){for(let g in c)new RegExp(m).test(g)&&(0,RO.checkStrictMode)(i,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,g=>{e.if((0,Xf._)`${(0,wO.usePattern)(t,m)}.test(${g})`,()=>{let E=u.includes(m);E||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:PO.Type.Str},l),i.opts.unevaluated&&f!==!0?e.assign((0,Xf._)`${f}[${g}]`,!0):!E&&!i.allErrors&&e.if((0,Xf.not)(l),()=>e.break())})})}}};Eg.default=B3});var OO=_(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});var G3=De(),J3={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,G3.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Sg.default=J3});var NO=_($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});var W3=Wr(),Y3={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:W3.validateUnion,error:{message:"must match a schema in anyOf"}};$g.default=Y3});var IO=_(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});var Qf=Se(),X3=De(),Q3={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Qf._)`{passingSchemas: ${t.passing}}`},Z3={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Q3,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,f)=>{let h;(0,X3.alwaysValidSchema)(s,l)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&e.if((0,Qf._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Qf._)`[${a}, ${f}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,Qf.Name)})})}}};bg.default=Z3});var CO=_(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});var eG=De(),tG={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,eG.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};wg.default=tG});var qO=_(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});var Zf=Se(),kO=De(),rG={message:({params:t})=>(0,Zf.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Zf._)`{failingKeyword: ${t.ifClause}}`},nG={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:rG,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,kO.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=AO(n,"then"),i=AO(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,Zf.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,f){return()=>{let h=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,Zf._)`${l}`):t.setParams({ifClause:l})}}}};function AO(t,e){let r=t.schema[e];return r!==void 0&&!(0,kO.alwaysValidSchema)(t,r)}Rg.default=nG});var jO=_(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});var sG=De(),iG={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,sG.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Pg.default=iG});var DO=_(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});var oG=lg(),aG=dO(),uG=cg(),lG=pO(),cG=mO(),fG=_O(),dG=EO(),hG=gg(),pG=bO(),mG=TO(),yG=OO(),gG=NO(),_G=IO(),vG=CO(),EG=qO(),SG=jO();function $G(t=!1){let e=[yG.default,gG.default,_G.default,vG.default,EG.default,SG.default,dG.default,hG.default,fG.default,pG.default,mG.default];return t?e.push(aG.default,lG.default):e.push(oG.default,uG.default),e.push(cG.default),e}Tg.default=$G});var LO=_(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});var Pt=Se(),bG={message:({schemaCode:t})=>(0,Pt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Pt._)`{format: ${t}}`},wG={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:bG,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:f}=a;if(!u.validateFormats)return;s?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=r.const("fDef",(0,Pt._)`${p}[${o}]`),g=r.let("fType"),E=r.let("format");r.if((0,Pt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(g,(0,Pt._)`${m}.type || "string"`).assign(E,(0,Pt._)`${m}.validate`),()=>r.assign(g,(0,Pt._)`"string"`).assign(E,m)),t.fail$data((0,Pt.or)($(),v()));function $(){return u.strictSchema===!1?Pt.nil:(0,Pt._)`${o} && !${E}`}function v(){let y=l.$async?(0,Pt._)`(${m}.async ? await ${E}(${n}) : ${E}(${n}))`:(0,Pt._)`${E}(${n})`,S=(0,Pt._)`(typeof ${E} == "function" ? ${y} : ${E}.test(${n}))`;return(0,Pt._)`${E} && ${E} !== true && ${g} === ${e} && !${S}`}}function d(){let p=f.formats[i];if(!p){$();return}if(p===!0)return;let[m,g,E]=v(p);m===e&&t.pass(y());function $(){if(u.strictSchema===!1){f.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function v(S){let N=S instanceof RegExp?(0,Pt.regexpCode)(S):u.code.formats?(0,Pt._)`${u.code.formats}${(0,Pt.getProperty)(i)}`:void 0,w=r.scopeValue("formats",{key:i,ref:S,code:N});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Pt._)`${w}.validate`]:["string",S,w]}function y(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,Pt._)`await ${E}(${n})`}return typeof g=="function"?(0,Pt._)`${E}(${n})`:(0,Pt._)`${E}.test(${n})`}}}};Og.default=wG});var xO=_(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});var RG=LO(),PG=[RG.default];Ng.default=PG});var MO=_(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.contentVocabulary=Wo.metadataVocabulary=void 0;Wo.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Wo.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var VO=_(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});var TG=JT(),OG=uO(),NG=DO(),IG=xO(),FO=MO(),CG=[TG.default,OG.default,(0,NG.default)(),IG.default,FO.metadataVocabulary,FO.contentVocabulary];Ig.default=CG});var zO=_(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.DiscrError=void 0;var AG;(function(t){t.Tag="tag",t.Mapping="mapping"})(AG=Mu.DiscrError||(Mu.DiscrError={}))});var UO=_(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});var Yo=Se(),Cg=zO(),HO=xf(),kG=De(),qG={message:({params:{discrError:t,tagName:e}})=>t===Cg.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Yo._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},jG={keyword:"discriminator",type:"object",schemaType:"object",error:qG,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,Yo._)`${r}${(0,Yo.getProperty)(a)}`);e.if((0,Yo._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:Cg.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,Yo._)`${c} === ${p}`),e.assign(u,f(d[p]));e.else(),t.error(!1,{discrError:Cg.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,Yo.Name),p}function h(){var d;let p={},m=E(s),g=!0;for(let y=0;y<o.length;y++){let S=o[y];S?.$ref&&!(0,kG.schemaHasRulesButRef)(S,i.self.RULES)&&(S=HO.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,S?.$ref),S instanceof HO.SchemaEnv&&(S=S.schema));let N=(d=S?.properties)===null||d===void 0?void 0:d[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||E(S)),$(N,y)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function E({required:y}){return Array.isArray(y)&&y.includes(a)}function $(y,S){if(y.const)v(y.const,S);else if(y.enum)for(let N of y.enum)v(N,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(y,S){if(typeof y!="string"||y in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[y]=S}}}};Ag.default=jG});var KO=_((Xme,DG)=>{DG.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var JO=_((gt,GO)=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.MissingRefError=gt.ValidationError=gt.CodeGen=gt.Name=gt.nil=gt.stringify=gt.str=gt._=gt.KeywordCxt=void 0;var LG=zT(),xG=VO(),MG=UO(),BO=KO(),FG=["/properties"],ed="http://json-schema.org/draft-07/schema",td=class extends LG.default{_addVocabularies(){super._addVocabularies(),xG.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(MG.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(BO,FG):BO;this.addMetaSchema(e,ed,!1),this.refs["http://json-schema.org/schema"]=ed}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(ed)?ed:void 0)}};GO.exports=gt=td;Object.defineProperty(gt,"__esModule",{value:!0});gt.default=td;var VG=Ru();Object.defineProperty(gt,"KeywordCxt",{enumerable:!0,get:function(){return VG.KeywordCxt}});var Xo=Se();Object.defineProperty(gt,"_",{enumerable:!0,get:function(){return Xo._}});Object.defineProperty(gt,"str",{enumerable:!0,get:function(){return Xo.str}});Object.defineProperty(gt,"stringify",{enumerable:!0,get:function(){return Xo.stringify}});Object.defineProperty(gt,"nil",{enumerable:!0,get:function(){return Xo.nil}});Object.defineProperty(gt,"Name",{enumerable:!0,get:function(){return Xo.Name}});Object.defineProperty(gt,"CodeGen",{enumerable:!0,get:function(){return Xo.CodeGen}});var zG=jf();Object.defineProperty(gt,"ValidationError",{enumerable:!0,get:function(){return zG.default}});var HG=Df();Object.defineProperty(gt,"MissingRefError",{enumerable:!0,get:function(){return HG.default}})});var YO=_((Qme,WO)=>{"use strict";var UG={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};WO.exports={HEX:UG}});var s1=_((Zme,n1)=>{"use strict";var{HEX:KG}=YO();function e1(t){if(r1(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(/^(\b[01]?\d{1,2}|\b2[0-4]\d|\b25[0-5])(\.([01]?\d{1,2}|2[0-4]\d|25[0-5])){3}$/u)||[],[r]=e;return r?{host:GG(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function kg(t){let e="",r=!0;for(let n of t){if(n!=="0"&&r===!0&&(r=!1),KG[n]===void 0)return;r||(e+=n)}return e}function BG(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function u(){if(s.length){if(i===!1){let c=kg(s.join(""));if(c!==void 0)n.push(c);else return r.error=!0,!1}s.length=0}return!0}for(let c=0;c<t.length;c++){let l=t[c];if(!(l==="["||l==="]"))if(l===":"){if(o===!0&&(a=!0),!u())break;if(e++,n.push(":"),e>7){r.error=!0;break}c-1>=0&&t[c-1]===":"&&(o=!0);continue}else if(l==="%"){if(!u())break;i=!0}else{s.push(l);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(kg(s.join("")))),r.address=n.join(""),r}function t1(t,e={}){if(r1(t,":")<2)return{host:t,isIPV6:!1};let r=BG(t);if(r.error)return{host:t,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function GG(t,e){let r="",n=!0,s=t.length;for(let i=0;i<s;i++){let o=t[i];o==="0"&&n?(i+1<=s&&t[i+1]===e||i+1===s)&&(r+=o,n=!1):(o===e?n=!0:n=!1,r+=o)}return r}function r1(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}var XO=/^\.\.?\//u,QO=/^\/\.(?:\/|$)/u,ZO=/^\/\.\.(?:\/|$)/u,JG=/^\/?(?:.|\n)*?(?=\/|$)/u;function WG(t){let e=[];for(;t.length;)if(t.match(XO))t=t.replace(XO,"");else if(t.match(QO))t=t.replace(QO,"/");else if(t.match(ZO))t=t.replace(ZO,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(JG);if(r){let n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function YG(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function XG(t,e){let r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let n=unescape(t.host),s=e1(n);if(s.isIPV4)n=s.host;else{let i=t1(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=t.host}r.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}n1.exports={recomposeAuthority:XG,normalizeComponentEncoding:YG,removeDotSegments:WG,normalizeIPv4:e1,normalizeIPv6:t1,stringToHexStripped:kg}});var c1=_((eye,l1)=>{"use strict";var QG=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,ZG=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function i1(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function o1(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function a1(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function e6(t){return t.secure=i1(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function t6(t){if((t.port===(i1(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function r6(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(ZG);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,i=qg[s];t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function n6(t,e){let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=qg[s];i&&(t=i.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function s6(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!QG.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function i6(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var u1={scheme:"http",domainHost:!0,parse:o1,serialize:a1},o6={scheme:"https",domainHost:u1.domainHost,parse:o1,serialize:a1},rd={scheme:"ws",domainHost:!0,parse:e6,serialize:t6},a6={scheme:"wss",domainHost:rd.domainHost,parse:rd.parse,serialize:rd.serialize},u6={scheme:"urn",parse:r6,serialize:n6,skipNormalize:!0},l6={scheme:"urn:uuid",parse:s6,serialize:i6,skipNormalize:!0},qg={http:u1,https:o6,ws:rd,wss:a6,urn:u6,"urn:uuid":l6};l1.exports=qg});var Dg=_((tye,sd)=>{"use strict";var c6=require("node:url"),{normalizeIPv6:f6,normalizeIPv4:d6,removeDotSegments:Fu,recomposeAuthority:h6,normalizeComponentEncoding:nd}=s1(),f1=c1();function p6(t,e){return typeof t=="string"?t=Hn(ms(t,e),e):typeof t=="object"&&(t=ms(Hn(t,e),e)),t}function m6(t,e,r){let n=Object.assign({scheme:"null"},r),s=d1(ms(t,n),ms(e,n),n,!0);return Hn(s,{...n,skipEscape:!0})}function d1(t,e,r,n){let s={};return n||(t=ms(Hn(t,r),r),e=ms(Hn(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Fu(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Fu(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=Fu(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Fu(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function y6(t,e,r){return typeof t=="string"?(t=unescape(t),t=Hn(nd(ms(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Hn(nd(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Hn(nd(ms(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Hn(nd(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Hn(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=f1[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));let o=h6(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=Fu(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}var g6=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function _6(t){let e=0;for(let r=0,n=t.length;r<n;++r)if(e=t.charCodeAt(r),e>126||g6[e])return!0;return!1}var v6=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ms(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let i=t.match(v6);if(i){if(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5]),n.host){let a=d6(n.host);a.isIPV4===!1?n.host=f6(a.host,{isIPV4:!1}).host.toLowerCase():n.host=a.host}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=f1[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&_6(n.host))try{n.host=c6.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=encodeURI(n.path)),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURI(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var jg={normalize:p6,resolve:m6,resolveComponents:d1,equal:y6,serialize:Hn,parse:ms};sd.exports=jg;sd.exports.default=jg;sd.exports.fastUri=jg});var id=_(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.formatNames=Un.fastFormats=Un.fullFormats=void 0;function Qo(t,e){return{validate:t,compare:e}}Un.fullFormats={date:Qo(m1,Mg),time:Qo(y1,Fg),"date-time":Qo(b6,g1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:P6,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:k6,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:T6,int32:{type:"number",validate:I6},int64:{type:"number",validate:C6},float:{type:"number",validate:p1},double:{type:"number",validate:p1},password:!0,binary:!0};Un.fastFormats={...Un.fullFormats,date:Qo(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,Mg),time:Qo(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Fg),"date-time":Qo(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,g1),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Un.formatNames=Object.keys(Un.fullFormats);function E6(t){return t%4===0&&(t%100!==0||t%400===0)}var S6=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,$6=[0,31,28,31,30,31,30,31,31,30,31,30,31];function m1(t){let e=S6.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&E6(r)?29:$6[n])}function Mg(t,e){if(t&&e)return t>e?1:t<e?-1:0}var Lg=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function y1(t,e){let r=Lg.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function Fg(t,e){if(!(t&&e))return;let r=Lg.exec(t),n=Lg.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var xg=/t|\s/i;function b6(t){let e=t.split(xg);return e.length===2&&m1(e[0])&&y1(e[1],!0)}function g1(t,e){if(!(t&&e))return;let[r,n]=t.split(xg),[s,i]=e.split(xg),o=Mg(r,s);if(o!==void 0)return o||Fg(n,i)}var w6=/\/|:/,R6=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function P6(t){return w6.test(t)&&R6.test(t)}var h1=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function T6(t){return h1.lastIndex=0,h1.test(t)}var O6=-(2**31),N6=2**31-1;function I6(t){return Number.isInteger(t)&&t<=N6&&t>=O6}function C6(t){return Number.isInteger(t)}function p1(){return!0}var A6=/[^\\]\\Z/;function k6(t){if(A6.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var Hu=_(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.regexpCode=Le.getEsmExportName=Le.getProperty=Le.safeStringify=Le.stringify=Le.strConcat=Le.addCodeArg=Le.str=Le._=Le.nil=Le._Code=Le.Name=Le.IDENTIFIER=Le._CodeOrName=void 0;var Vu=class{};Le._CodeOrName=Vu;Le.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Vi=class extends Vu{constructor(e){if(super(),!Le.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Le.Name=Vi;var Zr=class extends Vu{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Vi&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Le._Code=Zr;Le.nil=new Zr("");function _1(t,...e){let r=[t[0]],n=0;for(;n<e.length;)zg(r,e[n]),r.push(t[++n]);return new Zr(r)}Le._=_1;var Vg=new Zr("+");function v1(t,...e){let r=[zu(t[0])],n=0;for(;n<e.length;)r.push(Vg),zg(r,e[n]),r.push(Vg,zu(t[++n]));return q6(r),new Zr(r)}Le.str=v1;function zg(t,e){e instanceof Zr?t.push(...e._items):e instanceof Vi?t.push(e):t.push(L6(e))}Le.addCodeArg=zg;function q6(t){let e=1;for(;e<t.length-1;){if(t[e]===Vg){let r=j6(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function j6(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Vi||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Vi))return`"${t}${e.slice(1)}`}function D6(t,e){return e.emptyStr()?t:t.emptyStr()?e:v1`${t}${e}`}Le.strConcat=D6;function L6(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:zu(Array.isArray(t)?t.join(","):t)}function x6(t){return new Zr(zu(t))}Le.stringify=x6;function zu(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Le.safeStringify=zu;function M6(t){return typeof t=="string"&&Le.IDENTIFIER.test(t)?new Zr(`.${t}`):_1`[${t}]`}Le.getProperty=M6;function F6(t){if(typeof t=="string"&&Le.IDENTIFIER.test(t))return new Zr(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Le.getEsmExportName=F6;function V6(t){return new Zr(t.toString())}Le.regexpCode=V6});var Bg=_(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.ValueScope=pr.ValueScopeName=pr.Scope=pr.varKinds=pr.UsedValueState=void 0;var Or=Hu(),Hg=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Ug;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Ug=pr.UsedValueState||(pr.UsedValueState={}));pr.varKinds={const:new Or.Name("const"),let:new Or.Name("let"),var:new Or.Name("var")};var od=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Or.Name?e:this.name(e)}name(e){return new Or.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};pr.Scope=od;var ad=class extends Or.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Or._)`.${new Or.Name(r)}[${n}]`}};pr.ValueScopeName=ad;var z6=(0,Or._)`\n`,Kg=class extends od{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?z6:Or.nil}}get(){return this._scope}name(e){return new ad(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Or._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Or.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,Ug.Started);let l=r(c);if(l){let f=this.opts.es5?pr.varKinds.var:pr.varKinds.const;i=(0,Or._)`${i}${f} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,Or._)`${i}${l}${this.opts._n}`;else throw new Hg(c);u.set(c,Ug.Completed)})}return i}};pr.ValueScope=Kg});var fe=_(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.or=me.and=me.not=me.CodeGen=me.operators=me.varKinds=me.ValueScopeName=me.ValueScope=me.Scope=me.Name=me.regexpCode=me.stringify=me.getProperty=me.nil=me.strConcat=me.str=me._=void 0;var Oe=Hu(),bn=Bg(),Ys=Hu();Object.defineProperty(me,"_",{enumerable:!0,get:function(){return Ys._}});Object.defineProperty(me,"str",{enumerable:!0,get:function(){return Ys.str}});Object.defineProperty(me,"strConcat",{enumerable:!0,get:function(){return Ys.strConcat}});Object.defineProperty(me,"nil",{enumerable:!0,get:function(){return Ys.nil}});Object.defineProperty(me,"getProperty",{enumerable:!0,get:function(){return Ys.getProperty}});Object.defineProperty(me,"stringify",{enumerable:!0,get:function(){return Ys.stringify}});Object.defineProperty(me,"regexpCode",{enumerable:!0,get:function(){return Ys.regexpCode}});Object.defineProperty(me,"Name",{enumerable:!0,get:function(){return Ys.Name}});var fd=Bg();Object.defineProperty(me,"Scope",{enumerable:!0,get:function(){return fd.Scope}});Object.defineProperty(me,"ValueScope",{enumerable:!0,get:function(){return fd.ValueScope}});Object.defineProperty(me,"ValueScopeName",{enumerable:!0,get:function(){return fd.ValueScopeName}});Object.defineProperty(me,"varKinds",{enumerable:!0,get:function(){return fd.varKinds}});me.operators={GT:new Oe._Code(">"),GTE:new Oe._Code(">="),LT:new Oe._Code("<"),LTE:new Oe._Code("<="),EQ:new Oe._Code("==="),NEQ:new Oe._Code("!=="),NOT:new Oe._Code("!"),OR:new Oe._Code("||"),AND:new Oe._Code("&&"),ADD:new Oe._Code("+")};var ys=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Gg=class extends ys{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?bn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=ea(this.rhs,e,r)),this}get names(){return this.rhs instanceof Oe._CodeOrName?this.rhs.names:{}}},ud=class extends ys{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Oe.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=ea(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Oe.Name?{}:{...this.lhs.names};return cd(e,this.rhs)}},Jg=class extends ud{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Wg=class extends ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Yg=class extends ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Xg=class extends ys{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Qg=class extends ys{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=ea(this.code,e,r),this}get names(){return this.code instanceof Oe._CodeOrName?this.code.names:{}}},Uu=class extends ys{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(H6(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Ui(e,r.names),{})}},gs=class extends Uu{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Zg=class extends Uu{},Zo=class extends gs{};Zo.kind="else";var zi=class t extends gs{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Zo(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(E1(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=ea(this.condition,e,r),this}get names(){let e=super.names;return cd(e,this.condition),this.else&&Ui(e,this.else.names),e}};zi.kind="if";var Hi=class extends gs{};Hi.kind="for";var e0=class extends Hi{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=ea(this.iteration,e,r),this}get names(){return Ui(super.names,this.iteration.names)}},t0=class extends Hi{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?bn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=cd(super.names,this.from);return cd(e,this.to)}},ld=class extends Hi{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=ea(this.iterable,e,r),this}get names(){return Ui(super.names,this.iterable.names)}},Ku=class extends gs{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Ku.kind="func";var Bu=class extends Uu{render(e){return"return "+super.render(e)}};Bu.kind="return";var r0=class extends gs{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Ui(e,this.catch.names),this.finally&&Ui(e,this.finally.names),e}},Gu=class extends gs{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Gu.kind="catch";var Ju=class extends gs{render(e){return"finally"+super.render(e)}};Ju.kind="finally";var n0=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new bn.Scope({parent:e}),this._nodes=[new Zg]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Gg(e,i,n)),i}const(e,r,n){return this._def(bn.varKinds.const,e,r,n)}let(e,r,n){return this._def(bn.varKinds.let,e,r,n)}var(e,r,n){return this._def(bn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new ud(e,r,n))}add(e,r){return this._leafNode(new Jg(e,me.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Oe.nil&&this._leafNode(new Qg(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Oe.addCodeArg)(r,s));return r.push("}"),new Oe._Code(r)}if(e,r,n){if(this._blockNode(new zi(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new zi(e))}else(){return this._elseNode(new Zo)}endIf(){return this._endBlockNode(zi,Zo)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new e0(e),r)}forRange(e,r,n,s,i=this.opts.es5?bn.varKinds.var:bn.varKinds.let){let o=this._scope.toName(e);return this._for(new t0(i,o,r,n),()=>s(o))}forOf(e,r,n,s=bn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Oe.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Oe._)`${o}.length`,a=>{this.var(i,(0,Oe._)`${o}[${a}]`),n(i)})}return this._for(new ld("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?bn.varKinds.var:bn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Oe._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new ld("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Hi)}label(e){return this._leafNode(new Wg(e))}break(e){return this._leafNode(new Yg(e))}return(e){let r=new Bu;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Bu)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new r0;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Gu(i),r(i)}return n&&(this._currNode=s.finally=new Ju,this.code(n)),this._endBlockNode(Gu,Ju)}throw(e){return this._leafNode(new Xg(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Oe.nil,n,s){return this._blockNode(new Ku(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Ku)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof zi))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};me.CodeGen=n0;function Ui(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function cd(t,e){return e instanceof Oe._CodeOrName?Ui(t,e.names):t}function ea(t,e,r){if(t instanceof Oe.Name)return n(t);if(!s(t))return t;return new Oe._Code(t._items.reduce((i,o)=>(o instanceof Oe.Name&&(o=n(o)),o instanceof Oe._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Oe._Code&&i._items.some(o=>o instanceof Oe.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function H6(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function E1(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Oe._)`!${s0(t)}`}me.not=E1;var U6=S1(me.operators.AND);function K6(...t){return t.reduce(U6)}me.and=K6;var B6=S1(me.operators.OR);function G6(...t){return t.reduce(B6)}me.or=G6;function S1(t){return(e,r)=>e===Oe.nil?r:r===Oe.nil?e:(0,Oe._)`${s0(e)} ${t} ${s0(r)}`}function s0(t){return t instanceof Oe.Name?t:(0,Oe._)`(${t})`}});var xe=_(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.checkStrictMode=ye.getErrorPath=ye.Type=ye.useFunc=ye.setEvaluated=ye.evaluatedPropsToName=ye.mergeEvaluated=ye.eachItem=ye.unescapeJsonPointer=ye.escapeJsonPointer=ye.escapeFragment=ye.unescapeFragment=ye.schemaRefOrVal=ye.schemaHasRulesButRef=ye.schemaHasRules=ye.checkUnknownRules=ye.alwaysValidSchema=ye.toHash=void 0;var nt=fe(),J6=Hu();function W6(t){let e={};for(let r of t)e[r]=!0;return e}ye.toHash=W6;function Y6(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(w1(t,e),!R1(e,t.self.RULES.all))}ye.alwaysValidSchema=Y6;function w1(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||N1(t,`unknown keyword: "${i}"`)}ye.checkUnknownRules=w1;function R1(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}ye.schemaHasRules=R1;function X6(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}ye.schemaHasRulesButRef=X6;function Q6({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,nt._)`${r}`}return(0,nt._)`${t}${e}${(0,nt.getProperty)(n)}`}ye.schemaRefOrVal=Q6;function Z6(t){return P1(decodeURIComponent(t))}ye.unescapeFragment=Z6;function e8(t){return encodeURIComponent(i0(t))}ye.escapeFragment=e8;function i0(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}ye.escapeJsonPointer=i0;function P1(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}ye.unescapeJsonPointer=P1;function t8(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}ye.eachItem=t8;function $1({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof nt.Name?(i instanceof nt.Name?t(s,i,o):e(s,i,o),o):i instanceof nt.Name?(e(s,o,i),i):r(i,o);return a===nt.Name&&!(u instanceof nt.Name)?n(s,u):u}}ye.mergeEvaluated={props:$1({mergeNames:(t,e,r)=>t.if((0,nt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,nt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,nt._)`${r} || {}`).code((0,nt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,nt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,nt._)`${r} || {}`),o0(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:T1}),items:$1({mergeNames:(t,e,r)=>t.if((0,nt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,nt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,nt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,nt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function T1(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,nt._)`{}`);return e!==void 0&&o0(t,r,e),r}ye.evaluatedPropsToName=T1;function o0(t,e,r){Object.keys(r).forEach(n=>t.assign((0,nt._)`${e}${(0,nt.getProperty)(n)}`,!0))}ye.setEvaluated=o0;var b1={};function r8(t,e){return t.scopeValue("func",{ref:e,code:b1[e.code]||(b1[e.code]=new J6._Code(e.code))})}ye.useFunc=r8;var O1;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(O1=ye.Type||(ye.Type={}));function n8(t,e,r){if(t instanceof nt.Name){let n=e===O1.Num;return r?n?(0,nt._)`"[" + ${t} + "]"`:(0,nt._)`"['" + ${t} + "']"`:n?(0,nt._)`"/" + ${t}`:(0,nt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,nt.getProperty)(t).toString():"/"+i0(t)}ye.getErrorPath=n8;function N1(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}ye.checkStrictMode=N1});var _s=_(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});var or=fe(),s8={data:new or.Name("data"),valCxt:new or.Name("valCxt"),instancePath:new or.Name("instancePath"),parentData:new or.Name("parentData"),parentDataProperty:new or.Name("parentDataProperty"),rootData:new or.Name("rootData"),dynamicAnchors:new or.Name("dynamicAnchors"),vErrors:new or.Name("vErrors"),errors:new or.Name("errors"),this:new or.Name("this"),self:new or.Name("self"),scope:new or.Name("scope"),json:new or.Name("json"),jsonPos:new or.Name("jsonPos"),jsonLen:new or.Name("jsonLen"),jsonPart:new or.Name("jsonPart")};a0.default=s8});var Wu=_(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.extendErrors=ar.resetErrorsCount=ar.reportExtraError=ar.reportError=ar.keyword$DataError=ar.keywordError=void 0;var Ae=fe(),dd=xe(),mr=_s();ar.keywordError={message:({keyword:t})=>(0,Ae.str)`must pass "${t}" keyword validation`};ar.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ae.str)`"${t}" keyword must be ${e} ($data)`:(0,Ae.str)`"${t}" keyword is invalid ($data)`};function i8(t,e=ar.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=A1(t,e,r);n??(o||a)?I1(i,u):C1(s,(0,Ae._)`[${u}]`)}ar.reportError=i8;function o8(t,e=ar.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=A1(t,e,r);I1(s,a),i||o||C1(n,mr.default.vErrors)}ar.reportExtraError=o8;function a8(t,e){t.assign(mr.default.errors,e),t.if((0,Ae._)`${mr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ae._)`${mr.default.vErrors}.length`,e),()=>t.assign(mr.default.vErrors,null)))}ar.resetErrorsCount=a8;function u8({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,mr.default.errors,a=>{t.const(o,(0,Ae._)`${mr.default.vErrors}[${a}]`),t.if((0,Ae._)`${o}.instancePath === undefined`,()=>t.assign((0,Ae._)`${o}.instancePath`,(0,Ae.strConcat)(mr.default.instancePath,i.errorPath))),t.assign((0,Ae._)`${o}.schemaPath`,(0,Ae.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ae._)`${o}.schema`,r),t.assign((0,Ae._)`${o}.data`,n))})}ar.extendErrors=u8;function I1(t,e){let r=t.const("err",e);t.if((0,Ae._)`${mr.default.vErrors} === null`,()=>t.assign(mr.default.vErrors,(0,Ae._)`[${r}]`),(0,Ae._)`${mr.default.vErrors}.push(${r})`),t.code((0,Ae._)`${mr.default.errors}++`)}function C1(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ae._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ae._)`${n}.errors`,e),r.return(!1))}var Ki={keyword:new Ae.Name("keyword"),schemaPath:new Ae.Name("schemaPath"),params:new Ae.Name("params"),propertyName:new Ae.Name("propertyName"),message:new Ae.Name("message"),schema:new Ae.Name("schema"),parentSchema:new Ae.Name("parentSchema")};function A1(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ae._)`{}`:l8(t,e,r)}function l8(t,e,r={}){let{gen:n,it:s}=t,i=[c8(s,r),f8(t,r)];return d8(t,e,i),n.object(...i)}function c8({errorPath:t},{instancePath:e}){let r=e?(0,Ae.str)`${t}${(0,dd.getErrorPath)(e,dd.Type.Str)}`:t;return[mr.default.instancePath,(0,Ae.strConcat)(mr.default.instancePath,r)]}function f8({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ae.str)`${e}/${t}`;return r&&(s=(0,Ae.str)`${s}${(0,dd.getErrorPath)(r,dd.Type.Str)}`),[Ki.schemaPath,s]}function d8(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:f}=a;n.push([Ki.keyword,s],[Ki.params,typeof e=="function"?e(t):e||(0,Ae._)`{}`]),u.messages&&n.push([Ki.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([Ki.schema,o],[Ki.parentSchema,(0,Ae._)`${l}${f}`],[mr.default.data,i]),c&&n.push([Ki.propertyName,c])}});var q1=_(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.boolOrEmptySchema=ta.topBoolOrEmptySchema=void 0;var h8=Wu(),p8=fe(),m8=_s(),y8={message:"boolean schema is false"};function g8(t){let{gen:e,schema:r,validateName:n}=t;r===!1?k1(t,!1):typeof r=="object"&&r.$async===!0?e.return(m8.default.data):(e.assign((0,p8._)`${n}.errors`,null),e.return(!0))}ta.topBoolOrEmptySchema=g8;function _8(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),k1(t)):r.var(e,!0)}ta.boolOrEmptySchema=_8;function k1(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,h8.reportError)(s,y8,void 0,e)}});var u0=_(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.getRules=ra.isJSONType=void 0;var v8=["string","number","integer","boolean","null","object","array"],E8=new Set(v8);function S8(t){return typeof t=="string"&&E8.has(t)}ra.isJSONType=S8;function $8(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ra.getRules=$8});var l0=_(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.shouldUseRule=Xs.shouldUseGroup=Xs.schemaHasRulesForType=void 0;function b8({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&j1(t,n)}Xs.schemaHasRulesForType=b8;function j1(t,e){return e.rules.some(r=>D1(t,r))}Xs.shouldUseGroup=j1;function D1(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Xs.shouldUseRule=D1});var Xu=_(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.reportTypeError=Bt.checkDataTypes=Bt.checkDataType=Bt.coerceAndCheckDataType=Bt.getJSONTypes=Bt.getSchemaTypes=Bt.DataType=void 0;var w8=u0(),R8=l0(),P8=Wu(),le=fe(),L1=xe(),Yu;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Yu=Bt.DataType||(Bt.DataType={}));function T8(t){let e=x1(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Bt.getSchemaTypes=T8;function x1(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(w8.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Bt.getJSONTypes=x1;function O8(t,e){let{gen:r,data:n,opts:s}=t,i=N8(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,R8.schemaHasRulesForType)(t,e[0]));if(o){let a=f0(e,n,s.strictNumbers,Yu.Wrong);r.if(a,()=>{i.length?I8(t,e,i):d0(t)})}return o}Bt.coerceAndCheckDataType=O8;var M1=new Set(["string","number","integer","boolean","null"]);function N8(t,e){return e?t.filter(r=>M1.has(r)||e==="array"&&r==="array"):[]}function I8(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,le._)`typeof ${s}`),a=n.let("coerced",(0,le._)`undefined`);i.coerceTypes==="array"&&n.if((0,le._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,le._)`${s}[0]`).assign(o,(0,le._)`typeof ${s}`).if(f0(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,le._)`${a} !== undefined`);for(let c of r)(M1.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),d0(t),n.endIf(),n.if((0,le._)`${a} !== undefined`,()=>{n.assign(s,a),C8(t,a)});function u(c){switch(c){case"string":n.elseIf((0,le._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,le._)`"" + ${s}`).elseIf((0,le._)`${s} === null`).assign(a,(0,le._)`""`);return;case"number":n.elseIf((0,le._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,le._)`+${s}`);return;case"integer":n.elseIf((0,le._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,le._)`+${s}`);return;case"boolean":n.elseIf((0,le._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,le._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,le._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,le._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,le._)`[${s}]`)}}}function C8({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,le._)`${e} !== undefined`,()=>t.assign((0,le._)`${e}[${r}]`,n))}function c0(t,e,r,n=Yu.Correct){let s=n===Yu.Correct?le.operators.EQ:le.operators.NEQ,i;switch(t){case"null":return(0,le._)`${e} ${s} null`;case"array":i=(0,le._)`Array.isArray(${e})`;break;case"object":i=(0,le._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,le._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,le._)`typeof ${e} ${s} ${t}`}return n===Yu.Correct?i:(0,le.not)(i);function o(a=le.nil){return(0,le.and)((0,le._)`typeof ${e} == "number"`,a,r?(0,le._)`isFinite(${e})`:le.nil)}}Bt.checkDataType=c0;function f0(t,e,r,n){if(t.length===1)return c0(t[0],e,r,n);let s,i=(0,L1.toHash)(t);if(i.array&&i.object){let o=(0,le._)`typeof ${e} != "object"`;s=i.null?o:(0,le._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=le.nil;i.number&&delete i.integer;for(let o in i)s=(0,le.and)(s,c0(o,e,r,n));return s}Bt.checkDataTypes=f0;var A8={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,le._)`{type: ${t}}`:(0,le._)`{type: ${e}}`};function d0(t){let e=k8(t);(0,P8.reportError)(e,A8)}Bt.reportTypeError=d0;function k8(t){let{gen:e,data:r,schema:n}=t,s=(0,L1.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var V1=_(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.assignDefaults=void 0;var na=fe(),q8=xe();function j8(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)F1(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>F1(t,i,s.default))}hd.assignDefaults=j8;function F1(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,na._)`${i}${(0,na.getProperty)(e)}`;if(s){(0,q8.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,na._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,na._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,na._)`${a} = ${(0,na.stringify)(r)}`)}});var en=_(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.validateUnion=Ze.validateArray=Ze.usePattern=Ze.callValidateCode=Ze.schemaProperties=Ze.allSchemaProperties=Ze.noPropertyInData=Ze.propertyInData=Ze.isOwnProperty=Ze.hasPropFunc=Ze.reportMissingProp=Ze.checkMissingProp=Ze.checkReportMissingProp=void 0;var ct=fe(),h0=xe(),Qs=_s(),D8=xe();function L8(t,e){let{gen:r,data:n,it:s}=t;r.if(m0(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,ct._)`${e}`},!0),t.error()})}Ze.checkReportMissingProp=L8;function x8({gen:t,data:e,it:{opts:r}},n,s){return(0,ct.or)(...n.map(i=>(0,ct.and)(m0(t,e,i,r.ownProperties),(0,ct._)`${s} = ${i}`)))}Ze.checkMissingProp=x8;function M8(t,e){t.setParams({missingProperty:e},!0),t.error()}Ze.reportMissingProp=M8;function z1(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ct._)`Object.prototype.hasOwnProperty`})}Ze.hasPropFunc=z1;function p0(t,e,r){return(0,ct._)`${z1(t)}.call(${e}, ${r})`}Ze.isOwnProperty=p0;function F8(t,e,r,n){let s=(0,ct._)`${e}${(0,ct.getProperty)(r)} !== undefined`;return n?(0,ct._)`${s} && ${p0(t,e,r)}`:s}Ze.propertyInData=F8;function m0(t,e,r,n){let s=(0,ct._)`${e}${(0,ct.getProperty)(r)} === undefined`;return n?(0,ct.or)(s,(0,ct.not)(p0(t,e,r))):s}Ze.noPropertyInData=m0;function H1(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ze.allSchemaProperties=H1;function V8(t,e){return H1(e).filter(r=>!(0,h0.alwaysValidSchema)(t,e[r]))}Ze.schemaProperties=V8;function z8({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,ct._)`${t}, ${e}, ${n}${s}`:e,f=[[Qs.default.instancePath,(0,ct.strConcat)(Qs.default.instancePath,i)],[Qs.default.parentData,o.parentData],[Qs.default.parentDataProperty,o.parentDataProperty],[Qs.default.rootData,Qs.default.rootData]];o.opts.dynamicRef&&f.push([Qs.default.dynamicAnchors,Qs.default.dynamicAnchors]);let h=(0,ct._)`${l}, ${r.object(...f)}`;return u!==ct.nil?(0,ct._)`${a}.call(${u}, ${h})`:(0,ct._)`${a}(${h})`}Ze.callValidateCode=z8;var H8=(0,ct._)`new RegExp`;function U8({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ct._)`${s.code==="new RegExp"?H8:(0,D8.useFunc)(t,s)}(${r}, ${n})`})}Ze.usePattern=U8;function K8(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,ct._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:h0.Type.Num},i),e.if((0,ct.not)(i),a)})}}Ze.validateArray=K8;function B8(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,h0.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,ct._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,ct.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ze.validateUnion=B8});var B1=_(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.validateKeywordUsage=Kn.validSchemaType=Kn.funcKeywordCode=Kn.macroKeywordCode=void 0;var yr=fe(),Bi=_s(),G8=en(),J8=Wu();function W8(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=K1(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:yr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}Kn.macroKeywordCode=W8;function Y8(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;Q8(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=K1(n,s,c),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&U1(t),g(()=>t.error());else{let E=e.async?d():p();e.modifying&&U1(t),g(()=>X8(t,E))}}function d(){let E=n.let("ruleErrs",null);return n.try(()=>m((0,yr._)`await `),$=>n.assign(f,!1).if((0,yr._)`${$} instanceof ${u.ValidationError}`,()=>n.assign(E,(0,yr._)`${$}.errors`),()=>n.throw($))),E}function p(){let E=(0,yr._)`${l}.errors`;return n.assign(E,null),m(yr.nil),E}function m(E=e.async?(0,yr._)`await `:yr.nil){let $=u.opts.passContext?Bi.default.this:Bi.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,yr._)`${E}${(0,G8.callValidateCode)(t,l,$,v)}`,e.modifying)}function g(E){var $;n.if((0,yr.not)(($=e.valid)!==null&&$!==void 0?$:f),E)}}Kn.funcKeywordCode=Y8;function U1(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,yr._)`${n.parentData}[${n.parentDataProperty}]`))}function X8(t,e){let{gen:r}=t;r.if((0,yr._)`Array.isArray(${e})`,()=>{r.assign(Bi.default.vErrors,(0,yr._)`${Bi.default.vErrors} === null ? ${e} : ${Bi.default.vErrors}.concat(${e})`).assign(Bi.default.errors,(0,yr._)`${Bi.default.vErrors}.length`),(0,J8.extendErrors)(t)},()=>t.error())}function Q8({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function K1(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,yr.stringify)(r)})}function Z8(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Kn.validSchemaType=Z8;function eJ({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Kn.validateKeywordUsage=eJ});var J1=_(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.extendSubschemaMode=Zs.extendSubschemaData=Zs.getSubschema=void 0;var Bn=fe(),G1=xe();function tJ(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Bn._)`${t.schemaPath}${(0,Bn.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Bn._)`${t.schemaPath}${(0,Bn.getProperty)(e)}${(0,Bn.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,G1.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Zs.getSubschema=tJ;function rJ(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:f}=e,h=a.let("data",(0,Bn._)`${e.data}${(0,Bn.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Bn.str)`${c}${(0,G1.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Bn._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof Bn.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}Zs.extendSubschemaData=rJ;function nJ(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Zs.extendSubschemaMode=nJ});var Y1=_((gye,W1)=>{"use strict";var ei=W1.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};pd(e,n,s,t,"",t)};ei.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ei.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ei.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ei.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function pd(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var f=n[l];if(Array.isArray(f)){if(l in ei.arrayKeywords)for(var h=0;h<f.length;h++)pd(t,e,r,f[h],s+"/"+l+"/"+h,i,s,l,n,h)}else if(l in ei.propsKeywords){if(f&&typeof f=="object")for(var d in f)pd(t,e,r,f[d],s+"/"+l+"/"+sJ(d),i,s,l,n,d)}else(l in ei.keywords||t.allKeys&&!(l in ei.skipKeywords))&&pd(t,e,r,f,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function sJ(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Qu=_(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getSchemaRefs=Nr.resolveUrl=Nr.normalizeId=Nr._getFullPath=Nr.getFullPath=Nr.inlineRef=void 0;var iJ=xe(),oJ=Yr(),aJ=Y1(),uJ=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function lJ(t,e=!0){return typeof t=="boolean"?!0:e===!0?!y0(t):e?X1(t)<=e:!1}Nr.inlineRef=lJ;var cJ=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function y0(t){for(let e in t){if(cJ.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(y0)||typeof r=="object"&&y0(r))return!0}return!1}function X1(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!uJ.has(r)&&(typeof t[r]=="object"&&(0,iJ.eachItem)(t[r],n=>e+=X1(n)),e===1/0))return 1/0}return e}function Q1(t,e="",r){r!==!1&&(e=sa(e));let n=t.parse(e);return Z1(t,n)}Nr.getFullPath=Q1;function Z1(t,e){return t.serialize(e).split("#")[0]+"#"}Nr._getFullPath=Z1;var fJ=/#\/?$/;function sa(t){return t?t.replace(fJ,""):""}Nr.normalizeId=sa;function dJ(t,e,r){return r=sa(r),t.resolve(e,r)}Nr.resolveUrl=dJ;var hJ=/^[a-z_][-a-z0-9._]*$/i;function pJ(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=sa(t[r]||e),i={"":s},o=Q1(n,s,!1),a={},u=new Set;return aJ(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,g=i[p];typeof f[r]=="string"&&(g=E.call(this,f[r])),$.call(this,f.$anchor),$.call(this,f.$dynamicAnchor),i[h]=g;function E(v){let y=this.opts.uriResolver.resolve;if(v=sa(g?y(g,v):v),u.has(v))throw l(v);u.add(v);let S=this.refs[v];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(f,S.schema,v):v!==sa(m)&&(v[0]==="#"?(c(f,a[v],v),a[v]=f):this.refs[v]=m),v}function $(v){if(typeof v=="string"){if(!hJ.test(v))throw new Error(`invalid anchor "${v}"`);E.call(this,`#${v}`)}}}),a;function c(f,h,d){if(h!==void 0&&!oJ(f,h))throw l(d)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Nr.getSchemaRefs=pJ});var tl=_(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.getData=ti.KeywordCxt=ti.validateFunctionCode=void 0;var sN=q1(),eN=Xu(),_0=l0(),md=Xu(),mJ=V1(),el=B1(),g0=J1(),W=fe(),ne=_s(),yJ=Qu(),vs=xe(),Zu=Wu();function gJ(t){if(aN(t)&&(uN(t),oN(t))){EJ(t);return}iN(t,()=>(0,sN.topBoolOrEmptySchema)(t))}ti.validateFunctionCode=gJ;function iN({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,W._)`${ne.default.data}, ${ne.default.valCxt}`,n.$async,()=>{t.code((0,W._)`"use strict"; ${tN(r,s)}`),vJ(t,s),t.code(i)}):t.func(e,(0,W._)`${ne.default.data}, ${_J(s)}`,n.$async,()=>t.code(tN(r,s)).code(i))}function _J(t){return(0,W._)`{${ne.default.instancePath}="", ${ne.default.parentData}, ${ne.default.parentDataProperty}, ${ne.default.rootData}=${ne.default.data}${t.dynamicRef?(0,W._)`, ${ne.default.dynamicAnchors}={}`:W.nil}}={}`}function vJ(t,e){t.if(ne.default.valCxt,()=>{t.var(ne.default.instancePath,(0,W._)`${ne.default.valCxt}.${ne.default.instancePath}`),t.var(ne.default.parentData,(0,W._)`${ne.default.valCxt}.${ne.default.parentData}`),t.var(ne.default.parentDataProperty,(0,W._)`${ne.default.valCxt}.${ne.default.parentDataProperty}`),t.var(ne.default.rootData,(0,W._)`${ne.default.valCxt}.${ne.default.rootData}`),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,W._)`${ne.default.valCxt}.${ne.default.dynamicAnchors}`)},()=>{t.var(ne.default.instancePath,(0,W._)`""`),t.var(ne.default.parentData,(0,W._)`undefined`),t.var(ne.default.parentDataProperty,(0,W._)`undefined`),t.var(ne.default.rootData,ne.default.data),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,W._)`{}`)})}function EJ(t){let{schema:e,opts:r,gen:n}=t;iN(t,()=>{r.$comment&&e.$comment&&cN(t),RJ(t),n.let(ne.default.vErrors,null),n.let(ne.default.errors,0),r.unevaluated&&SJ(t),lN(t),OJ(t)})}function SJ(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,W._)`${r}.evaluated`),e.if((0,W._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,W._)`${t.evaluated}.props`,(0,W._)`undefined`)),e.if((0,W._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,W._)`${t.evaluated}.items`,(0,W._)`undefined`))}function tN(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,W._)`/*# sourceURL=${r} */`:W.nil}function $J(t,e){if(aN(t)&&(uN(t),oN(t))){bJ(t,e);return}(0,sN.boolOrEmptySchema)(t,e)}function oN({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function aN(t){return typeof t.schema!="boolean"}function bJ(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&cN(t),PJ(t),TJ(t);let i=n.const("_errs",ne.default.errors);lN(t,i),n.var(e,(0,W._)`${i} === ${ne.default.errors}`)}function uN(t){(0,vs.checkUnknownRules)(t),wJ(t)}function lN(t,e){if(t.opts.jtd)return rN(t,[],!1,e);let r=(0,eN.getSchemaTypes)(t.schema),n=(0,eN.coerceAndCheckDataType)(t,r);rN(t,r,!n,e)}function wJ(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,vs.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function RJ(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,vs.checkStrictMode)(t,"default is ignored in the schema root")}function PJ(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,yJ.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function TJ(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function cN({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,W._)`${ne.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,W.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,W._)`${ne.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function OJ(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,W._)`${ne.default.errors} === 0`,()=>e.return(ne.default.data),()=>e.throw((0,W._)`new ${s}(${ne.default.vErrors})`)):(e.assign((0,W._)`${n}.errors`,ne.default.vErrors),i.unevaluated&&NJ(t),e.return((0,W._)`${ne.default.errors} === 0`))}function NJ({gen:t,evaluated:e,props:r,items:n}){r instanceof W.Name&&t.assign((0,W._)`${e}.props`,r),n instanceof W.Name&&t.assign((0,W._)`${e}.items`,n)}function rN(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,vs.schemaHasRulesButRef)(i,l))){s.block(()=>dN(t,"$ref",l.all.$ref.definition));return}u.jtd||IJ(t,e),s.block(()=>{for(let h of l.rules)f(h);f(l.post)});function f(h){(0,_0.shouldUseGroup)(i,h)&&(h.type?(s.if((0,md.checkDataType)(h.type,o,u.strictNumbers)),nN(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,md.reportTypeError)(t)),s.endIf()):nN(t,h),a||s.if((0,W._)`${ne.default.errors} === ${n||0}`))}}function nN(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,mJ.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,_0.shouldUseRule)(n,i)&&dN(t,i.keyword,i.definition,e.type)})}function IJ(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(CJ(t,e),t.opts.allowUnionTypes||AJ(t,e),kJ(t,t.dataTypes))}function CJ(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{fN(t.dataTypes,r)||v0(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),jJ(t,e)}}function AJ(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&v0(t,"use allowUnionTypes to allow union type keyword")}function kJ(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,_0.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>qJ(e,o))&&v0(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function qJ(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function fN(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function jJ(t,e){let r=[];for(let n of t.dataTypes)fN(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function v0(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,vs.checkStrictMode)(t,e,t.opts.strictTypes)}var yd=class{constructor(e,r,n){if((0,el.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,vs.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",hN(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,el.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ne.default.errors))}result(e,r,n){this.failResult((0,W.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,W.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,W._)`${r} !== undefined && (${(0,W.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Zu.reportExtraError:Zu.reportError)(this,this.def.error,r)}$dataError(){(0,Zu.reportError)(this,this.def.$dataError||Zu.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Zu.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=W.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=W.nil,r=W.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,W.or)((0,W._)`${s} === undefined`,r)),e!==W.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==W.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,W.or)(o(),a());function o(){if(n.length){if(!(r instanceof W.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,W._)`${(0,md.checkDataTypes)(u,r,i.opts.strictNumbers,md.DataType.Wrong)}`}return W.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,W._)`!${u}(${r})`}return W.nil}}subschema(e,r){let n=(0,g0.getSubschema)(this.it,e);(0,g0.extendSubschemaData)(n,this.it,e),(0,g0.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return $J(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=vs.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=vs.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,W.Name)),!0}};ti.KeywordCxt=yd;function dN(t,e,r,n){let s=new yd(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,el.funcKeywordCode)(s,r):"macro"in r?(0,el.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,el.funcKeywordCode)(s,r)}var DJ=/^\/(?:[^~]|~0|~1)*$/,LJ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function hN(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return ne.default.rootData;if(t[0]==="/"){if(!DJ.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=ne.default.rootData}else{let c=LJ.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,W._)`${i}${(0,W.getProperty)((0,vs.unescapeJsonPointer)(c))}`,o=(0,W._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}ti.getData=hN});var gd=_(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});var E0=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};S0.default=E0});var _d=_(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});var $0=Qu(),b0=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,$0.resolveUrl)(e,r,n),this.missingSchema=(0,$0.normalizeId)((0,$0.getFullPath)(e,this.missingRef))}};w0.default=b0});var Ed=_(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.resolveSchema=tn.getCompilingSchema=tn.resolveRef=tn.compileSchema=tn.SchemaEnv=void 0;var wn=fe(),xJ=gd(),Gi=_s(),Rn=Qu(),pN=xe(),MJ=tl(),ia=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Rn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};tn.SchemaEnv=ia;function P0(t){let e=mN.call(this,t);if(e)return e;let r=(0,Rn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new wn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:xJ.default,code:(0,wn._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:Gi.default.data,parentData:Gi.default.parentData,parentDataProperty:Gi.default.parentDataProperty,dataNames:[Gi.default.data],dataPathArr:[wn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,wn.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:wn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,wn._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,MJ.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(Gi.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let d=new Function(`${Gi.default.self}`,`${Gi.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=c;d.evaluated={props:p instanceof wn.Name?void 0:p,items:m instanceof wn.Name?void 0:m,dynamicProps:p instanceof wn.Name,dynamicItems:m instanceof wn.Name},d.source&&(d.source.evaluated=(0,wn.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),f}finally{this._compilations.delete(t)}}tn.compileSchema=P0;function FJ(t,e,r){var n;r=(0,Rn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=HJ.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new ia({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=VJ.call(this,i)}tn.resolveRef=FJ;function VJ(t){return(0,Rn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:P0.call(this,t)}function mN(t){for(let e of this._compilations)if(zJ(e,t))return e}tn.getCompilingSchema=mN;function zJ(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function HJ(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||vd.call(this,t,e)}function vd(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Rn._getFullPath)(this.opts.uriResolver,r),s=(0,Rn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return R0.call(this,r,t);let i=(0,Rn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=vd.call(this,t,o);return typeof a?.schema!="object"?void 0:R0.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||P0.call(this,o),i===(0,Rn.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,Rn.resolveUrl)(this.opts.uriResolver,s,c)),new ia({schema:a,schemaId:u,root:t,baseId:s})}return R0.call(this,r,o)}}tn.resolveSchema=vd;var UJ=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function R0(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,pN.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!UJ.has(a)&&c&&(e=(0,Rn.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,pN.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Rn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=vd.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new ia({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var yN=_((bye,KJ)=>{KJ.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var _N=_(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});var gN=Ff();gN.code='require("ajv/dist/runtime/uri").default';T0.default=gN});var PN=_(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.CodeGen=Gt.Name=Gt.nil=Gt.stringify=Gt.str=Gt._=Gt.KeywordCxt=void 0;var BJ=tl();Object.defineProperty(Gt,"KeywordCxt",{enumerable:!0,get:function(){return BJ.KeywordCxt}});var oa=fe();Object.defineProperty(Gt,"_",{enumerable:!0,get:function(){return oa._}});Object.defineProperty(Gt,"str",{enumerable:!0,get:function(){return oa.str}});Object.defineProperty(Gt,"stringify",{enumerable:!0,get:function(){return oa.stringify}});Object.defineProperty(Gt,"nil",{enumerable:!0,get:function(){return oa.nil}});Object.defineProperty(Gt,"Name",{enumerable:!0,get:function(){return oa.Name}});Object.defineProperty(Gt,"CodeGen",{enumerable:!0,get:function(){return oa.CodeGen}});var GJ=gd(),bN=_d(),JJ=u0(),rl=Ed(),WJ=fe(),nl=Qu(),Sd=Xu(),N0=xe(),vN=yN(),YJ=_N(),wN=(t,e)=>new RegExp(t,e);wN.code="new RegExp";var XJ=["removeAdditional","useDefaults","coerceTypes"],QJ=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ZJ={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},eW={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},EN=200;function tW(t){var e,r,n,s,i,o,a,u,c,l,f,h,d,p,m,g,E,$,v,y,S,N,w,T,A;let R=t.strict,j=(e=t.code)===null||e===void 0?void 0:e.optimize,q=j===!0||j===void 0?1:j||0,D=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:wN,ee=(s=t.uriResolver)!==null&&s!==void 0?s:YJ.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:R)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:R)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:R)!==null&&l!==void 0?l:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:R)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:R)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:q,regExp:D}:{optimize:q,regExp:D},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:EN,loopEnum:(g=t.loopEnum)!==null&&g!==void 0?g:EN,meta:(E=t.meta)!==null&&E!==void 0?E:!0,messages:($=t.messages)!==null&&$!==void 0?$:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(y=t.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:(N=t.validateSchema)!==null&&N!==void 0?N:!0,validateFormats:(w=t.validateFormats)!==null&&w!==void 0?w:!0,unicodeRegExp:(T=t.unicodeRegExp)!==null&&T!==void 0?T:!0,int32range:(A=t.int32range)!==null&&A!==void 0?A:!0,uriResolver:ee}}var sl=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...tW(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new WJ.ValueScope({scope:{},prefixes:QJ,es5:r,lines:n}),this.logger=aW(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,JJ.getRules)(),SN.call(this,ZJ,e,"NOT SUPPORTED"),SN.call(this,eW,e,"DEPRECATED","warn"),this._metaOpts=iW.call(this),e.formats&&nW.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&sW.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),rW.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=vN;n==="id"&&(s={...vN},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,f){await i.call(this,l.$schema);let h=this._addSchema(l,f);return h.validate||o.call(this,h)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(f){if(!(f instanceof bN.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:f}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${f} cannot be resolved`)}async function u(l){let f=await c.call(this,l);this.refs[l]||await i.call(this,f.$schema),this.refs[l]||this.addSchema(f,l,r)}async function c(l){let f=this._loading[l];if(f)return f;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,nl.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=$N.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new rl.SchemaEnv({schema:{},schemaId:n});if(r=rl.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=$N.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,nl.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(lW.call(this,n,r),!r)return(0,N0.eachItem)(n,i=>O0.call(this,i)),this;fW.call(this,r);let s={...r,type:(0,Sd.getJSONTypes)(r.type),schemaType:(0,Sd.getJSONTypes)(r.schemaType)};return(0,N0.eachItem)(n,s.type.length===0?i=>O0.call(this,i,s):i=>s.type.forEach(o=>O0.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=RN(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,nl.normalizeId)(o||n);let c=nl.getSchemaRefs.call(this,e,n);return u=new rl.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):rl.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{rl.compileSchema.call(this,e)}finally{this.opts=r}}};Gt.default=sl;sl.ValidationError=GJ.default;sl.MissingRefError=bN.default;function SN(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function $N(t){return t=(0,nl.normalizeId)(t),this.schemas[t]||this.refs[t]}function rW(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function nW(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function sW(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function iW(){let t={...this.opts};for(let e of XJ)delete t[e];return t}var oW={log(){},warn(){},error(){}};function aW(t){if(t===!1)return oW;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var uW=/^[a-z_$][a-z0-9_$:-]*$/i;function lW(t,e){let{RULES:r}=this;if((0,N0.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!uW.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function O0(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Sd.getJSONTypes)(e.type),schemaType:(0,Sd.getJSONTypes)(e.schemaType)}};e.before?cW.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function cW(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function fW(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=RN(e)),t.validateSchema=this.compile(e,!0))}var dW={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function RN(t){return{anyOf:[t,dW]}}});var TN=_(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});var hW={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};I0.default=hW});var CN=_(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.callRef=Ji.getValidate=void 0;var pW=_d(),ON=en(),Ir=fe(),aa=_s(),NN=Ed(),$d=xe(),mW={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return f();let l=NN.resolveRef.call(u,c,s,r);if(l===void 0)throw new pW.default(n.opts.uriResolver,s,r);if(l instanceof NN.SchemaEnv)return h(l);return d(l);function f(){if(i===c)return bd(t,o,i,i.$async);let p=e.scopeValue("root",{ref:c});return bd(t,(0,Ir._)`${p}.validate`,c,c.$async)}function h(p){let m=IN(t,p);bd(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ir.stringify)(p)}:{ref:p}),g=e.name("valid"),E=t.subschema({schema:p,dataTypes:[],schemaPath:Ir.nil,topSchemaRef:m,errSchemaPath:r},g);t.mergeEvaluated(E),t.ok(g)}}};function IN(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ir._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Ji.getValidate=IN;function bd(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?aa.default.this:Ir.nil;n?l():f();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,Ir._)`await ${(0,ON.callValidateCode)(t,e,c)}`),d(e),o||s.assign(p,!0)},m=>{s.if((0,Ir._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function f(){t.result((0,ON.callValidateCode)(t,e,c),()=>d(e),()=>h(e))}function h(p){let m=(0,Ir._)`${p}.errors`;s.assign(aa.default.vErrors,(0,Ir._)`${aa.default.vErrors} === null ? ${m} : ${aa.default.vErrors}.concat(${m})`),s.assign(aa.default.errors,(0,Ir._)`${aa.default.vErrors}.length`)}function d(p){var m;if(!i.opts.unevaluated)return;let g=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=$d.mergeEvaluated.props(s,g.props,i.props));else{let E=s.var("props",(0,Ir._)`${p}.evaluated.props`);i.props=$d.mergeEvaluated.props(s,E,i.props,Ir.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=$d.mergeEvaluated.items(s,g.items,i.items));else{let E=s.var("items",(0,Ir._)`${p}.evaluated.items`);i.items=$d.mergeEvaluated.items(s,E,i.items,Ir.Name)}}}Ji.callRef=bd;Ji.default=mW});var AN=_(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});var yW=TN(),gW=CN(),_W=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",yW.default,gW.default];C0.default=_W});var kN=_(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});var wd=fe(),ri=wd.operators,Rd={maximum:{okStr:"<=",ok:ri.LTE,fail:ri.GT},minimum:{okStr:">=",ok:ri.GTE,fail:ri.LT},exclusiveMaximum:{okStr:"<",ok:ri.LT,fail:ri.GTE},exclusiveMinimum:{okStr:">",ok:ri.GT,fail:ri.LTE}},vW={message:({keyword:t,schemaCode:e})=>(0,wd.str)`must be ${Rd[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,wd._)`{comparison: ${Rd[t].okStr}, limit: ${e}}`},EW={keyword:Object.keys(Rd),type:"number",schemaType:"number",$data:!0,error:vW,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,wd._)`${r} ${Rd[e].fail} ${n} || isNaN(${r})`)}};A0.default=EW});var qN=_(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});var il=fe(),SW={message:({schemaCode:t})=>(0,il.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,il._)`{multipleOf: ${t}}`},$W={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:SW,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,il._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,il._)`${o} !== parseInt(${o})`;t.fail$data((0,il._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};k0.default=$W});var DN=_(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});function jN(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}q0.default=jN;jN.code='require("ajv/dist/runtime/ucs2length").default'});var LN=_(j0=>{"use strict";Object.defineProperty(j0,"__esModule",{value:!0});var Wi=fe(),bW=xe(),wW=DN(),RW={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Wi.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Wi._)`{limit: ${t}}`},PW={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:RW,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Wi.operators.GT:Wi.operators.LT,o=s.opts.unicode===!1?(0,Wi._)`${r}.length`:(0,Wi._)`${(0,bW.useFunc)(t.gen,wW.default)}(${r})`;t.fail$data((0,Wi._)`${o} ${i} ${n}`)}};j0.default=PW});var xN=_(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});var TW=en(),Pd=fe(),OW={message:({schemaCode:t})=>(0,Pd.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Pd._)`{pattern: ${t}}`},NW={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:OW,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Pd._)`(new RegExp(${s}, ${o}))`:(0,TW.usePattern)(t,n);t.fail$data((0,Pd._)`!${a}.test(${e})`)}};D0.default=NW});var MN=_(L0=>{"use strict";Object.defineProperty(L0,"__esModule",{value:!0});var ol=fe(),IW={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,ol.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,ol._)`{limit: ${t}}`},CW={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:IW,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?ol.operators.GT:ol.operators.LT;t.fail$data((0,ol._)`Object.keys(${r}).length ${s} ${n}`)}};L0.default=CW});var FN=_(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});var al=en(),ul=fe(),AW=xe(),kW={message:({params:{missingProperty:t}})=>(0,ul.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,ul._)`{missingProperty: ${t}}`},qW={keyword:"required",type:"object",schemaType:"array",$data:!0,error:kW,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let g=o.schemaEnv.baseId+o.errSchemaPath,E=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,AW.checkStrictMode)(o,E,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(ul.nil,f);else for(let d of r)(0,al.checkReportMissingProp)(t,d)}function l(){let d=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,al.checkMissingProp)(t,r,d)),(0,al.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,al.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,al.propertyInData)(e,s,d,a.ownProperties)),e.if((0,ul.not)(p),()=>{t.error(),e.break()})},ul.nil)}}};x0.default=qW});var VN=_(M0=>{"use strict";Object.defineProperty(M0,"__esModule",{value:!0});var ll=fe(),jW={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,ll.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,ll._)`{limit: ${t}}`},DW={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:jW,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?ll.operators.GT:ll.operators.LT;t.fail$data((0,ll._)`${r}.length ${s} ${n}`)}};M0.default=DW});var Td=_(F0=>{"use strict";Object.defineProperty(F0,"__esModule",{value:!0});var zN=Yr();zN.code='require("ajv/dist/runtime/equal").default';F0.default=zN});var HN=_(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});var V0=Xu(),Jt=fe(),LW=xe(),xW=Td(),MW={message:({params:{i:t,j:e}})=>(0,Jt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Jt._)`{i: ${t}, j: ${e}}`},FW={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:MW,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,V0.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,Jt._)`${o} === false`),t.ok(u);function l(){let p=e.let("i",(0,Jt._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Jt._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function h(p,m){let g=e.name("item"),E=(0,V0.checkDataTypes)(c,g,a.opts.strictNumbers,V0.DataType.Wrong),$=e.const("indices",(0,Jt._)`{}`);e.for((0,Jt._)`;${p}--;`,()=>{e.let(g,(0,Jt._)`${r}[${p}]`),e.if(E,(0,Jt._)`continue`),c.length>1&&e.if((0,Jt._)`typeof ${g} == "string"`,(0,Jt._)`${g} += "_"`),e.if((0,Jt._)`typeof ${$}[${g}] == "number"`,()=>{e.assign(m,(0,Jt._)`${$}[${g}]`),t.error(),e.assign(u,!1).break()}).code((0,Jt._)`${$}[${g}] = ${p}`)})}function d(p,m){let g=(0,LW.useFunc)(e,xW.default),E=e.name("outer");e.label(E).for((0,Jt._)`;${p}--;`,()=>e.for((0,Jt._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Jt._)`${g}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(E)})))}}};z0.default=FW});var UN=_(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});var H0=fe(),VW=xe(),zW=Td(),HW={message:"must be equal to constant",params:({schemaCode:t})=>(0,H0._)`{allowedValue: ${t}}`},UW={keyword:"const",$data:!0,error:HW,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,H0._)`!${(0,VW.useFunc)(e,zW.default)}(${r}, ${s})`):t.fail((0,H0._)`${i} !== ${r}`)}};U0.default=UW});var KN=_(K0=>{"use strict";Object.defineProperty(K0,"__esModule",{value:!0});var cl=fe(),KW=xe(),BW=Td(),GW={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,cl._)`{allowedValues: ${t}}`},JW={keyword:"enum",schemaType:"array",$data:!0,error:GW,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,KW.useFunc)(e,BW.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",i);l=(0,cl.or)(...s.map((p,m)=>h(d,m)))}t.pass(l);function f(){e.assign(l,!1),e.forOf("v",i,d=>e.if((0,cl._)`${c()}(${r}, ${d})`,()=>e.assign(l,!0).break()))}function h(d,p){let m=s[p];return typeof m=="object"&&m!==null?(0,cl._)`${c()}(${r}, ${d}[${p}])`:(0,cl._)`${r} === ${m}`}}};K0.default=JW});var BN=_(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});var WW=kN(),YW=qN(),XW=LN(),QW=xN(),ZW=MN(),e7=FN(),t7=VN(),r7=HN(),n7=UN(),s7=KN(),i7=[WW.default,YW.default,XW.default,QW.default,ZW.default,e7.default,t7.default,r7.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},n7.default,s7.default];B0.default=i7});var J0=_(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.validateAdditionalItems=void 0;var Yi=fe(),G0=xe(),o7={message:({params:{len:t}})=>(0,Yi.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Yi._)`{limit: ${t}}`},a7={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:o7,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,G0.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}GN(t,n)}};function GN(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,Yi._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Yi._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,G0.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,Yi._)`${a} <= ${e.length}`);r.if((0,Yi.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:G0.Type.Num},c),o.allErrors||r.if((0,Yi.not)(c),()=>r.break())})}}fl.validateAdditionalItems=GN;fl.default=a7});var W0=_(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.validateTuple=void 0;var JN=fe(),Od=xe(),u7=en(),l7={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return WN(t,"additionalItems",e);r.items=!0,!(0,Od.alwaysValidSchema)(r,e)&&t.ok((0,u7.validateArray)(t))}};function WN(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Od.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,JN._)`${i}.length`);r.forEach((f,h)=>{(0,Od.alwaysValidSchema)(a,f)||(n.if((0,JN._)`${c} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function l(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let g=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Od.checkStrictMode)(a,g,h.strictTuples)}}}dl.validateTuple=WN;dl.default=l7});var YN=_(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});var c7=W0(),f7={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,c7.validateTuple)(t,"items")};Y0.default=f7});var QN=_(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});var XN=fe(),d7=xe(),h7=en(),p7=J0(),m7={message:({params:{len:t}})=>(0,XN.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,XN._)`{limit: ${t}}`},y7={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:m7,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,d7.alwaysValidSchema)(n,e)&&(s?(0,p7.validateAdditionalItems)(t,s):t.ok((0,h7.validateArray)(t)))}};X0.default=y7});var ZN=_(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0});var rn=fe(),Nd=xe(),g7={message:({params:{min:t,max:e}})=>e===void 0?(0,rn.str)`must contain at least ${t} valid item(s)`:(0,rn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,rn._)`{minContains: ${t}}`:(0,rn._)`{minContains: ${t}, maxContains: ${e}}`},_7={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:g7,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,rn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Nd.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Nd.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Nd.alwaysValidSchema)(i,r)){let m=(0,rn._)`${l} >= ${o}`;a!==void 0&&(m=(0,rn._)`${m} && ${l} <= ${a}`),t.pass(m);return}i.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,rn._)`${s}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),g=e.let("count",0);d(m,()=>e.if(m,()=>p(g)))}function d(m,g){e.forRange("i",0,l,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:Nd.Type.Num,compositeRule:!0},m),g()})}function p(m){e.code((0,rn._)`${m}++`),a===void 0?e.if((0,rn._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,rn._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,rn._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};Q0.default=_7});var rI=_(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.validateSchemaDeps=Gn.validatePropertyDeps=Gn.error=void 0;var Z0=fe(),v7=xe(),hl=en();Gn.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,Z0.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,Z0._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var E7={keyword:"dependencies",type:"object",schemaType:"object",error:Gn.error,code(t){let[e,r]=S7(t);eI(t,e),tI(t,r)}};function S7({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function eI(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,hl.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,hl.checkReportMissingProp)(t,c)}):(r.if((0,Z0._)`${u} && (${(0,hl.checkMissingProp)(t,a,i)})`),(0,hl.reportMissingProp)(t,i),r.else())}}Gn.validatePropertyDeps=eI;function tI(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,v7.alwaysValidSchema)(i,e[a])||(r.if((0,hl.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}Gn.validateSchemaDeps=tI;Gn.default=E7});var sI=_(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});var nI=fe(),$7=xe(),b7={message:"property name must be valid",params:({params:t})=>(0,nI._)`{propertyName: ${t.propertyName}}`},w7={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:b7,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,$7.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,nI.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};e_.default=w7});var r_=_(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});var Id=en(),Pn=fe(),R7=_s(),Cd=xe(),P7={message:"must NOT have additional properties",params:({params:t})=>(0,Pn._)`{additionalProperty: ${t.additionalProperty}}`},T7={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:P7,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Cd.alwaysValidSchema)(o,r))return;let c=(0,Id.allSchemaProperties)(n.properties),l=(0,Id.allSchemaProperties)(n.patternProperties);f(),t.ok((0,Pn._)`${i} === ${R7.default.errors}`);function f(){e.forIn("key",s,g=>{!c.length&&!l.length?p(g):e.if(h(g),()=>p(g))})}function h(g){let E;if(c.length>8){let $=(0,Cd.schemaRefOrVal)(o,n.properties,"properties");E=(0,Id.isOwnProperty)(e,$,g)}else c.length?E=(0,Pn.or)(...c.map($=>(0,Pn._)`${g} === ${$}`)):E=Pn.nil;return l.length&&(E=(0,Pn.or)(E,...l.map($=>(0,Pn._)`${(0,Id.usePattern)(t,$)}.test(${g})`))),(0,Pn.not)(E)}function d(g){e.code((0,Pn._)`delete ${s}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Cd.alwaysValidSchema)(o,r)){let E=e.name("valid");u.removeAdditional==="failing"?(m(g,E,!1),e.if((0,Pn.not)(E),()=>{t.reset(),d(g)})):(m(g,E),a||e.if((0,Pn.not)(E),()=>e.break()))}}function m(g,E,$){let v={keyword:"additionalProperties",dataProp:g,dataPropType:Cd.Type.Str};$===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,E)}}};t_.default=T7});var aI=_(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});var O7=tl(),iI=en(),n_=xe(),oI=r_(),N7={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&oI.default.code(new O7.KeywordCxt(i,oI.default,"additionalProperties"));let o=(0,iI.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=n_.mergeEvaluated.props(e,(0,n_.toHash)(o),i.props));let a=o.filter(f=>!(0,n_.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=e.name("valid");for(let f of a)c(f)?l(f):(e.if((0,iI.propertyInData)(e,s,f,i.opts.ownProperties)),l(f),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(u);function c(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function l(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};s_.default=N7});var fI=_(i_=>{"use strict";Object.defineProperty(i_,"__esModule",{value:!0});var uI=en(),Ad=fe(),lI=xe(),cI=xe(),I7={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,uI.allSchemaProperties)(r),u=a.filter(m=>(0,lI.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof Ad.Name)&&(i.props=(0,cI.evaluatedPropsToName)(e,i.props));let{props:f}=i;h();function h(){for(let m of a)c&&d(m),i.allErrors?p(m):(e.var(l,!0),p(m),e.if(l))}function d(m){for(let g in c)new RegExp(m).test(g)&&(0,lI.checkStrictMode)(i,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,g=>{e.if((0,Ad._)`${(0,uI.usePattern)(t,m)}.test(${g})`,()=>{let E=u.includes(m);E||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:cI.Type.Str},l),i.opts.unevaluated&&f!==!0?e.assign((0,Ad._)`${f}[${g}]`,!0):!E&&!i.allErrors&&e.if((0,Ad.not)(l),()=>e.break())})})}}};i_.default=I7});var dI=_(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});var C7=xe(),A7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,C7.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};o_.default=A7});var hI=_(a_=>{"use strict";Object.defineProperty(a_,"__esModule",{value:!0});var k7=en(),q7={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:k7.validateUnion,error:{message:"must match a schema in anyOf"}};a_.default=q7});var pI=_(u_=>{"use strict";Object.defineProperty(u_,"__esModule",{value:!0});var kd=fe(),j7=xe(),D7={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,kd._)`{passingSchemas: ${t.passing}}`},L7={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:D7,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,f)=>{let h;(0,j7.alwaysValidSchema)(s,l)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&e.if((0,kd._)`${u} && ${o}`).assign(o,!1).assign(a,(0,kd._)`[${a}, ${f}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,kd.Name)})})}}};u_.default=L7});var mI=_(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});var x7=xe(),M7={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,x7.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};l_.default=M7});var _I=_(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});var qd=fe(),gI=xe(),F7={message:({params:t})=>(0,qd.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,qd._)`{failingKeyword: ${t.ifClause}}`},V7={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:F7,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,gI.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=yI(n,"then"),i=yI(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,qd.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,f){return()=>{let h=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,qd._)`${l}`):t.setParams({ifClause:l})}}}};function yI(t,e){let r=t.schema[e];return r!==void 0&&!(0,gI.alwaysValidSchema)(t,r)}c_.default=V7});var vI=_(f_=>{"use strict";Object.defineProperty(f_,"__esModule",{value:!0});var z7=xe(),H7={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,z7.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};f_.default=H7});var EI=_(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});var U7=J0(),K7=YN(),B7=W0(),G7=QN(),J7=ZN(),W7=rI(),Y7=sI(),X7=r_(),Q7=aI(),Z7=fI(),eY=dI(),tY=hI(),rY=pI(),nY=mI(),sY=_I(),iY=vI();function oY(t=!1){let e=[eY.default,tY.default,rY.default,nY.default,sY.default,iY.default,Y7.default,X7.default,W7.default,Q7.default,Z7.default];return t?e.push(K7.default,G7.default):e.push(U7.default,B7.default),e.push(J7.default),e}d_.default=oY});var SI=_(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});var Tt=fe(),aY={message:({schemaCode:t})=>(0,Tt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Tt._)`{format: ${t}}`},uY={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:aY,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:f}=a;if(!u.validateFormats)return;s?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=r.const("fDef",(0,Tt._)`${p}[${o}]`),g=r.let("fType"),E=r.let("format");r.if((0,Tt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(g,(0,Tt._)`${m}.type || "string"`).assign(E,(0,Tt._)`${m}.validate`),()=>r.assign(g,(0,Tt._)`"string"`).assign(E,m)),t.fail$data((0,Tt.or)($(),v()));function $(){return u.strictSchema===!1?Tt.nil:(0,Tt._)`${o} && !${E}`}function v(){let y=l.$async?(0,Tt._)`(${m}.async ? await ${E}(${n}) : ${E}(${n}))`:(0,Tt._)`${E}(${n})`,S=(0,Tt._)`(typeof ${E} == "function" ? ${y} : ${E}.test(${n}))`;return(0,Tt._)`${E} && ${E} !== true && ${g} === ${e} && !${S}`}}function d(){let p=f.formats[i];if(!p){$();return}if(p===!0)return;let[m,g,E]=v(p);m===e&&t.pass(y());function $(){if(u.strictSchema===!1){f.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function v(S){let N=S instanceof RegExp?(0,Tt.regexpCode)(S):u.code.formats?(0,Tt._)`${u.code.formats}${(0,Tt.getProperty)(i)}`:void 0,w=r.scopeValue("formats",{key:i,ref:S,code:N});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Tt._)`${w}.validate`]:["string",S,w]}function y(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,Tt._)`await ${E}(${n})`}return typeof g=="function"?(0,Tt._)`${E}(${n})`:(0,Tt._)`${E}.test(${n})`}}}};h_.default=uY});var $I=_(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});var lY=SI(),cY=[lY.default];p_.default=cY});var bI=_(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.contentVocabulary=ua.metadataVocabulary=void 0;ua.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ua.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var RI=_(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});var fY=AN(),dY=BN(),hY=EI(),pY=$I(),wI=bI(),mY=[fY.default,dY.default,(0,hY.default)(),pY.default,wI.metadataVocabulary,wI.contentVocabulary];m_.default=mY});var PI=_(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.DiscrError=void 0;var yY;(function(t){t.Tag="tag",t.Mapping="mapping"})(yY=pl.DiscrError||(pl.DiscrError={}))});var OI=_(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});var la=fe(),y_=PI(),TI=Ed(),gY=xe(),_Y={message:({params:{discrError:t,tagName:e}})=>t===y_.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,la._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},vY={keyword:"discriminator",type:"object",schemaType:"object",error:_Y,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,la._)`${r}${(0,la.getProperty)(a)}`);e.if((0,la._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:y_.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,la._)`${c} === ${p}`),e.assign(u,f(d[p]));e.else(),t.error(!1,{discrError:y_.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,la.Name),p}function h(){var d;let p={},m=E(s),g=!0;for(let y=0;y<o.length;y++){let S=o[y];S?.$ref&&!(0,gY.schemaHasRulesButRef)(S,i.self.RULES)&&(S=TI.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,S?.$ref),S instanceof TI.SchemaEnv&&(S=S.schema));let N=(d=S?.properties)===null||d===void 0?void 0:d[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||E(S)),$(N,y)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function E({required:y}){return Array.isArray(y)&&y.includes(a)}function $(y,S){if(y.const)v(y.const,S);else if(y.enum)for(let N of y.enum)v(N,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(y,S){if(typeof y!="string"||y in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[y]=S}}}};g_.default=vY});var NI=_((fge,EY)=>{EY.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var AI=_((_t,CI)=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.MissingRefError=_t.ValidationError=_t.CodeGen=_t.Name=_t.nil=_t.stringify=_t.str=_t._=_t.KeywordCxt=void 0;var SY=PN(),$Y=RI(),bY=OI(),II=NI(),wY=["/properties"],jd="http://json-schema.org/draft-07/schema",Dd=class extends SY.default{_addVocabularies(){super._addVocabularies(),$Y.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(bY.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(II,wY):II;this.addMetaSchema(e,jd,!1),this.refs["http://json-schema.org/schema"]=jd}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(jd)?jd:void 0)}};CI.exports=_t=Dd;Object.defineProperty(_t,"__esModule",{value:!0});_t.default=Dd;var RY=tl();Object.defineProperty(_t,"KeywordCxt",{enumerable:!0,get:function(){return RY.KeywordCxt}});var ca=fe();Object.defineProperty(_t,"_",{enumerable:!0,get:function(){return ca._}});Object.defineProperty(_t,"str",{enumerable:!0,get:function(){return ca.str}});Object.defineProperty(_t,"stringify",{enumerable:!0,get:function(){return ca.stringify}});Object.defineProperty(_t,"nil",{enumerable:!0,get:function(){return ca.nil}});Object.defineProperty(_t,"Name",{enumerable:!0,get:function(){return ca.Name}});Object.defineProperty(_t,"CodeGen",{enumerable:!0,get:function(){return ca.CodeGen}});var PY=gd();Object.defineProperty(_t,"ValidationError",{enumerable:!0,get:function(){return PY.default}});var TY=_d();Object.defineProperty(_t,"MissingRefError",{enumerable:!0,get:function(){return TY.default}})});var kI=_(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.formatLimitDefinition=void 0;var OY=AI(),Tn=fe(),ni=Tn.operators,Ld={formatMaximum:{okStr:"<=",ok:ni.LTE,fail:ni.GT},formatMinimum:{okStr:">=",ok:ni.GTE,fail:ni.LT},formatExclusiveMaximum:{okStr:"<",ok:ni.LT,fail:ni.GTE},formatExclusiveMinimum:{okStr:">",ok:ni.GT,fail:ni.LTE}},NY={message:({keyword:t,schemaCode:e})=>Tn.str`should be ${Ld[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>Tn._`{comparison: ${Ld[t].okStr}, limit: ${e}}`};fa.formatLimitDefinition={keyword:Object.keys(Ld),type:"string",schemaType:"string",$data:!0,error:NY,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new OY.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let h=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=e.const("fmt",Tn._`${h}[${u.schemaCode}]`);t.fail$data(Tn.or(Tn._`typeof ${d} != "object"`,Tn._`${d} instanceof RegExp`,Tn._`typeof ${d}.compare != "function"`,f(d)))}function l(){let h=u.schema,d=a.formats[h];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${s}": format "${h}" does not define "compare" function`);let p=e.scopeValue("formats",{key:h,ref:d,code:o.code.formats?Tn._`${o.code.formats}${Tn.getProperty(h)}`:void 0});t.fail$data(f(p))}function f(h){return Tn._`${h}.compare(${r}, ${n}) ${Ld[s].fail} 0`}},dependencies:["format"]};var IY=t=>(t.addKeyword(fa.formatLimitDefinition),t);fa.default=IY});var E_=_((ml,DI)=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var da=id(),CY=kI(),__=fe(),qI=new __.Name("fullFormats"),AY=new __.Name("fastFormats"),v_=(t,e={keywords:!0})=>{if(Array.isArray(e))return jI(t,e,da.fullFormats,qI),t;let[r,n]=e.mode==="fast"?[da.fastFormats,AY]:[da.fullFormats,qI],s=e.formats||da.formatNames;return jI(t,s,r,n),e.keywords&&CY.default(t),t};v_.get=(t,e="full")=>{let n=(e==="fast"?da.fastFormats:da.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function jI(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=__._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}DI.exports=ml=v_;Object.defineProperty(ml,"__esModule",{value:!0});ml.default=v_});var $_=_((hge,LI)=>{"use strict";var kY=JO(),qY=Dg(),jY=E_(),DY=$f()({proto:!0}),S_=class t{constructor(e){this.ajv=new kY({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:qY}),jY(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,r){let n=e.$id||r;if(e.$id!==void 0&&e.$id[0]==="#"&&(n=r+e.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=DY(e);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=e}}validate(e,r){return this.ajv.validate(e,r)}convertSchemaToAjvFormat(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let r in e)typeof e[r]=="object"&&this.convertSchemaToAjvFormat(e[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(e){let r=new t(e.ajvOptions);for(let[n,s]of Object.entries(e.ajvSchemas))r.ajv.addSchema(s,n);return r}};LI.exports=S_});var w_=_((pge,b_)=>{"use strict";function LY(t,e,r,n){let s="";return e.validatorSchemasIds.size>0?(s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`,`
  'use strict'
  const { dependencies } = require('fast-json-stringify/lib/standalone')

  const { Serializer, Validator } = dependencies

  const serializerState = ${JSON.stringify(r.getState())}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${t.toString()}(validator, serializer)`}b_.exports=LY;b_.exports.dependencies={Serializer:ty(),Validator:$_()}});var MI=_((yge,xI)=>{"use strict";var{dependencies:xY}=w_(),{Serializer:MY,Validator:mge}=xY,FY={mode:"standalone"},VY=MY.restoreFromState(FY),zY=null;xI.exports=function(e,r){function n(i){let o=i&&typeof i.toJSON=="function"?i.toJSON():i;if(o===null)return"{}";let a="{",u=!1;return o.statusCode!==void 0&&(!u&&(u=!0)||(a+=","),a+='"statusCode":',a+=r.asNumber(o.statusCode)),o.code!==void 0&&(!u&&(u=!0)||(a+=","),a+='"code":',a+=r.asString(o.code)),o.error!==void 0&&(!u&&(u=!0)||(a+=","),a+='"error":',a+=r.asString(o.error)),o.message!==void 0&&(!u&&(u=!0)||(a+=","),a+='"message":',a+=r.asString(o.message)),a+"}"}return n}(zY,VY)});var yl=_((gge,HI)=>{"use strict";var FI=require("node:http").STATUS_CODES,HY=Qp(),{kReplyHeaders:Xi,kReplyNextErrorHandler:xd,kReplyIsRunningOnErrorHook:UY,kReplyHasStatusCode:KY,kRouteContext:zI}=Mt(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:BY,FST_ERR_FAILED_ERROR_SERIALIZATION:GY}=rr(),{getSchemaSerializer:JY}=cu(),R_=MI(),WY={func:XY,toJSON(){return this.func.name.toString()+"()"}};function YY(t,e,r){t[UY]=!1;let n=t[zI];if(t[xd]===!1){VI(e,t,function(a,u){try{a.raw.writeHead(a.raw.statusCode,a[Xi])}catch(c){a.log.warn({req:a.request,res:a,err:c},c&&c.message),a.raw.writeHead(a.raw.statusCode)}a.raw.end(u)});return}let s=t[xd]||n.errorHandler;t[xd]=Object.getPrototypeOf(s),delete t[Xi]["content-type"],delete t[Xi]["content-length"];let i=s.func;if(!i){t[xd]=!1,VI(e,t,r);return}let o=i(e,t.request,t);o!==void 0&&(o!==null&&typeof o.then=="function"?HY(o,t):t.send(o))}function XY(t,e,r){if(ZY(t,r),!r[KY]||r.statusCode===200){let n=t.statusCode||t.status;r.code(n>=400?n:500)}r.statusCode<500?r.log.info({res:r,err:t},t&&t.message):r.log.error({req:e,res:r,err:t},t&&t.message),r.send(t)}function VI(t,e,r){let n=e.raw,s=e.statusCode;e[Xi]["content-type"]=e[Xi]["content-type"]??"application/json; charset=utf-8";let i;try{let o=JY(e[zI],s,e[Xi]["content-type"]);i=o===!1?R_({error:FI[s+""],code:t.code,message:t.message,statusCode:s}):o(Object.create(t,{error:{value:FI[s+""]},message:{value:t.message},statusCode:{value:s}}))}catch(o){e.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),e.code(500),i=R_(new GY(o.message,t.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=R_(new BY(typeof i))),e[Xi]["content-length"]=""+Buffer.byteLength(i),r(e,i)}function QY(t=WY,e){if(!e)return t;let r=Object.create(t);return r.func=e,r}function ZY(t,e){let r=e.raw,n=r.statusCode;n=n>=400?n:500,t!=null&&(t.headers!==void 0&&e.headers(t.headers),t.status>=400?n=t.status:t.statusCode>=400&&(n=t.statusCode)),r.statusCode=n}HI.exports={buildErrorHandler:QY,handleError:YY}});var Ud=_((_ge,Hd)=>{"use strict";var N_=require("node:stream").finished,eX=require("node:stream").Readable,{kFourOhFourContext:UI,kPublicRouteContext:KI,kReplyErrorHandlerCalled:ZI,kReplyHijacked:gl,kReplyStartTime:_l,kReplyEndTime:C_,kReplySerializer:Es,kReplySerializerDefault:Fd,kReplyIsError:Vd,kReplyHeaders:ot,kReplyTrailers:Ft,kReplyHasStatusCode:A_,kReplyIsRunningOnErrorHook:k_,kReplyNextErrorHandler:tX,kDisableRequestLogging:eC,kSchemaResponse:zd,kReplyCacheSerializeFns:si,kSchemaController:P_,kOptions:rX,kRouteContext:$e}=Mt(),{onSendHookRunner:tC,onResponseHookRunner:nX,preHandlerHookRunner:sX,preSerializationHookRunner:iX}=xs(),BI=rm()[Symbol.for("internals")],oX=lu(),I_=oX.now,{handleError:GI}=yl(),{getSchemaSerializer:aX}=cu(),T_={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:uX,FST_ERR_REP_RESPONSE_BODY_CONSUMED:lX,FST_ERR_REP_ALREADY_SENT:rC,FST_ERR_REP_SENT_VALUE:cX,FST_ERR_SEND_INSIDE_ONERR:fX,FST_ERR_BAD_STATUS_CODE:dX,FST_ERR_BAD_TRAILER_NAME:hX,FST_ERR_BAD_TRAILER_VALUE:pX,FST_ERR_MISSING_SERIALIZATION_FN:mX,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:yX}=rr(),{FSTDEP010:gX,FSTDEP013:_X,FSTDEP019:vX,FSTDEP020:EX}=ls(),nC=Object.prototype.toString;function st(t,e,r){this.raw=t,this[Es]=null,this[ZI]=!1,this[Vd]=!1,this[k_]=!1,this.request=e,this[ot]={},this[Ft]=null,this[A_]=!1,this[_l]=void 0,this.log=r}st.props=[];Object.defineProperties(st.prototype,{[$e]:{get(){return this.request[$e]}},context:{get(){return vX(),this.request[$e]}},elapsedTime:{get(){return this[_l]===void 0?0:(this[C_]||I_())-this[_l]}},server:{get(){return this.request[$e].server}},sent:{enumerable:!0,get(){return(this[gl]||this.raw.writableEnded)===!0},set(t){if(gX(),t!==!0)throw new cX;if(this.sent&&this[gl])throw new rC(this.request.url,this.request.method);this[gl]=!0}},statusCode:{get(){return this.raw.statusCode},set(t){this.code(t)}},[KI]:{get(){return this.request[KI]}}});st.prototype.hijack=function(){return this[gl]=!0,this};st.prototype.send=function(t){if(this[k_]===!0)throw new fX;if(this.sent)return this.log.warn({err:new rC(this.request.url,this.request.method)}),this;if(t instanceof Error||this[Vd]===!0)return this[Vd]=!1,vl(this,t,Qi),this;if(t===void 0)return Qi(this,t),this;let e=this.getHeader("content-type"),r=e!==void 0;if(t!==null){if(typeof t.pipe=="function"||typeof t.getReader=="function"||nC.call(t)==="[object Response]")return Qi(this,t),this;if(t?.buffer instanceof ArrayBuffer){r===!1&&(this[ot]["content-type"]=T_.OCTET);let n=Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength);return Qi(this,n),this}if(r===!1&&typeof t=="string")return this[ot]["content-type"]=T_.PLAIN,Qi(this,t),this}if(this[Es]!==null){if(typeof t!="string")return JI(this,t),this;t=this[Es](t)}else if(r===!1||e.indexOf("json")>-1){if(r===!1)this[ot]["content-type"]=T_.JSON;else if(e.indexOf("charset")===-1){let n=e.trim();n.endsWith(";")?this[ot]["content-type"]=`${n} charset=utf-8`:this[ot]["content-type"]=`${n}; charset=utf-8`}if(typeof t!="string")return JI(this,t),this}return Qi(this,t),this};st.prototype.getHeader=function(t){t=t.toLowerCase();let e=this.raw,r=this[ot][t];return r===void 0&&e.hasHeader(t)&&(r=e.getHeader(t)),r};st.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[ot]}};st.prototype.hasHeader=function(t){return t=t.toLowerCase(),this[ot][t]!==void 0||this.raw.hasHeader(t)};st.prototype.removeHeader=function(t){return delete this[ot][t.toLowerCase()],this};st.prototype.header=function(t,e=""){return t=t.toLowerCase(),this[ot][t]&&t==="set-cookie"?(typeof this[ot][t]=="string"&&(this[ot][t]=[this[ot][t]]),Array.isArray(e)?Array.prototype.push.apply(this[ot][t],e):this[ot][t].push(e)):this[ot][t]=e,this};st.prototype.headers=function(t){let e=Object.keys(t);for(var r=0;r!==e.length;++r){let n=e[r];this.header(n,t[n])}return this};var SX=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);st.prototype.trailer=function(t,e){if(t=t.toLowerCase(),SX.has(t))throw new hX(t);if(typeof e!="function")throw new pX(t,typeof e);return this[Ft]===null&&(this[Ft]={}),this[Ft][t]=e,this};st.prototype.hasTrailer=function(t){return this[Ft]?.[t.toLowerCase()]!==void 0};st.prototype.removeTrailer=function(t){return this[Ft]===null?this:(this[Ft][t.toLowerCase()]=void 0,this)};st.prototype.code=function(t){let e=Number(t);if(isNaN(e)||e<100||e>599)throw new dX(t||String(t));return this.raw.statusCode=e,this[A_]=!0,this};st.prototype.status=st.prototype.code;st.prototype.getSerializationFunction=function(t,e){let r;return typeof t=="string"||typeof t=="number"?typeof e=="string"?r=this[$e][zd]?.[t]?.[e]:r=this[$e][zd]?.[t]:typeof t=="object"&&(r=this[$e][si]?.get(t)),r};st.prototype.compileSerializationSchema=function(t,e=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[$e][si]?.has(t))return this[$e][si].get(t);let a=(this[$e].serializerCompiler||this.server[P_].serializerCompiler||this.server[P_].setupSerializer(this.server[rX])||this.server[P_].serializerCompiler)({schema:t,method:s,url:i,httpStatus:e,contentType:r});return this[$e][si]==null&&(this[$e][si]=new WeakMap),this[$e][si].set(t,a),a};st.prototype.serializeInput=function(t,e,r,n){let s=r,i;if(r=typeof e=="string"||typeof e=="number"?e:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[$e][zd]?.[r]?.[n]:i=this[$e][zd]?.[r],i==null)throw n?new yX(r,n):new mX(r)}else this[$e][si]?.has(e)?i=this[$e][si].get(e):i=this.compileSerializationSchema(e,r,n);return i(t)};st.prototype.serialize=function(t){return this[Es]!==null?this[Es](t):this[$e]&&this[$e][Fd]?this[$e][Fd](t,this.raw.statusCode):oC(this[$e],t,this.raw.statusCode)};st.prototype.serializer=function(t){return this[Es]=t,this};st.prototype.type=function(t){return this[ot]["content-type"]=t,this};st.prototype.redirect=function(t,e){return typeof t=="string"&&(e=t,t=this[A_]?this.raw.statusCode:302),this.header("location",e).code(t).send()};st.prototype.callNotFound=function(){return TX(this),this};st.prototype.getResponseTime=function(){return EX(),this.elapsedTime};st.prototype.then=function(t,e){if(this.sent){t();return}N_(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?e?e(r):this.log&&this.log.warn("unhandled rejection on reply.then"):t()})};function JI(t,e){t[$e].preSerialization!==null?iX(t[$e].preSerialization,t.request,t,e,WI):WI(null,t.request,t,e)}function WI(t,e,r,n){if(t!=null){vl(r,t);return}try{r[Es]!==null?n=r[Es](n):r[$e]&&r[$e][Fd]?n=r[$e][Fd](n,r.raw.statusCode):n=oC(r[$e],n,r.raw.statusCode,r[ot]["content-type"])}catch(s){$X(s,r),vl(r,s);return}Qi(r,n)}function $X(t,e){t.serialization=e[$e].config}function Qi(t,e){t[$e].onSend!==null?tC(t[$e].onSend,t.request,t,e,bX):sC(t,e)}function bX(t,e,r,n){t!=null?vl(r,t):sC(r,n)}function O_(t,e){let r=t.raw;try{r.writeHead(e,t[ot])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&t.log.warn(`Reply was already sent, did you forget to "return reply" in the "${t.request.raw.url}" (${t.request.raw.method}) route?`),n}}function sC(t,e){let r=t.raw,n=t.request;if(t[Ft]!==null){let o=Object.keys(t[Ft]),a="";for(let u of o)typeof t[Ft][u]=="function"&&(a+=" ",a+=u);t.header("Transfer-Encoding","chunked"),t.header("Trailer",a.trim())}let s=nC.call(e)==="[object Response]";s&&typeof e.status=="number"&&t.code(e.status);let i=r.statusCode;if(e==null){i>=200&&i!==204&&i!==304&&n.method!=="HEAD"&&t[Ft]===null&&(t[ot]["content-length"]="0"),O_(t,i),Md(e,r,t);return}if(i>=100&&i<200||i===204){t.removeHeader("content-type"),t.removeHeader("content-length"),O_(t,i),Md(void 0,r,t),typeof e.resume=="function"&&(e.on("error",aC),e.resume());return}if(typeof e.pipe=="function"){iC(e,r,t);return}if(typeof e.getReader=="function"){XI(e,r,t);return}if(s){if(typeof e.headers=="object"&&typeof e.headers.forEach=="function")for(let[o,a]of e.headers)t.header(o,a);if(e.body!=null){if(e.bodyUsed)throw new lX;XI(e.body,r,t)}return}if(typeof e!="string"&&!Buffer.isBuffer(e))throw new uX(typeof e);if(t[Ft]===null){let o=t[ot]["content-length"];(!o||n.raw.method!=="HEAD"&&Number(o)!==Buffer.byteLength(e))&&(t[ot]["content-length"]=""+Buffer.byteLength(e))}O_(t,i),r.write(e),Md(e,r,t)}function YI(t,e,r){e.code==="ERR_STREAM_PREMATURE_CLOSE"?t[eC]||t.info({res:r},"stream closed prematurely"):t.warn({err:e},"response terminated with an error with headers already sent")}function XI(t,e,r){let n=eX.fromWeb(t);iC(n,e,r)}function iC(t,e,r){let n=!0,s=!1;if(wX(t,e,r),N_(t,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(e.headersSent||r.request.raw.aborted===!0?(s||(s=!0,YI(r.log,i,e)),e.destroy()):vl(r,i))}),N_(e,function(i){n&&(i!=null&&e.headersSent&&!s&&(s=!0,YI(r.log,i,e)),typeof t.destroy=="function"?t.destroy():typeof t.close=="function"?t.close(aC):typeof t.abort=="function"?t.abort():r.log.warn("stream payload does not end properly"))}),e.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[ot])e.setHeader(i,r[ot][i]);t.pipe(e)}function Md(t,e,r){if(r[Ft]===null){e.end(null,null,null);return}let n=Object.keys(r[Ft]),s={},i=0,o=!0;function a(){i===0&&(e.addTrailers(s),e.end(null,null,null))}for(let u of n){let c=function(f,h){i++,f?r.log.debug(f):s[u]=h,process.nextTick(a)};if(typeof r[Ft][u]!="function")continue;o=!1,i--;let l=r[Ft][u](r,t,c);typeof l=="object"&&typeof l.then=="function"?l.then(f=>c(null,f),c):l!=null&&(_X(),c(null,l))}o&&e.end(null,null,null)}function wX(t,e,r){r[Ft]!==null&&t.on("end",()=>Md(null,e,r))}function vl(t,e,r){t[$e].onError!==null&&!t[tX]?(t[k_]=!0,tC(t[$e].onError,t.request,t,e,()=>GI(t,e,r))):GI(t,e,r)}function RX(t){t[_l]=I_();let e=r=>{t[C_]=I_(),t.raw.removeListener("finish",e),t.raw.removeListener("error",e);let n=t[$e];n&&n.onResponse!==null?nX(n.onResponse,t.request,t,QI):QI(r,t.request,t)};t.raw.on("finish",e),t.raw.on("error",e)}function QI(t,e,r){if(r.log[eC])return;let n=r.elapsedTime;if(t!=null){r.log.error({res:r,err:t,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function PX(t){let e=t.props.slice();function r(n,s,i){this.raw=n,this[Vd]=!1,this[ZI]=!1,this[gl]=!1,this[Es]=null,this.request=s,this[ot]={},this[Ft]=null,this[_l]=void 0,this[C_]=void 0,this.log=i;for(var o,a=0;a<e.length;a++)o=e[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.parent=t,r.props=e,r}function TX(t){if(t[$e][UI]===null){t.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),t.code(404).send("404 Not Found");return}t.request[$e]=t[$e][UI],t[$e].preHandler!==null?sX(t[$e].preHandler,t.request,t,BI.preHandlerCallback):BI.preHandlerCallback(null,t.request,t)}function oC(t,e,r,n){let s=aX(t,r,n);return s?s(e):JSON.stringify(e)}function aC(){}Hd.exports=st;Hd.exports.buildReply=PX;Hd.exports.setupResponseListeners=RX});var lC=_((vge,uC)=>{"use strict";uC.exports=OX;function OX(t){if(!t)throw new TypeError("argument req is required");var e=IX(t.headers["x-forwarded-for"]||""),r=NX(t),n=[r].concat(e);return n}function NX(t){return t.socket?t.socket.remoteAddress:t.connection.remoteAddress}function IX(t){for(var e=t.length,r=[],n=t.length,s=t.length-1;s>=0;s--)switch(t.charCodeAt(s)){case 32:n===e&&(n=e=s);break;case 44:n!==e&&r.push(t.substring(n,e)),n=e=s;break;default:n=s;break}return n!==e&&r.push(t.substring(n,e)),r}});var fC=_((cC,El)=>{(function(){var t,e,r,n,s,i,o,a,u;e={},a=this,typeof El<"u"&&El!==null&&El.exports?El.exports=e:a.ipaddr=e,o=function(c,l,f,h){var d,p;if(c.length!==l.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(d=0;h>0;){if(p=f-h,p<0&&(p=0),c[d]>>p!==l[d]>>p)return!1;h-=f,d+=1}return!0},e.subnetMatch=function(c,l,f){var h,d,p,m,g;f==null&&(f="unicast");for(p in l)for(m=l[p],m[0]&&!(m[0]instanceof Array)&&(m=[m]),h=0,d=m.length;h<d;h++)if(g=m[h],c.kind()===g[0].kind()&&c.match.apply(c,g))return p;return f},e.IPv4=function(){function c(l){var f,h,d;if(l.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");for(f=0,h=l.length;f<h;f++)if(d=l[f],!(0<=d&&d<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=l}return c.prototype.kind=function(){return"ipv4"},c.prototype.toString=function(){return this.octets.join(".")},c.prototype.toNormalizedString=function(){return this.toString()},c.prototype.toByteArray=function(){return this.octets.slice(0)},c.prototype.match=function(l,f){var h;if(f===void 0&&(h=l,l=h[0],f=h[1]),l.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return o(this.octets,l.octets,8,f)},c.prototype.SpecialRanges={unspecified:[[new c([0,0,0,0]),8]],broadcast:[[new c([255,255,255,255]),32]],multicast:[[new c([224,0,0,0]),4]],linkLocal:[[new c([169,254,0,0]),16]],loopback:[[new c([127,0,0,0]),8]],carrierGradeNat:[[new c([100,64,0,0]),10]],private:[[new c([10,0,0,0]),8],[new c([172,16,0,0]),12],[new c([192,168,0,0]),16]],reserved:[[new c([192,0,0,0]),24],[new c([192,0,2,0]),24],[new c([192,88,99,0]),24],[new c([198,51,100,0]),24],[new c([203,0,113,0]),24],[new c([240,0,0,0]),4]]},c.prototype.range=function(){return e.subnetMatch(this,this.SpecialRanges)},c.prototype.toIPv4MappedAddress=function(){return e.IPv6.parse("::ffff:"+this.toString())},c.prototype.prefixLengthFromSubnetMask=function(){var l,f,h,d,p,m,g;for(g={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},l=0,p=!1,f=h=3;h>=0;f=h+=-1)if(d=this.octets[f],d in g){if(m=g[d],p&&m!==0)return null;m!==8&&(p=!0),l+=m}else return null;return 32-l},c}(),r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^"+r+"\\."+r+"\\."+r+"\\."+r+"$","i"),longValue:new RegExp("^"+r+"$","i")},e.IPv4.parser=function(c){var l,f,h,d,p;if(f=function(m){return m[0]==="0"&&m[1]!=="x"?parseInt(m,8):parseInt(m)},l=c.match(n.fourOctet))return function(){var m,g,E,$;for(E=l.slice(1,6),$=[],m=0,g=E.length;m<g;m++)h=E[m],$.push(f(h));return $}();if(l=c.match(n.longValue)){if(p=f(l[1]),p>4294967295||p<0)throw new Error("ipaddr: address outside defined range");return function(){var m,g;for(g=[],d=m=0;m<=24;d=m+=8)g.push(p>>d&255);return g}().reverse()}else return null},e.IPv6=function(){function c(l,f){var h,d,p,m,g,E;if(l.length===16)for(this.parts=[],h=d=0;d<=14;h=d+=2)this.parts.push(l[h]<<8|l[h+1]);else if(l.length===8)this.parts=l;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(E=this.parts,p=0,m=E.length;p<m;p++)if(g=E[p],!(0<=g&&g<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");f&&(this.zoneId=f)}return c.prototype.kind=function(){return"ipv6"},c.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},c.prototype.toRFC5952String=function(){var l,f,h,d,p;for(d=/((^|:)(0(:|$)){2,})/g,p=this.toNormalizedString(),l=0,f=-1;h=d.exec(p);)h[0].length>f&&(l=h.index,f=h[0].length);return f<0?p:p.substring(0,l)+"::"+p.substring(l+f)},c.prototype.toByteArray=function(){var l,f,h,d,p;for(l=[],p=this.parts,f=0,h=p.length;f<h;f++)d=p[f],l.push(d>>8),l.push(d&255);return l},c.prototype.toNormalizedString=function(){var l,f,h;return l=function(){var d,p,m,g;for(m=this.parts,g=[],d=0,p=m.length;d<p;d++)f=m[d],g.push(f.toString(16));return g}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),l+h},c.prototype.toFixedLengthString=function(){var l,f,h;return l=function(){var d,p,m,g;for(m=this.parts,g=[],d=0,p=m.length;d<p;d++)f=m[d],g.push(f.toString(16).padStart(4,"0"));return g}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),l+h},c.prototype.match=function(l,f){var h;if(f===void 0&&(h=l,l=h[0],f=h[1]),l.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return o(this.parts,l.parts,16,f)},c.prototype.SpecialRanges={unspecified:[new c([0,0,0,0,0,0,0,0]),128],linkLocal:[new c([65152,0,0,0,0,0,0,0]),10],multicast:[new c([65280,0,0,0,0,0,0,0]),8],loopback:[new c([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new c([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new c([0,0,0,0,0,65535,0,0]),96],rfc6145:[new c([0,0,0,0,65535,0,0,0]),96],rfc6052:[new c([100,65435,0,0,0,0,0,0]),96],"6to4":[new c([8194,0,0,0,0,0,0,0]),16],teredo:[new c([8193,0,0,0,0,0,0,0]),32],reserved:[[new c([8193,3512,0,0,0,0,0,0]),32]]},c.prototype.range=function(){return e.subnetMatch(this,this.SpecialRanges)},c.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},c.prototype.toIPv4Address=function(){var l,f,h;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return h=this.parts.slice(-2),l=h[0],f=h[1],new e.IPv4([l>>8,l&255,f>>8,f&255])},c.prototype.prefixLengthFromSubnetMask=function(){var l,f,h,d,p,m,g;for(g={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},l=0,p=!1,f=h=7;h>=0;f=h+=-1)if(d=this.parts[f],d in g){if(m=g[d],p&&m!==0)return null;m!==16&&(p=!0),l+=m}else return null;return 128-l},c}(),s="(?:[0-9a-f]+::?)+",u="%[0-9a-z]{1,}",i={zoneIndex:new RegExp(u,"i"),native:new RegExp("^(::)?("+s+")?([0-9a-f]+)?(::)?("+u+")?$","i"),transitional:new RegExp("^((?:"+s+")|(?:::)(?:"+s+")?)"+(r+"\\."+r+"\\."+r+"\\."+r)+("("+u+")?$"),"i")},t=function(c,l){var f,h,d,p,m,g;if(c.indexOf("::")!==c.lastIndexOf("::"))return null;for(g=(c.match(i.zoneIndex)||[])[0],g&&(g=g.substring(1),c=c.replace(/%.+$/,"")),f=0,h=-1;(h=c.indexOf(":",h+1))>=0;)f++;if(c.substr(0,2)==="::"&&f--,c.substr(-2,2)==="::"&&f--,f>l)return null;for(m=l-f,p=":";m--;)p+="0:";return c=c.replace("::",p),c[0]===":"&&(c=c.slice(1)),c[c.length-1]===":"&&(c=c.slice(0,-1)),l=function(){var E,$,v,y;for(v=c.split(":"),y=[],E=0,$=v.length;E<$;E++)d=v[E],y.push(parseInt(d,16));return y}(),{parts:l,zoneId:g}},e.IPv6.parser=function(c){var l,f,h,d,p,m,g;if(i.native.test(c))return t(c,8);if((d=c.match(i.transitional))&&(g=d[6]||"",l=t(d[1].slice(0,-1)+g,6),l.parts)){for(m=[parseInt(d[2]),parseInt(d[3]),parseInt(d[4]),parseInt(d[5])],f=0,h=m.length;f<h;f++)if(p=m[f],!(0<=p&&p<=255))return null;return l.parts.push(m[0]<<8|m[1]),l.parts.push(m[2]<<8|m[3]),{parts:l.parts,zoneId:l.zoneId}}return null},e.IPv4.isIPv4=e.IPv6.isIPv6=function(c){return this.parser(c)!==null},e.IPv4.isValid=function(c){var l;try{return new this(this.parser(c)),!0}catch(f){return l=f,!1}},e.IPv4.isValidFourPartDecimal=function(c){return!!(e.IPv4.isValid(c)&&c.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},e.IPv6.isValid=function(c){var l,f;if(typeof c=="string"&&c.indexOf(":")===-1)return!1;try{return l=this.parser(c),new this(l.parts,l.zoneId),!0}catch(h){return f=h,!1}},e.IPv4.parse=function(c){var l;if(l=this.parser(c),l===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(l)},e.IPv6.parse=function(c){var l;if(l=this.parser(c),l.parts===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(l.parts,l.zoneId)},e.IPv4.parseCIDR=function(c){var l,f,h;if((f=c.match(/^(.+)\/(\d+)$/))&&(l=parseInt(f[2]),l>=0&&l<=32))return h=[this.parse(f[1]),l],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},e.IPv4.subnetMaskFromPrefixLength=function(c){var l,f,h;if(c=parseInt(c),c<0||c>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(h=[0,0,0,0],f=0,l=Math.floor(c/8);f<l;)h[f]=255,f++;return l<4&&(h[l]=Math.pow(2,c%8)-1<<8-c%8),new this(h)},e.IPv4.broadcastAddressFromCIDR=function(c){var l,f,h,d,p,m;try{for(l=this.parseCIDR(c),d=l[0].toByteArray(),m=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)|parseInt(m[h],10)^255),h++;return new this(p)}catch(g){throw f=g,new Error("ipaddr: the address does not have IPv4 CIDR format")}},e.IPv4.networkAddressFromCIDR=function(c){var l,f,h,d,p,m;try{for(l=this.parseCIDR(c),d=l[0].toByteArray(),m=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)&parseInt(m[h],10)),h++;return new this(p)}catch(g){throw f=g,new Error("ipaddr: the address does not have IPv4 CIDR format")}},e.IPv6.parseCIDR=function(c){var l,f,h;if((f=c.match(/^(.+)\/(\d+)$/))&&(l=parseInt(f[2]),l>=0&&l<=128))return h=[this.parse(f[1]),l],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},e.isValid=function(c){return e.IPv6.isValid(c)||e.IPv4.isValid(c)},e.parse=function(c){if(e.IPv6.isValid(c))return e.IPv6.parse(c);if(e.IPv4.isValid(c))return e.IPv4.parse(c);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},e.parseCIDR=function(c){var l;try{return e.IPv6.parseCIDR(c)}catch(f){l=f;try{return e.IPv4.parseCIDR(c)}catch(h){throw l=h,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},e.fromByteArray=function(c){var l;if(l=c.length,l===4)return new e.IPv4(c);if(l===16)return new e.IPv6(c);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},e.process=function(c){var l;return l=this.parse(c),l.kind()==="ipv6"&&l.isIPv4MappedAddress()?l.toIPv4Address():l}}).call(cC)});var yC=_((Ege,Gd)=>{"use strict";Gd.exports=LX;Gd.exports.all=pC;Gd.exports.compile=mC;var CX=lC(),hC=fC(),AX=/^[0-9]+$/,Kd=hC.isValid,Bd=hC.parse,dC={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function pC(t,e){var r=CX(t);if(!e)return r;typeof e!="function"&&(e=mC(e));for(var n=0;n<r.length-1;n++)e(r[n],n)||(r.length=n+1);return r}function mC(t){if(!t)throw new TypeError("argument is required");var e;if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<e.length;r++)t=e[r],Object.prototype.hasOwnProperty.call(dC,t)&&(t=dC[t],e.splice.apply(e,[r,1].concat(t)),r+=t.length-1);return qX(kX(e))}function kX(t){for(var e=new Array(t.length),r=0;r<t.length;r++)e[r]=jX(t[r]);return e}function qX(t){var e=t.length;return e===0?xX:e===1?FX(t[0]):MX(t)}function jX(t){var e=t.lastIndexOf("/"),r=e!==-1?t.substring(0,e):t;if(!Kd(r))throw new TypeError("invalid IP address: "+r);var n=Bd(r);e===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());var s=n.kind()==="ipv6"?128:32,i=e!==-1?t.substring(e+1,t.length):null;if(i===null?i=s:AX.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&Kd(i)?i=DX(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+t);return[n,i]}function DX(t){var e=Bd(t),r=e.kind();return r==="ipv4"?e.prefixLengthFromSubnetMask():null}function LX(t,e){if(!t)throw new TypeError("req argument is required");if(!e)throw new TypeError("trust argument is required");var r=pC(t,e),n=r[r.length-1];return n}function xX(){return!1}function MX(t){return function(r){if(!Kd(r))return!1;for(var n=Bd(r),s,i=n.kind(),o=0;o<t.length;o++){var a=t[o],u=a[0],c=u.kind(),l=a[1],f=n;if(i!==c){if(c==="ipv4"&&!n.isIPv4MappedAddress())continue;s||(s=c==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),f=s}if(f.match(u,l))return!0}return!1}}function FX(t){var e=t[0],r=e.kind(),n=r==="ipv4",s=t[1];return function(o){if(!Kd(o))return!1;var a=Bd(o),u=a.kind();if(u!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(e,s)}}});var Sl=_((Sge,gC)=>{var VX="2.0.0",zX=Number.MAX_SAFE_INTEGER||9007199254740991,HX=16,UX=250,KX=["major","premajor","minor","preminor","patch","prepatch","prerelease"];gC.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:HX,MAX_SAFE_BUILD_LENGTH:UX,MAX_SAFE_INTEGER:zX,RELEASE_TYPES:KX,SEMVER_SPEC_VERSION:VX,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var $l=_(($ge,_C)=>{var BX=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};_C.exports=BX});var ha=_((Ss,vC)=>{var{MAX_SAFE_COMPONENT_LENGTH:q_,MAX_SAFE_BUILD_LENGTH:GX,MAX_LENGTH:JX}=Sl(),WX=$l();Ss=vC.exports={};var YX=Ss.re=[],XX=Ss.safeRe=[],K=Ss.src=[],B=Ss.t={},QX=0,j_="[a-zA-Z0-9-]",ZX=[["\\s",1],["\\d",JX],[j_,GX]],eQ=t=>{for(let[e,r]of ZX)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},oe=(t,e,r)=>{let n=eQ(e),s=QX++;WX(t,s,e),B[t]=s,K[s]=e,YX[s]=new RegExp(e,r?"g":void 0),XX[s]=new RegExp(n,r?"g":void 0)};oe("NUMERICIDENTIFIER","0|[1-9]\\d*");oe("NUMERICIDENTIFIERLOOSE","\\d+");oe("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${j_}*`);oe("MAINVERSION",`(${K[B.NUMERICIDENTIFIER]})\\.(${K[B.NUMERICIDENTIFIER]})\\.(${K[B.NUMERICIDENTIFIER]})`);oe("MAINVERSIONLOOSE",`(${K[B.NUMERICIDENTIFIERLOOSE]})\\.(${K[B.NUMERICIDENTIFIERLOOSE]})\\.(${K[B.NUMERICIDENTIFIERLOOSE]})`);oe("PRERELEASEIDENTIFIER",`(?:${K[B.NUMERICIDENTIFIER]}|${K[B.NONNUMERICIDENTIFIER]})`);oe("PRERELEASEIDENTIFIERLOOSE",`(?:${K[B.NUMERICIDENTIFIERLOOSE]}|${K[B.NONNUMERICIDENTIFIER]})`);oe("PRERELEASE",`(?:-(${K[B.PRERELEASEIDENTIFIER]}(?:\\.${K[B.PRERELEASEIDENTIFIER]})*))`);oe("PRERELEASELOOSE",`(?:-?(${K[B.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${K[B.PRERELEASEIDENTIFIERLOOSE]})*))`);oe("BUILDIDENTIFIER",`${j_}+`);oe("BUILD",`(?:\\+(${K[B.BUILDIDENTIFIER]}(?:\\.${K[B.BUILDIDENTIFIER]})*))`);oe("FULLPLAIN",`v?${K[B.MAINVERSION]}${K[B.PRERELEASE]}?${K[B.BUILD]}?`);oe("FULL",`^${K[B.FULLPLAIN]}$`);oe("LOOSEPLAIN",`[v=\\s]*${K[B.MAINVERSIONLOOSE]}${K[B.PRERELEASELOOSE]}?${K[B.BUILD]}?`);oe("LOOSE",`^${K[B.LOOSEPLAIN]}$`);oe("GTLT","((?:<|>)?=?)");oe("XRANGEIDENTIFIERLOOSE",`${K[B.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);oe("XRANGEIDENTIFIER",`${K[B.NUMERICIDENTIFIER]}|x|X|\\*`);oe("XRANGEPLAIN",`[v=\\s]*(${K[B.XRANGEIDENTIFIER]})(?:\\.(${K[B.XRANGEIDENTIFIER]})(?:\\.(${K[B.XRANGEIDENTIFIER]})(?:${K[B.PRERELEASE]})?${K[B.BUILD]}?)?)?`);oe("XRANGEPLAINLOOSE",`[v=\\s]*(${K[B.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[B.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[B.XRANGEIDENTIFIERLOOSE]})(?:${K[B.PRERELEASELOOSE]})?${K[B.BUILD]}?)?)?`);oe("XRANGE",`^${K[B.GTLT]}\\s*${K[B.XRANGEPLAIN]}$`);oe("XRANGELOOSE",`^${K[B.GTLT]}\\s*${K[B.XRANGEPLAINLOOSE]}$`);oe("COERCEPLAIN",`(^|[^\\d])(\\d{1,${q_}})(?:\\.(\\d{1,${q_}}))?(?:\\.(\\d{1,${q_}}))?`);oe("COERCE",`${K[B.COERCEPLAIN]}(?:$|[^\\d])`);oe("COERCEFULL",K[B.COERCEPLAIN]+`(?:${K[B.PRERELEASE]})?(?:${K[B.BUILD]})?(?:$|[^\\d])`);oe("COERCERTL",K[B.COERCE],!0);oe("COERCERTLFULL",K[B.COERCEFULL],!0);oe("LONETILDE","(?:~>?)");oe("TILDETRIM",`(\\s*)${K[B.LONETILDE]}\\s+`,!0);Ss.tildeTrimReplace="$1~";oe("TILDE",`^${K[B.LONETILDE]}${K[B.XRANGEPLAIN]}$`);oe("TILDELOOSE",`^${K[B.LONETILDE]}${K[B.XRANGEPLAINLOOSE]}$`);oe("LONECARET","(?:\\^)");oe("CARETTRIM",`(\\s*)${K[B.LONECARET]}\\s+`,!0);Ss.caretTrimReplace="$1^";oe("CARET",`^${K[B.LONECARET]}${K[B.XRANGEPLAIN]}$`);oe("CARETLOOSE",`^${K[B.LONECARET]}${K[B.XRANGEPLAINLOOSE]}$`);oe("COMPARATORLOOSE",`^${K[B.GTLT]}\\s*(${K[B.LOOSEPLAIN]})$|^$`);oe("COMPARATOR",`^${K[B.GTLT]}\\s*(${K[B.FULLPLAIN]})$|^$`);oe("COMPARATORTRIM",`(\\s*)${K[B.GTLT]}\\s*(${K[B.LOOSEPLAIN]}|${K[B.XRANGEPLAIN]})`,!0);Ss.comparatorTrimReplace="$1$2$3";oe("HYPHENRANGE",`^\\s*(${K[B.XRANGEPLAIN]})\\s+-\\s+(${K[B.XRANGEPLAIN]})\\s*$`);oe("HYPHENRANGELOOSE",`^\\s*(${K[B.XRANGEPLAINLOOSE]})\\s+-\\s+(${K[B.XRANGEPLAINLOOSE]})\\s*$`);oe("STAR","(<|>)?=?\\s*\\*");oe("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");oe("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Jd=_((bge,EC)=>{var tQ=Object.freeze({loose:!0}),rQ=Object.freeze({}),nQ=t=>t?typeof t!="object"?tQ:t:rQ;EC.exports=nQ});var D_=_((wge,bC)=>{var SC=/^[0-9]+$/,$C=(t,e)=>{let r=SC.test(t),n=SC.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},sQ=(t,e)=>$C(e,t);bC.exports={compareIdentifiers:$C,rcompareIdentifiers:sQ}});var ur=_((Rge,TC)=>{var Wd=$l(),{MAX_LENGTH:wC,MAX_SAFE_INTEGER:Yd}=Sl(),{safeRe:RC,t:PC}=ha(),iQ=Jd(),{compareIdentifiers:pa}=D_(),L_=class t{constructor(e,r){if(r=iQ(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>wC)throw new TypeError(`version is longer than ${wC} characters`);Wd("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?RC[PC.LOOSE]:RC[PC.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Yd||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Yd||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Yd||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Yd)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Wd("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),pa(this.major,e.major)||pa(this.minor,e.minor)||pa(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(Wd("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return pa(n,s)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(Wd("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return pa(n,s)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),pa(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};TC.exports=L_});var Zi=_((Pge,NC)=>{var OC=ur(),oQ=(t,e,r=!1)=>{if(t instanceof OC)return t;try{return new OC(t,e)}catch(n){if(!r)return null;throw n}};NC.exports=oQ});var CC=_((Tge,IC)=>{var aQ=Zi(),uQ=(t,e)=>{let r=aQ(t,e);return r?r.version:null};IC.exports=uQ});var kC=_((Oge,AC)=>{var lQ=Zi(),cQ=(t,e)=>{let r=lQ(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};AC.exports=cQ});var DC=_((Nge,jC)=>{var qC=ur(),fQ=(t,e,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new qC(t instanceof qC?t.version:t,r).inc(e,n,s).version}catch{return null}};jC.exports=fQ});var MC=_((Ige,xC)=>{var LC=Zi(),dQ=(t,e)=>{let r=LC(t,null,!0),n=LC(e,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};xC.exports=dQ});var VC=_((Cge,FC)=>{var hQ=ur(),pQ=(t,e)=>new hQ(t,e).major;FC.exports=pQ});var HC=_((Age,zC)=>{var mQ=ur(),yQ=(t,e)=>new mQ(t,e).minor;zC.exports=yQ});var KC=_((kge,UC)=>{var gQ=ur(),_Q=(t,e)=>new gQ(t,e).patch;UC.exports=_Q});var GC=_((qge,BC)=>{var vQ=Zi(),EQ=(t,e)=>{let r=vQ(t,e);return r&&r.prerelease.length?r.prerelease:null};BC.exports=EQ});var nn=_((jge,WC)=>{var JC=ur(),SQ=(t,e,r)=>new JC(t,r).compare(new JC(e,r));WC.exports=SQ});var XC=_((Dge,YC)=>{var $Q=nn(),bQ=(t,e,r)=>$Q(e,t,r);YC.exports=bQ});var ZC=_((Lge,QC)=>{var wQ=nn(),RQ=(t,e)=>wQ(t,e,!0);QC.exports=RQ});var Xd=_((xge,tA)=>{var eA=ur(),PQ=(t,e,r)=>{let n=new eA(t,r),s=new eA(e,r);return n.compare(s)||n.compareBuild(s)};tA.exports=PQ});var nA=_((Mge,rA)=>{var TQ=Xd(),OQ=(t,e)=>t.sort((r,n)=>TQ(r,n,e));rA.exports=OQ});var iA=_((Fge,sA)=>{var NQ=Xd(),IQ=(t,e)=>t.sort((r,n)=>NQ(n,r,e));sA.exports=IQ});var bl=_((Vge,oA)=>{var CQ=nn(),AQ=(t,e,r)=>CQ(t,e,r)>0;oA.exports=AQ});var Qd=_((zge,aA)=>{var kQ=nn(),qQ=(t,e,r)=>kQ(t,e,r)<0;aA.exports=qQ});var x_=_((Hge,uA)=>{var jQ=nn(),DQ=(t,e,r)=>jQ(t,e,r)===0;uA.exports=DQ});var M_=_((Uge,lA)=>{var LQ=nn(),xQ=(t,e,r)=>LQ(t,e,r)!==0;lA.exports=xQ});var Zd=_((Kge,cA)=>{var MQ=nn(),FQ=(t,e,r)=>MQ(t,e,r)>=0;cA.exports=FQ});var eh=_((Bge,fA)=>{var VQ=nn(),zQ=(t,e,r)=>VQ(t,e,r)<=0;fA.exports=zQ});var F_=_((Gge,dA)=>{var HQ=x_(),UQ=M_(),KQ=bl(),BQ=Zd(),GQ=Qd(),JQ=eh(),WQ=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return HQ(t,r,n);case"!=":return UQ(t,r,n);case">":return KQ(t,r,n);case">=":return BQ(t,r,n);case"<":return GQ(t,r,n);case"<=":return JQ(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};dA.exports=WQ});var pA=_((Jge,hA)=>{var YQ=ur(),XQ=Zi(),{safeRe:th,t:rh}=ha(),QQ=(t,e)=>{if(t instanceof YQ)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?th[rh.COERCEFULL]:th[rh.COERCE]);else{let u=e.includePrerelease?th[rh.COERCERTLFULL]:th[rh.COERCERTL],c;for(;(c=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return XQ(`${n}.${s}.${i}${o}${a}`,e)};hA.exports=QQ});var yA=_((Wge,mA)=>{"use strict";mA.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var _A=_((Yge,gA)=>{"use strict";gA.exports=ze;ze.Node=eo;ze.create=ze;function ze(t){var e=this;if(e instanceof ze||(e=new ze),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}ze.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ze.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ze.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ze.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)eZ(this,arguments[t]);return this.length};ze.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)tZ(this,arguments[t]);return this.length};ze.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ze.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ze.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};ze.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};ze.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};ze.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};ze.prototype.map=function(t,e){e=e||this;for(var r=new ze,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};ze.prototype.mapReverse=function(t,e){e=e||this;for(var r=new ze,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};ze.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=t(r,n.value,s),n=n.next;return r};ze.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=t(r,n.value,s),n=n.prev;return r};ze.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};ze.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};ze.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new ze;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)r.push(s.value);return r};ze.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new ze;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>t;n--,s=s.prev)r.push(s.value);return r};ze.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(var i=[],n=0;s&&n<e;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=ZQ(this,s,r[n]);return i};ze.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function ZQ(t,e,r){var n=e===t.head?new eo(r,null,e,t):new eo(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function eZ(t,e){t.tail=new eo(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function tZ(t,e){t.head=new eo(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function eo(t,e,r,n){if(!(this instanceof eo))return new eo(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{yA()(ze)}catch{}});var bA=_((Xge,$A)=>{"use strict";var rZ=_A(),to=Symbol("max"),bs=Symbol("length"),ma=Symbol("lengthCalculator"),Rl=Symbol("allowStale"),ro=Symbol("maxAge"),$s=Symbol("dispose"),vA=Symbol("noDisposeOnSet"),Vt=Symbol("lruList"),On=Symbol("cache"),SA=Symbol("updateAgeOnGet"),V_=()=>1,H_=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[to]=e.max||1/0,n=e.length||V_;if(this[ma]=typeof n!="function"?V_:n,this[Rl]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[ro]=e.maxAge||0,this[$s]=e.dispose,this[vA]=e.noDisposeOnSet||!1,this[SA]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[to]=e||1/0,wl(this)}get max(){return this[to]}set allowStale(e){this[Rl]=!!e}get allowStale(){return this[Rl]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[ro]=e,wl(this)}get maxAge(){return this[ro]}set lengthCalculator(e){typeof e!="function"&&(e=V_),e!==this[ma]&&(this[ma]=e,this[bs]=0,this[Vt].forEach(r=>{r.length=this[ma](r.value,r.key),this[bs]+=r.length})),wl(this)}get lengthCalculator(){return this[ma]}get length(){return this[bs]}get itemCount(){return this[Vt].length}rforEach(e,r){r=r||this;for(let n=this[Vt].tail;n!==null;){let s=n.prev;EA(this,e,n,r),n=s}}forEach(e,r){r=r||this;for(let n=this[Vt].head;n!==null;){let s=n.next;EA(this,e,n,r),n=s}}keys(){return this[Vt].toArray().map(e=>e.key)}values(){return this[Vt].toArray().map(e=>e.value)}reset(){this[$s]&&this[Vt]&&this[Vt].length&&this[Vt].forEach(e=>this[$s](e.key,e.value)),this[On]=new Map,this[Vt]=new rZ,this[bs]=0}dump(){return this[Vt].map(e=>nh(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Vt]}set(e,r,n){if(n=n||this[ro],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[ma](r,e);if(this[On].has(e)){if(i>this[to])return ya(this,this[On].get(e)),!1;let u=this[On].get(e).value;return this[$s]&&(this[vA]||this[$s](e,u.value)),u.now=s,u.maxAge=n,u.value=r,this[bs]+=i-u.length,u.length=i,this.get(e),wl(this),!0}let o=new U_(e,r,i,s,n);return o.length>this[to]?(this[$s]&&this[$s](e,r),!1):(this[bs]+=o.length,this[Vt].unshift(o),this[On].set(e,this[Vt].head),wl(this),!0)}has(e){if(!this[On].has(e))return!1;let r=this[On].get(e).value;return!nh(this,r)}get(e){return z_(this,e,!0)}peek(e){return z_(this,e,!1)}pop(){let e=this[Vt].tail;return e?(ya(this,e),e.value):null}del(e){ya(this,this[On].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let s=e[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-r;o>0&&this.set(s.k,s.v,o)}}}prune(){this[On].forEach((e,r)=>z_(this,r,!1))}},z_=(t,e,r)=>{let n=t[On].get(e);if(n){let s=n.value;if(nh(t,s)){if(ya(t,n),!t[Rl])return}else r&&(t[SA]&&(n.value.now=Date.now()),t[Vt].unshiftNode(n));return s.value}},nh=(t,e)=>{if(!e||!e.maxAge&&!t[ro])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[ro]&&r>t[ro]},wl=t=>{if(t[bs]>t[to])for(let e=t[Vt].tail;t[bs]>t[to]&&e!==null;){let r=e.prev;ya(t,e),e=r}},ya=(t,e)=>{if(e){let r=e.value;t[$s]&&t[$s](r.key,r.value),t[bs]-=r.length,t[On].delete(r.key),t[Vt].removeNode(e)}},U_=class{constructor(e,r,n,s,i){this.key=e,this.value=r,this.length=n,this.now=s,this.maxAge=i||0}},EA=(t,e,r,n)=>{let s=r.value;nh(t,s)&&(ya(t,r),t[Rl]||(s=void 0)),s&&e.call(n,s.value,s.key,t)};$A.exports=H_});var sn=_((Qge,TA)=>{var K_=class t{constructor(e,r){if(r=sZ(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof B_)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!RA(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&fZ(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&lZ)|(this.options.loose&&cZ))+":"+e,s=wA.get(n);if(s)return s;let i=this.options.loose,o=i?Cr[gr.HYPHENRANGELOOSE]:Cr[gr.HYPHENRANGE];e=e.replace(o,SZ(this.options.includePrerelease)),ft("hyphen replace",e),e=e.replace(Cr[gr.COMPARATORTRIM],oZ),ft("comparator trim",e),e=e.replace(Cr[gr.TILDETRIM],aZ),ft("tilde trim",e),e=e.replace(Cr[gr.CARETTRIM],uZ),ft("caret trim",e);let a=e.split(" ").map(f=>dZ(f,this.options)).join(" ").split(/\s+/).map(f=>EZ(f,this.options));i&&(a=a.filter(f=>(ft("loose invalid filter",f,this.options),!!f.match(Cr[gr.COMPARATORLOOSE])))),ft("range list",a);let u=new Map,c=a.map(f=>new B_(f,this.options));for(let f of c){if(RA(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return wA.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>PA(n,r)&&e.set.some(s=>PA(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new iZ(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if($Z(this.set[r],e,this.options))return!0;return!1}};TA.exports=K_;var nZ=bA(),wA=new nZ({max:1e3}),sZ=Jd(),B_=Pl(),ft=$l(),iZ=ur(),{safeRe:Cr,t:gr,comparatorTrimReplace:oZ,tildeTrimReplace:aZ,caretTrimReplace:uZ}=ha(),{FLAG_INCLUDE_PRERELEASE:lZ,FLAG_LOOSE:cZ}=Sl(),RA=t=>t.value==="<0.0.0-0",fZ=t=>t.value==="",PA=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},dZ=(t,e)=>(ft("comp",t,e),t=mZ(t,e),ft("caret",t),t=hZ(t,e),ft("tildes",t),t=gZ(t,e),ft("xrange",t),t=vZ(t,e),ft("stars",t),t),_r=t=>!t||t.toLowerCase()==="x"||t==="*",hZ=(t,e)=>t.trim().split(/\s+/).map(r=>pZ(r,e)).join(" "),pZ=(t,e)=>{let r=e.loose?Cr[gr.TILDELOOSE]:Cr[gr.TILDE];return t.replace(r,(n,s,i,o,a)=>{ft("tilde",t,n,s,i,o,a);let u;return _r(s)?u="":_r(i)?u=`>=${s}.0.0 <${+s+1}.0.0-0`:_r(o)?u=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(ft("replaceTilde pr",a),u=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):u=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,ft("tilde return",u),u})},mZ=(t,e)=>t.trim().split(/\s+/).map(r=>yZ(r,e)).join(" "),yZ=(t,e)=>{ft("caret",t,e);let r=e.loose?Cr[gr.CARETLOOSE]:Cr[gr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,u)=>{ft("caret",t,s,i,o,a,u);let c;return _r(i)?c="":_r(o)?c=`>=${i}.0.0${n} <${+i+1}.0.0-0`:_r(a)?i==="0"?c=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:u?(ft("replaceCaret pr",u),i==="0"?o==="0"?c=`>=${i}.${o}.${a}-${u} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}-${u} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a}-${u} <${+i+1}.0.0-0`):(ft("no pr"),i==="0"?o==="0"?c=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),ft("caret return",c),c})},gZ=(t,e)=>(ft("replaceXRanges",t,e),t.split(/\s+/).map(r=>_Z(r,e)).join(" ")),_Z=(t,e)=>{t=t.trim();let r=e.loose?Cr[gr.XRANGELOOSE]:Cr[gr.XRANGE];return t.replace(r,(n,s,i,o,a,u)=>{ft("xRange",t,n,s,i,o,a,u);let c=_r(i),l=c||_r(o),f=l||_r(a),h=f;return s==="="&&h&&(s=""),u=e.includePrerelease?"-0":"",c?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&h?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(u="-0"),n=`${s+i}.${o}.${a}${u}`):l?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${u} <${i}.${+o+1}.0-0`),ft("xRange return",n),n})},vZ=(t,e)=>(ft("replaceStars",t,e),t.trim().replace(Cr[gr.STAR],"")),EZ=(t,e)=>(ft("replaceGTE0",t,e),t.trim().replace(Cr[e.includePrerelease?gr.GTE0PRE:gr.GTE0],"")),SZ=t=>(e,r,n,s,i,o,a,u,c,l,f,h,d)=>(_r(n)?r="":_r(s)?r=`>=${n}.0.0${t?"-0":""}`:_r(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,_r(c)?u="":_r(l)?u=`<${+c+1}.0.0-0`:_r(f)?u=`<${c}.${+l+1}.0-0`:h?u=`<=${c}.${l}.${f}-${h}`:t?u=`<${c}.${l}.${+f+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),$Z=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(ft(t[n].semver),t[n].semver!==B_.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var Pl=_((Zge,kA)=>{var Tl=Symbol("SemVer ANY"),W_=class t{static get ANY(){return Tl}constructor(e,r){if(r=OA(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),J_("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Tl?this.value="":this.value=this.operator+this.semver.version,J_("comp",this)}parse(e){let r=this.options.loose?NA[IA.COMPARATORLOOSE]:NA[IA.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new CA(n[2],this.options.loose):this.semver=Tl}toString(){return this.value}test(e){if(J_("Comparator.test",e,this.options.loose),this.semver===Tl||e===Tl)return!0;if(typeof e=="string")try{e=new CA(e,this.options)}catch{return!1}return G_(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new AA(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new AA(this.value,r).test(e.semver):(r=OA(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||G_(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||G_(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};kA.exports=W_;var OA=Jd(),{safeRe:NA,t:IA}=ha(),G_=F_(),J_=$l(),CA=ur(),AA=sn()});var Ol=_((e0e,qA)=>{var bZ=sn(),wZ=(t,e,r)=>{try{e=new bZ(e,r)}catch{return!1}return e.test(t)};qA.exports=wZ});var DA=_((t0e,jA)=>{var RZ=sn(),PZ=(t,e)=>new RZ(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));jA.exports=PZ});var xA=_((r0e,LA)=>{var TZ=ur(),OZ=sn(),NZ=(t,e,r)=>{let n=null,s=null,i=null;try{i=new OZ(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new TZ(n,r))}),n};LA.exports=NZ});var FA=_((n0e,MA)=>{var IZ=ur(),CZ=sn(),AZ=(t,e,r)=>{let n=null,s=null,i=null;try{i=new CZ(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new IZ(n,r))}),n};MA.exports=AZ});var HA=_((s0e,zA)=>{var Y_=ur(),kZ=sn(),VA=bl(),qZ=(t,e)=>{t=new kZ(t,e);let r=new Y_("0.0.0");if(t.test(r)||(r=new Y_("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new Y_(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||VA(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||VA(r,i))&&(r=i)}return r&&t.test(r)?r:null};zA.exports=qZ});var KA=_((i0e,UA)=>{var jZ=sn(),DZ=(t,e)=>{try{return new jZ(t,e).range||"*"}catch{return null}};UA.exports=DZ});var sh=_((o0e,WA)=>{var LZ=ur(),JA=Pl(),{ANY:xZ}=JA,MZ=sn(),FZ=Ol(),BA=bl(),GA=Qd(),VZ=eh(),zZ=Zd(),HZ=(t,e,r,n)=>{t=new LZ(t,n),e=new MZ(e,n);let s,i,o,a,u;switch(r){case">":s=BA,i=VZ,o=GA,a=">",u=">=";break;case"<":s=GA,i=zZ,o=BA,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(FZ(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],f=null,h=null;if(l.forEach(d=>{d.semver===xZ&&(d=new JA(">=0.0.0")),f=f||d,h=h||d,s(d.semver,f.semver,n)?f=d:o(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===u||(!h.operator||h.operator===a)&&i(t,h.semver))return!1;if(h.operator===u&&o(t,h.semver))return!1}return!0};WA.exports=HZ});var XA=_((a0e,YA)=>{var UZ=sh(),KZ=(t,e,r)=>UZ(t,e,">",r);YA.exports=KZ});var ZA=_((u0e,QA)=>{var BZ=sh(),GZ=(t,e,r)=>BZ(t,e,"<",r);QA.exports=GZ});var rk=_((l0e,tk)=>{var ek=sn(),JZ=(t,e,r)=>(t=new ek(t,r),e=new ek(e,r),t.intersects(e,r));tk.exports=JZ});var sk=_((c0e,nk)=>{var WZ=Ol(),YZ=nn();nk.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((l,f)=>YZ(l,f,r));for(let l of o)WZ(l,e,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,f]of n)l===f?a.push(l):!f&&l===o[0]?a.push("*"):f?l===o[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var ck=_((f0e,lk)=>{var ik=sn(),Q_=Pl(),{ANY:X_}=Q_,Nl=Ol(),Z_=nn(),XZ=(t,e,r={})=>{if(t===e)return!0;t=new ik(t,r),e=new ik(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=ZZ(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},QZ=[new Q_(">=0.0.0-0")],ok=[new Q_(">=0.0.0")],ZZ=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===X_){if(e.length===1&&e[0].semver===X_)return!0;r.includePrerelease?t=QZ:t=ok}if(e.length===1&&e[0].semver===X_){if(r.includePrerelease)return!0;e=ok}let n=new Set,s,i;for(let d of t)d.operator===">"||d.operator===">="?s=ak(s,d,r):d.operator==="<"||d.operator==="<="?i=uk(i,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Z_(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let d of n){if(s&&!Nl(d,String(s),r)||i&&!Nl(d,String(i),r))return null;for(let p of e)if(!Nl(d,String(p),r))return!1;return!0}let a,u,c,l,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(l=l||d.operator===">"||d.operator===">=",c=c||d.operator==="<"||d.operator==="<=",s){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=ak(s,d,r),a===d&&a!==s)return!1}else if(s.operator===">="&&!Nl(s.semver,String(d),r))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(u=uk(i,d,r),u===d&&u!==i)return!1}else if(i.operator==="<="&&!Nl(i.semver,String(d),r))return!1}if(!d.operator&&(i||s)&&o!==0)return!1}return!(s&&c&&!i&&o!==0||i&&l&&!s&&o!==0||h||f)},ak=(t,e,r)=>{if(!t)return e;let n=Z_(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},uk=(t,e,r)=>{if(!t)return e;let n=Z_(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};lk.exports=XZ});var tv=_((d0e,hk)=>{var ev=ha(),fk=Sl(),eee=ur(),dk=D_(),tee=Zi(),ree=CC(),nee=kC(),see=DC(),iee=MC(),oee=VC(),aee=HC(),uee=KC(),lee=GC(),cee=nn(),fee=XC(),dee=ZC(),hee=Xd(),pee=nA(),mee=iA(),yee=bl(),gee=Qd(),_ee=x_(),vee=M_(),Eee=Zd(),See=eh(),$ee=F_(),bee=pA(),wee=Pl(),Ree=sn(),Pee=Ol(),Tee=DA(),Oee=xA(),Nee=FA(),Iee=HA(),Cee=KA(),Aee=sh(),kee=XA(),qee=ZA(),jee=rk(),Dee=sk(),Lee=ck();hk.exports={parse:tee,valid:ree,clean:nee,inc:see,diff:iee,major:oee,minor:aee,patch:uee,prerelease:lee,compare:cee,rcompare:fee,compareLoose:dee,compareBuild:hee,sort:pee,rsort:mee,gt:yee,lt:gee,eq:_ee,neq:vee,gte:Eee,lte:See,cmp:$ee,coerce:bee,Comparator:wee,Range:Ree,satisfies:Pee,toComparators:Tee,maxSatisfying:Oee,minSatisfying:Nee,minVersion:Iee,validRange:Cee,outside:Aee,gtr:kee,ltr:qee,intersects:jee,simplifyRange:Dee,subset:Lee,SemVer:eee,re:ev.re,src:ev.src,tokens:ev.t,SEMVER_SPEC_VERSION:fk.SEMVER_SPEC_VERSION,RELEASE_TYPES:fk.RELEASE_TYPES,compareIdentifiers:dk.compareIdentifiers,rcompareIdentifiers:dk.rcompareIdentifiers}});var oh=_((h0e,iv)=>{"use strict";var ih=yC(),xee=tv(),{FSTDEP005:Mee,FSTDEP012:Fee,FSTDEP015:Vee,FSTDEP016:zee,FSTDEP017:Hee,FSTDEP018:Uee}=ls(),{kHasBeenDecorated:Kee,kSchemaBody:Bee,kSchemaHeaders:Gee,kSchemaParams:Jee,kSchemaQuerystring:pk,kSchemaController:rv,kOptions:Wee,kRequestCacheValidateFns:ii,kRouteContext:Ot,kPublicRouteContext:mk,kRequestOriginalUrl:nv}=Mt(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:Yee}=rr(),yk={body:Bee,headers:Gee,params:Jee,querystring:pk,query:pk};function sv(t,e,r,n,s,i){this.id=t,this[Ot]=i,this.params=e,this.raw=r,this.query=n,this.log=s,this.body=void 0}sv.props=[];function Xee(t){if(typeof t=="function")return t;if(t===!0)return function(){return!0};if(typeof t=="number")return function(e,r){return r<t};if(typeof t=="string"){let e=t.split(",").map(r=>r.trim());return ih.compile(e)}return ih.compile(t)}function Qee(t,e){return e?Zee(t,e):_k(t)}function _k(t){let e=t.props.slice();function r(n,s,i,o,a,u){this.id=n,this[Ot]=u,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;for(var c,l=0;l<e.length;l++)c=e[l],this[c.key]=c.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.props=e,r.parent=t,r}function gk(t){let e=t.lastIndexOf(",");return e===-1?t.trim():t.slice(e+1).trim()}function Zee(t,e){let r=_k(t),n=Xee(e);return r[Kee]=!0,Object.defineProperties(r.prototype,{ip:{get(){return ih(this.raw,n)}},ips:{get(){return ih.all(this.raw,n)}},hostname:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?gk(this.headers["x-forwarded-host"]):this.headers.host||this.headers[":authority"]}},protocol:{get(){if(this.headers["x-forwarded-proto"])return gk(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(sv.prototype,{server:{get(){return this[Ot].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[nv]||(this[nv]=this.raw.originalUrl||this.raw.url),this[nv]}},method:{get(){return this.raw.method}},context:{get(){return Fee(),this[Ot]}},routerPath:{get(){return Hee(),this[Ot].config?.url}},routeOptions:{get(){let t=this[Ot],e=t._parserOptions.limit,r=t.server.initialConfig.bodyLimit,n=t.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,s={method:t.config?.method,url:t.config?.url,bodyLimit:e||r,attachValidation:t.attachValidation,logLevel:t.logLevel,exposeHeadRoute:t.exposeHeadRoute,prefixTrailingSlash:t.prefixTrailingSlash,handler:t.handler,version:n};return Object.defineProperties(s,{config:{get:()=>t.config},schema:{get:()=>t.schema}}),Object.freeze(s)}},routerMethod:{get(){return Uee(),this[Ot].config?.method}},routeConfig:{get(){return zee(),this[Ot][mk]?.config}},routeSchema:{get(){return Vee(),this[Ot][mk].schema}},is404:{get(){return this[Ot].config?.url===void 0}},connection:{get(){return xee.gte(process.versions.node,"13.0.0")&&Mee(),this.raw.connection}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},hostname:{get(){return this.raw.headers.host||this.raw.headers[":authority"]}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(t){this.additionalHeaders=t}},getValidationFunction:{value:function(t){if(typeof t=="string"){let e=yk[t];return this[Ot][e]}else if(typeof t=="object")return this[Ot][ii]?.get(t)}},compileValidationSchema:{value:function(t,e=null){let{method:r,url:n}=this;if(this[Ot][ii]?.has(t))return this[Ot][ii].get(t);let i=(this[Ot].validatorCompiler||this.server[rv].validatorCompiler||this.server[rv].setupValidator(this.server[Wee])||this.server[rv].validatorCompiler)({schema:t,method:r,url:n,httpPart:e});return this[Ot][ii]==null&&(this[Ot][ii]=new WeakMap),this[Ot][ii].set(t,i),i}},validateInput:{value:function(t,e,r){r=typeof e=="string"?e:r;let n=r!=null&&typeof r=="string"&&yk[r],s;if(n&&(s=this[Ot][n]),s==null&&(e==null||typeof e!="object"||Array.isArray(e)))throw new Yee(r);return s==null&&(this[Ot][ii]?.has(e)?s=this[Ot][ii].get(e):s=this.compileValidationSchema(e,r)),s(t)}}});iv.exports=sv;iv.exports.buildRequest=Qee});var ah=_((p0e,vk)=>{"use strict";var{kFourOhFourContext:ete,kReplySerializerDefault:tte,kSchemaErrorFormatter:rte,kErrorHandler:nte,kChildLoggerFactory:ste,kOptions:ite,kReply:ote,kRequest:ate,kBodyLimit:ute,kLogLevel:lte,kContentTypeParser:cte,kRouteByFastify:fte,kRequestCacheValidateFns:dte,kReplyCacheSerializeFns:hte,kPublicRouteContext:pte}=Mt();function mte({schema:t,handler:e,config:r,requestIdLogLabel:n,childLoggerFactory:s,errorHandler:i,bodyLimit:o,logLevel:a,logSerializers:u,attachValidation:c,validatorCompiler:l,serializerCompiler:f,replySerializer:h,schemaErrorFormatter:d,exposeHeadRoute:p,prefixTrailingSlash:m,server:g,isFastify:E}){this.schema=t,this.handler=e,this.Reply=g[ote],this.Request=g[ate],this.contentTypeParser=g[cte],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=i||g[nte],this.requestIdLogLabel=n||g[ite].requestIdLogLabel,this.childLoggerFactory=s||g[ste],this._middie=null,this._parserOptions={limit:o||g[ute]},this.exposeHeadRoute=p,this.prefixTrailingSlash=m,this.logLevel=a||g[lte],this.logSerializers=u,this[ete]=null,this.attachValidation=c,this[tte]=h,this.schemaErrorFormatter=d||g[rte]||gte,this[fte]=E,this[dte]=null,this[hte]=null,this.validatorCompiler=l||null,this.serializerCompiler=f||null,this[pte]=yte(this),this.server=g}function yte(t){return Object.create(null,{schema:{enumerable:!0,get(){return t.schema}},config:{enumerable:!0,get(){return t.config}}})}function gte(t,e){let r="",n=", ";for(var s=0;s!==t.length;++s){let i=t[s];r+=e+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}vk.exports=mte});var ov=_((m0e,Ek)=>{"use strict";Ek.exports={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH"]}});var fv=_((y0e,wk)=>{"use strict";var{kReply:av,kRequest:uv,kState:_te,kHasBeenDecorated:vte}=Mt(),{FST_ERR_DEC_ALREADY_PRESENT:Sk,FST_ERR_DEC_MISSING_DEPENDENCY:Ete,FST_ERR_DEC_AFTER_START:Ste,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:$te}=rr(),{FSTDEP006:bte}=ls();function wte(t,e,r,n){if(Object.prototype.hasOwnProperty.call(t,e))throw new Sk(e);lv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(t,e,{get:r.getter,set:r.setter}):t[e]=r}function $k(t,e,r,n){let s=t.prototype;if(Object.prototype.hasOwnProperty.call(s,e)||lh(t,e))throw new Sk(e);t[vte]=!0,lv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,e,{get:r.getter,set:r.setter}):typeof r=="function"?s[e]=r:t.props.push({key:e,value:r})}function bk(t,e){typeof e=="object"&&e&&!(typeof e.getter=="function"||typeof e.setter=="function")&&bte(t)}function Rte(t,e,r){return cv(this,t),wte(this,t,e,r),this}function uh(t,e){return e?e in t||t.prototype&&e in t.prototype||lh(t,e):t in this}function lh(t,e){return t.props?t.props.find(({key:r})=>r===e):!1}function Pte(t){return t&&lh(this[uv],t)?!0:uh(this[uv].prototype,t)}function Tte(t){return t&&lh(this[av],t)?!0:uh(this[av].prototype,t)}function lv(t,e,r){if(r!=null){if(!Array.isArray(r))throw new $te(e);for(var n=0;n!==r.length;++n)if(!uh(t,r[n]))throw new Ete(r[n])}}function Ote(t,e,r){return cv(this,t),bk(t,e),$k(this[av],t,e,r),this}function Nte(t,e,r){return cv(this,t),bk(t,e),$k(this[uv],t,e,r),this}function cv(t,e){if(t[_te].started)throw new Ste(e)}wk.exports={add:Rte,exist:uh,existRequest:Pte,existReply:Tte,dependencies:lv,decorateReply:Ote,decorateRequest:Nte}});var Pk=_(Jn=>{"use strict";var dv=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},hv=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Il=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}},ch=class{constructor(){this.records={}}initForCache(e,r){this.records[e]={[r]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(e){for(let r of Object.keys(this.records[e]))this.records[e][r]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}};function Rk(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}var pv=class{constructor(e,r,n){this.cacheId=e,this.statisticTtlInHours=r,this.collectionStart=new Date,this.currentTimeStamp=Rk(this.collectionStart),this.records=n||new ch,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(e){this.archiveIfNeeded(),this.currentRecord.cacheSize=e}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()>=this.statisticTtlInHours&&(this.collectionStart=new Date,this.currentTimeStamp=Rk(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}},fh=class extends Il{constructor(e,r,n,s,i){if(super(e||1e3,r||0),!n)throw new Error("Cache id is mandatory");this.hitStatistics=new pv(n,i!==void 0?i:24,s)}getStatistics(){return this.hitStatistics.getStatistics()}set(e,r){super.set(e,r),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(e,r=!1){super.delete(e),r||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e,!0),this.hitStatistics.addExpiration();return}return this.bumpLru(r),r.value||this.hitStatistics.addFalsyHit(),(r.value===void 0||r.value===null||r.value==="")&&this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},dh=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};Jn.Fifo=dh;Jn.FifoMap=dv;Jn.FifoObject=dh;Jn.HitStatisticsRecord=ch;Jn.Lru=Il;Jn.LruHitStatistics=fh;Jn.LruMap=hv;Jn.LruObject=Il;Jn.LruObjectHitStatistics=fh});var Ik=_((_0e,Cl)=>{"use strict";var mh=function(){};mh.prototype=Object.create(null);var hh=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,ph=/\\([\v\u0020-\u00ff])/gu,Tk=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,no={type:"",parameters:new mh};Object.freeze(no.parameters);Object.freeze(no);function Ok(t){if(typeof t!="string")throw new TypeError("argument header is required and must be a string");let e=t.indexOf(";"),r=e!==-1?t.slice(0,e).trim():t.trim();if(Tk.test(r)===!1)throw new TypeError("invalid media type");let n={type:r.toLowerCase(),parameters:new mh};if(e===-1)return n;let s,i,o;for(hh.lastIndex=e;i=hh.exec(t);){if(i.index!==e)throw new TypeError("invalid parameter format");e+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),ph.test(o)&&(o=o.replace(ph,"$1"))),n.parameters[s]=o}if(e!==t.length)throw new TypeError("invalid parameter format");return n}function Nk(t){if(typeof t!="string")return no;let e=t.indexOf(";"),r=e!==-1?t.slice(0,e).trim():t.trim();if(Tk.test(r)===!1)return no;let n={type:r.toLowerCase(),parameters:new mh};if(e===-1)return n;let s,i,o;for(hh.lastIndex=e;i=hh.exec(t);){if(i.index!==e)return no;e+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),ph.test(o)&&(o=o.replace(ph,"$1"))),n.parameters[s]=o}return e!==t.length?no:n}Cl.exports.default={parse:Ok,safeParse:Nk};Cl.exports.parse=Ok;Cl.exports.safeParse=Nk;Cl.exports.defaultContentType=no});var jk=_((v0e,ga)=>{"use strict";var Ite=typeof Buffer<"u",Ck=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Ak=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function kk(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),Ite&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(Ck.test(t)===!1&&Ak.test(t)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(Ck.test(t)===!1)return n}else if(Ak.test(t)===!1)return n;return qk(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function qk(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let s=[t];for(;s.length;){let i=s;s=[];for(let o of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let u=o[a];u&&typeof u=="object"&&s.push(u)}}}return t}function mv(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return kk(t,e,r)}finally{Error.stackTraceLimit=n}}function Cte(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return kk(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}ga.exports=mv;ga.exports.default=mv;ga.exports.parse=mv;ga.exports.safeParse=Cte;ga.exports.scan=qk});var Ev=_((E0e,kl)=>{"use strict";var{AsyncResource:Ate}=require("node:async_hooks"),{FifoMap:Lk}=Pk(),{safeParse:xk,defaultContentType:kte}=Ik(),qte=jk(),{kDefaultJsonParse:Al,kContentTypeParser:_a,kBodyLimit:jte,kRequestPayloadStream:Mk,kState:gv,kTestInternals:Dte,kReplyIsError:Fk,kRouteContext:Lte}=Mt(),{FST_ERR_CTP_INVALID_TYPE:Vk,FST_ERR_CTP_EMPTY_TYPE:xte,FST_ERR_CTP_ALREADY_PRESENT:Mte,FST_ERR_CTP_INVALID_HANDLER:Fte,FST_ERR_CTP_INVALID_PARSE_TYPE:Vte,FST_ERR_CTP_BODY_TOO_LARGE:Dk,FST_ERR_CTP_INVALID_MEDIA_TYPE:zte,FST_ERR_CTP_INVALID_CONTENT_LENGTH:Hte,FST_ERR_CTP_EMPTY_JSON_BODY:Ute,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:_v}=rr();function ws(t,e,r){this[Al]=Hk(e,r),this.customParsers=new Map,this.customParsers.set("application/json",new yv(!0,!1,t,this[Al])),this.customParsers.set("text/plain",new yv(!0,!1,t,vv)),this.parserList=[new yh("application/json"),new yh("text/plain")],this.parserRegExpList=[],this.cache=new Lk(100)}ws.prototype.add=function(t,e,r){let n=typeof t=="string";if(!n&&!(t instanceof RegExp))throw new Vk;if(n&&t.length===0)throw new xte;if(typeof r!="function")throw new Fte;if(this.existingParser(t))throw new Mte(t);if(e.parseAs!==void 0&&e.parseAs!=="string"&&e.parseAs!=="buffer")throw new Vte(e.parseAs);let s=new yv(e.parseAs==="string",e.parseAs==="buffer",e.bodyLimit,r);n&&t==="*"?this.customParsers.set("",s):(n?this.parserList.unshift(new yh(t)):(t.isEssence=t.source.indexOf(";")===-1,this.parserRegExpList.unshift(t)),this.customParsers.set(t.toString(),s))};ws.prototype.hasParser=function(t){return this.customParsers.has(typeof t=="string"?t:t.toString())};ws.prototype.existingParser=function(t){return t==="application/json"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==this[Al]:t==="text/plain"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==vv:this.hasParser(t)};ws.prototype.getParser=function(t){if(this.hasParser(t))return this.customParsers.get(t);let e=this.cache.get(t);if(e!==void 0)return e;let r=xk(t);if(r===kte)return this.customParsers.get("");for(var n=0;n!==this.parserList.length;++n){let i=this.parserList[n];if(Yte(r,i)){let o=this.customParsers.get(i.name);return this.cache.set(t,o),o}}for(var s=0;s!==this.parserRegExpList.length;++s){let i=this.parserRegExpList[s];if(Xte(t,r.type,i)){let o=this.customParsers.get(i.toString());return this.cache.set(t,o),o}}return this.customParsers.get("")};ws.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new Lk(100)};ws.prototype.remove=function(t){if(!(typeof t=="string"||t instanceof RegExp))throw new Vk;let e=this.customParsers.delete(t.toString()),r=typeof t=="string"?this.parserList:this.parserRegExpList,n=r.findIndex(s=>s.toString()===t.toString());return n>-1&&r.splice(n,1),e||n>-1};ws.prototype.run=function(t,e,r,n){let s=this.getParser(t);if(s===void 0){r.is404?e(r,n):n.send(new zte(t||void 0));return}let i=new Ate("content-type-parser:run",r);if(s.asString===!0||s.asBuffer===!0)zk(r,n,n[Lte]._parserOptions,s,o);else{let a=s.fn(r,r[Mk],o);a&&typeof a.then=="function"&&a.then(u=>o(null,u),o)}function o(a,u){i.runInAsyncScope(()=>{i.emitDestroy(),a?(n[Fk]=!0,n.send(a)):(r.body=u,e(r,n))})}};function zk(t,e,r,n,s){let i=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=t.headers["content-length"]===void 0?NaN:Number(t.headers["content-length"]);if(a>o){e.header("connection","close"),e.send(new Dk);return}let u=0,c=i===!0?"":[],l=t[Mk]||t.raw;i===!0&&l.setEncoding("utf8"),l.on("data",f),l.on("end",h),l.on("error",h),l.resume();function f(d){u+=d.length;let{receivedEncodedLength:p=0}=l;if(u>o||p>o){l.removeListener("data",f),l.removeListener("end",h),l.removeListener("error",h),e.send(new Dk);return}i===!0?c+=d:c.push(d)}function h(d){if(l.removeListener("data",f),l.removeListener("end",h),l.removeListener("error",h),d!==void 0){typeof d.statusCode=="number"&&d.statusCode>=400||(d.statusCode=400),e[Fk]=!0,e.code(d.statusCode).send(d);return}if(i===!0&&(u=Buffer.byteLength(c)),!Number.isNaN(a)&&(l.receivedEncodedLength||u)!==a){e.header("connection","close"),e.send(new Hte);return}i===!1&&(c=Buffer.concat(c));let p=n.fn(t,c,s);p&&typeof p.then=="function"&&p.then(m=>s(null,m),s)}}function Hk(t,e){return r;function r(n,s,i){if(s===""||s==null||Buffer.isBuffer(s)&&s.length===0)return i(new Ute,void 0);let o;try{o=qte.parse(s,{protoAction:t,constructorAction:e})}catch(a){return a.statusCode=400,i(a,void 0)}i(null,o)}}function vv(t,e,r){r(null,e)}function yv(t,e,r,n){this.asString=t,this.asBuffer=e,this.bodyLimit=r,this.fn=n}function Kte(t){let e=new ws;return e[Al]=t[Al],e.customParsers=new Map(t.customParsers.entries()),e.parserList=t.parserList.slice(),e.parserRegExpList=t.parserRegExpList.slice(),e}function Bte(t,e,r){if(this[gv].started)throw new _v("addContentTypeParser");return typeof e=="function"&&(r=e,e={}),e||(e={}),e.bodyLimit||(e.bodyLimit=this[jte]),Array.isArray(t)?t.forEach(n=>this[_a].add(n,e,r)):this[_a].add(t,e,r),this}function Gte(t){return this[_a].hasParser(t)}function Jte(t){if(this[gv].started)throw new _v("removeContentTypeParser");if(Array.isArray(t))for(let e of t)this[_a].remove(e);else this[_a].remove(t)}function Wte(){if(this[gv].started)throw new _v("removeAllContentTypeParsers");this[_a].removeAll()}function Yte(t,e){if(e.isEssence)return t.type.indexOf(e)!==-1;if(t.type.indexOf(e.type)===-1)return!1;for(let r of e.parameterKeys)if(!(r in t.parameters)||t.parameters[r]!==e.parameters[r])return!1;return!0}function Xte(t,e,r){return r.isEssence?r.test(e):r.test(t)}function yh(t){this.name=t;let e=xk(t);if(this.isEssence=t.indexOf(";")===-1,this.isEssence===!1&&e.type===""){let r=t.split(";",1)[0];this.type=r===""?t:r}else this.type=e.type;this.parameters=e.parameters,this.parameterKeys=Object.keys(e.parameters)}yh.prototype.toString=function(){return this.name};kl.exports=ws;kl.exports.helpers={buildContentTypeParser:Kte,addContentTypeParser:Bte,hasContentTypeParser:Gte,removeContentTypeParser:Jte,removeAllContentTypeParsers:Wte};kl.exports.defaultParsers={getDefaultJsonParser:Hk,defaultTextParser:vv};kl.exports[Dte]={rawBody:zk}});var Gk=_((S0e,Bk)=>{"use strict";var Uk=Yr(),Qte=Symbol.for("json-schema-ref"),Sv=class{#e;#t;#n;#s;#i;constructor(e={}){this.#e={},this.#t={},this.#n=e.insertRefSymbol??!1,this.#s=e.allowEqualDuplicates??!0,this.#i=e.cloneSchemaWithoutRefs??!1}addSchema(e,r){e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#l(e,r),this.#a(e,r)}getSchema(e,r="#"){let n=this.#e[e];if(n===void 0)throw new Error(`Cannot resolve ref "${e}${r}". Schema with id "${e}" is not found.`);return n.anchors[r]!==void 0?n.anchors[r]:Kk(n.schema,r)}hasSchema(e){return this.#e[e]!==void 0}getSchemaRefs(e){let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);return r.refs}getSchemaDependencies(e,r={}){let n=this.#e[e];for(let s of n.refs){let i=s.schemaId;r[i]===void 0&&(r[i]=this.getSchema(i),this.getSchemaDependencies(i,r))}return r}derefSchema(e){if(this.#t[e]!==void 0)return;let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);!this.#i&&r.refs.length===0&&(this.#t[e]={schema:r.schema,anchors:r.anchors});let n=[];this.#r(r.schema,e,n);let s=this.getSchemaDependencies(e);for(let i in s){let o=s[i];this.#r(o,i,n)}for(let i of n){let{refSchemaId:o,refJsonPointer:a}=this.#o(i.ref,i.sourceSchemaId),u=this.getDerefSchema(o,a);if(u===null)throw new Error(`Cannot resolve ref "${i.ref}". Ref "${a}" is not found in schema "${o}".`);i.targetSchema=u,i.targetSchemaId=o}for(let i of n)this.#u(i,n)}getDerefSchema(e,r="#"){let n=this.#t[e];return n===void 0&&(this.derefSchema(e),n=this.#t[e]),n.anchors[r]!==void 0?n.anchors[r]:Kk(n.schema,r)}#o(e,r){let n=e.indexOf("#");return n===-1?{refSchemaId:e,refJsonPointer:"#"}:n===0?{refSchemaId:r,refJsonPointer:e}:{refSchemaId:e.slice(0,n),refJsonPointer:e.slice(n)}}#a(e,r){let n=e.$id;n!==void 0&&typeof n=="string"&&(n.charAt(0)==="#"?this.#c(e,r,n):(this.#l(e,n),r=n));let s=e.$ref;if(s!==void 0&&typeof s=="string"){let{refSchemaId:i,refJsonPointer:o}=this.#o(s,r);this.#e[r].refs.push({schemaId:i,jsonPointer:o})}for(let i in e)typeof e[i]=="object"&&e[i]!==null&&this.#a(e[i],r)}#r(e,r,n=[]){let s=Array.isArray(e)?[...e]:{...e},i=s.$id;i!==void 0&&typeof i=="string"&&(i.charAt(0)==="#"?this.#d(s,r,i):(this.#f(s,i),r=i)),s.$ref!==void 0&&n.push({ref:s.$ref,sourceSchemaId:r,sourceSchema:s});for(let o in s){let a=s[o];typeof a=="object"&&a!==null&&(s[o]=this.#r(a,r,n))}return s}#u(e,r){let{sourceSchema:n,targetSchema:s}=e;if(n.$ref){if(this.#n&&(n[Qte]=n.$ref),delete n.$ref,s.$ref){let i=r.find(o=>o.sourceSchema===s);this.#u(i,r)}for(let i in s)if(i!=="$id"){if(n[i]!==void 0){if(Uk(n[i],s[i]))continue;throw new Error(`Cannot resolve ref "${e.ref}". Property "${i}" is already exist in schema "${e.sourceSchemaId}".`)}n[i]=s[i]}e.isResolved=!0}}#l(e,r){let n=this.#e[r];if(n!==void 0){if(this.#s&&Uk(e,n.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#e[r]={schema:e,anchors:{},refs:[]}}#c(e,r,n){let{anchors:s}=this.#e[r];if(s[n]!==void 0)throw new Error(`There is already another anchor "${n}" in a schema "${r}".`);s[n]=e}#f(e,r){this.#t[r]===void 0&&(this.#t[r]={schema:e,anchors:{}})}#d(e,r,n){let{anchors:s}=this.#t[r];s[n]=e}};function Kk(t,e){let r=e.split("/"),n=t;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return null;n=n[s]}return n??null}Bk.exports={RefResolver:Sv}});var Wk=_(($0e,Jk)=>{"use strict";var $v=class t{constructor(e,r,n="#"){this.schema=e,this.schemaId=r,this.jsonPointer=n}getPropertyLocation(e){return new t(this.schema[e],this.schemaId,this.jsonPointer+"/"+e)}getSchemaRef(){return this.schemaId+this.jsonPointer}};Jk.exports=$v});var eq=_((b0e,wv)=>{"use strict";wv.exports=M;wv.exports.default=M;var Zte={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Yk={enum:["array","boolean","integer","null","number","object","string"]},Xk=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ere=id().fullFormats.uri,Qk=id().fullFormats.regex;function on(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(on.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(on.errors=i,o===0):(on.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var bv={validate:M};function vr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return vr.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=t.length;for(let c=0;c<u;c++){let l=o;bv.validate(t[c],{instancePath:e+"/"+c,parentData:t,parentDataProperty:c,rootData:s})||(i=i===null?bv.validate.errors:i.concat(bv.validate.errors),o=i.length);var a=l===o;if(!a)break}}}else return vr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return vr.errors=i,o===0}var Zk=qu().default;function M(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return M.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:Zte.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let v=t.$id,y=o;if(o===y&&o===y)if(typeof v=="string"){if(!Xk.test(v))return M.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return M.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$schema!==void 0){let v=t.$schema,y=o;if(o===y&&o===y)if(typeof v=="string"){if(!ere(v))return M.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return M.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$ref!==void 0){let v=t.$ref,y=o;if(o===y&&o===y)if(typeof v=="string"){if(!Xk.test(v))return M.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return M.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$comment!==void 0){let v=o;if(typeof t.$comment!="string")return M.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.title!==void 0){let v=o;if(typeof t.title!="string")return M.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.description!==void 0){let v=o;if(typeof t.description!="string")return M.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.readOnly!==void 0){let v=o;if(typeof t.readOnly!="boolean")return M.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.examples!==void 0){let v=o;if(o===v&&!Array.isArray(t.examples))return M.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let v=t.multipleOf,y=o;if(o===y)if(typeof v=="number"&&isFinite(v)){if(v<=0||isNaN(v))return M.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return M.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.maximum!==void 0){let v=t.maximum,y=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let v=t.exclusiveMaximum,y=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.minimum!==void 0){let v=t.minimum,y=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let v=t.exclusiveMinimum,y=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.maxLength!==void 0){let v=t.maxLength,y=o,S=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return M.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return M.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minLength!==void 0){let v=o;on(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?on.errors:i.concat(on.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.pattern!==void 0){let v=t.pattern,y=o;if(o===y&&o===y)if(typeof v=="string"){if(!Qk(v))return M.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return M.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let v=o;M(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.items!==void 0){let v=t.items,y=o,S=o,N=!1,w=o;M(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var u=w===o;if(N=N||u,!N){let A=o;vr(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?vr.errors:i.concat(vr.errors),o=i.length);var u=A===o;N=N||u}if(N)o=S,i!==null&&(S?i.length=S:i=null);else{let A={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),o++,M.errors=i,!1}var a=y===o}else var a=!0;if(a){if(t.maxItems!==void 0){let v=t.maxItems,y=o,S=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return M.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return M.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minItems!==void 0){let v=o;on(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?on.errors:i.concat(on.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let v=o;if(typeof t.uniqueItems!="boolean")return M.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.contains!==void 0){let v=o;M(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let v=t.maxProperties,y=o,S=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return M.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return M.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minProperties!==void 0){let v=o;on(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?on.errors:i.concat(on.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.required!==void 0){let v=t.required,y=o;if(o===o)if(Array.isArray(v)){var c=!0;let w=v.length;for(let T=0;T<w;T++){let A=o;if(typeof v[T]!="string")return M.errors=[{instancePath:e+"/required/"+T,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=A===o;if(!c)break}if(c){let T=v.length,A;if(T>1){let R={};for(;T--;){let j=v[T];if(typeof j=="string"){if(typeof R[j]=="number"){return A=R[j],M.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:T,j:A},message:"must NOT have duplicate items (items ## "+A+" and "+T+" are identical)"}],!1;break}R[j]=T}}}}}else return M.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let v=o;M(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.definitions!==void 0){let v=t.definitions,y=o;if(o===y)if(v&&typeof v=="object"&&!Array.isArray(v))for(let N in v){let w=o;M(v[N],{instancePath:e+"/definitions/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:N,rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var l=w===o;if(!l)break}else return M.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.properties!==void 0){let v=t.properties,y=o;if(o===y)if(v&&typeof v=="object"&&!Array.isArray(v))for(let N in v){let w=o;M(v[N],{instancePath:e+"/properties/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:N,rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var f=w===o;if(!f)break}else return M.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let v=t.patternProperties,y=o;if(o===y)if(v&&typeof v=="object"&&!Array.isArray(v)){for(let N in v){let w=o;if(o===w&&typeof N=="string"&&!Qk(N)){let T={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:N};i===null?i=[T]:i.push(T),o++}var h=w===o;if(!h){let T={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:N},message:"property name must be valid"};return i===null?i=[T]:i.push(T),o++,M.errors=i,!1;break}}if(h)for(let N in v){let w=o;M(v[N],{instancePath:e+"/patternProperties/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:N,rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var d=w===o;if(!d)break}}else return M.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.dependencies!==void 0){let v=t.dependencies,y=o;if(o===y)if(v&&typeof v=="object"&&!Array.isArray(v))for(let N in v){let w=v[N],T=o,A=o,R=!1,j=o;M(w,{instancePath:e+"/dependencies/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:N,rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var p=j===o;if(R=R||p,!R){let q=o;if(o===o)if(Array.isArray(w)){var m=!0;let ve=w.length;for(let z=0;z<ve;z++){let G=o;if(typeof w[z]!="string"){let H={instancePath:e+"/dependencies/"+N.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+z,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),o++}var m=G===o;if(!m)break}if(m){let z=w.length,G;if(z>1){let Je={};for(;z--;){let H=w[z];if(typeof H=="string"){if(typeof Je[H]=="number"){G=Je[H];let ht={instancePath:e+"/dependencies/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:z,j:G},message:"must NOT have duplicate items (items ## "+G+" and "+z+" are identical)"};i===null?i=[ht]:i.push(ht),o++;break}Je[H]=z}}}}}else{let ve={instancePath:e+"/dependencies/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ve]:i.push(ve),o++}var p=q===o;R=R||p}if(R)o=A,i!==null&&(A?i.length=A:i=null);else{let q={instancePath:e+"/dependencies/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[q]:i.push(q),o++,M.errors=i,!1}var g=T===o;if(!g)break}else return M.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let v=o;M(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.enum!==void 0){let v=t.enum,y=o;if(o===y)if(Array.isArray(v)){if(v.length<1)return M.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let N=v.length,w;if(N>1){e:for(;N--;)for(w=N;w--;)if(Zk(v[N],v[w])){return M.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:N,j:w},message:"must NOT have duplicate items (items ## "+w+" and "+N+" are identical)"}],!1;break e}}}}else return M.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(t.type!==void 0){let v=t.type,y=o,S=o,N=!1,w=o;if(!(v==="array"||v==="boolean"||v==="integer"||v==="null"||v==="number"||v==="object"||v==="string")){let A={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Yk.enum},message:"must be equal to one of the allowed values"};i===null?i=[A]:i.push(A),o++}var E=w===o;if(N=N||E,!N){let A=o;if(o===A)if(Array.isArray(v))if(v.length<1){let j={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[j]:i.push(j),o++}else{var $=!0;let j=v.length;for(let q=0;q<j;q++){let D=v[q],ee=o;if(!(D==="array"||D==="boolean"||D==="integer"||D==="null"||D==="number"||D==="object"||D==="string")){let z={instancePath:e+"/type/"+q,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Yk.enum},message:"must be equal to one of the allowed values"};i===null?i=[z]:i.push(z),o++}var $=ee===o;if(!$)break}if($){let q=v.length,D;if(q>1){e:for(;q--;)for(D=q;D--;)if(Zk(v[q],v[D])){let ee={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:q,j:D},message:"must NOT have duplicate items (items ## "+D+" and "+q+" are identical)"};i===null?i=[ee]:i.push(ee),o++;break e}}}}else{let j={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[j]:i.push(j),o++}var E=A===o;N=N||E}if(N)o=S,i!==null&&(S?i.length=S:i=null);else{let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),o++,M.errors=i,!1}var a=y===o}else var a=!0;if(a){if(t.format!==void 0){let v=o;if(typeof t.format!="string")return M.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let v=o;if(typeof t.contentMediaType!="string")return M.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let v=o;if(typeof t.contentEncoding!="string")return M.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.if!==void 0){let v=o;M(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.then!==void 0){let v=o;M(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.else!==void 0){let v=o;M(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.allOf!==void 0){let v=o;vr(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?vr.errors:i.concat(vr.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.anyOf!==void 0){let v=o;vr(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?vr.errors:i.concat(vr.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.oneOf!==void 0){let v=o;vr(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?vr.errors:i.concat(vr.errors),o=i.length);var a=v===o}else var a=!0;if(a)if(t.not!==void 0){let v=o;M(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?M.errors:i.concat(M.errors),o=i.length);var a=v===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return M.errors=i,o===0}});var Ov=_((w0e,tq)=>{"use strict";var Rv=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${e}" keyword schemas.`,this.schemas=r}},Pv=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${e}" keyword not found.`,this.schemas=r}},Tv=class extends Error{constructor(e){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${e}".`}};tq.exports={MergeError:Rv,ResolverNotFoundError:Pv,InvalidOnConflictOptionError:Tv}});var sq=_((R0e,nq)=>{"use strict";var tre=Yr(),{MergeError:Nv}=Ov();function rq(t){let e=t[0];for(let r=1;r<t.length;r++)e=e.filter(n=>t[r].includes(n));return e}function rre(t,e,r){let n=rq(e);if(n.length===0)throw new Nv(t,e);r[t]=n}function nre(t,e,r){for(let s=0;s<e.length;s++)Array.isArray(e[s])||(e[s]=[e[s]]);let n=rq(e);if(n.length===0)throw new Nv(t,e);n.length===1?r[t]=n[0]:r[t]=n}function sre(t,e,r){let n=[];for(let s of e)for(let i of s)n.includes(i)||n.push(i);r[t]=n}function ire(t,e,r){r[t]=Math.min(...e)}function ore(t,e,r){r[t]=Math.max(...e)}function are(t,e,r){let n=(a,u)=>u?n(u,a%u):a,s=(a,u)=>a*u/n(a,u),i=1;for(let a of e)for(;a*i%1!==0;)i*=10;let o=e[0]*i;for(let a of e)o=s(o,a*i);r[t]=o/i}function ure(t,e,r){let n=e[0];for(let s=1;s<e.length;s++)if(!tre(e[s],n))throw new Nv(t,e);r[t]=n}function lre(){}function cre(t,e,r){for(let n of e)if(n===!1){r[t]=!1;return}r[t]=!0}function fre(t,e,r){for(let n of e)if(n===!0){r[t]=!0;return}r[t]=!1}nq.exports={arraysIntersection:rre,hybridArraysIntersection:nre,arraysUnion:sre,minNumber:ire,maxNumber:ore,commonMultiple:are,allEqual:ure,booleanAnd:cre,booleanOr:fre,skip:lre}});var cq=_((P0e,lq)=>{"use strict";var dre=Yr(),vt=sq(),vh=Ov(),aq={$id:vt.skip,type:vt.hybridArraysIntersection,enum:vt.arraysIntersection,minLength:vt.maxNumber,maxLength:vt.minNumber,minimum:vt.maxNumber,maximum:vt.minNumber,multipleOf:vt.commonMultiple,exclusiveMinimum:vt.maxNumber,exclusiveMaximum:vt.minNumber,minItems:vt.maxNumber,maxItems:vt.minNumber,maxProperties:vt.minNumber,minProperties:vt.maxNumber,const:vt.allEqual,default:vt.allEqual,format:vt.allEqual,required:vt.arraysUnion,properties:_re,patternProperties:_h,additionalProperties:gh,items:mre,additionalItems:yre,definitions:_h,$defs:_h,nullable:vt.booleanAnd,oneOf:iq,anyOf:iq,allOf:vt.arraysUnion,not:gh,if:vre,then:vt.skip,else:vt.skip,dependencies:oq,dependentRequired:oq,dependentSchemas:_h,propertyNames:gh,uniqueItems:vt.booleanOr,contains:gh};function gh(t,e,r,n,s){r[t]=Nn(e,s)}function hre(t){let e=[[]];for(let r of t){let n=[];for(let s of e)for(let i of r)n.push([...s,i]);e=n}return e}function iq(t,e,r,n,s){if(e.length===1){r[t]=e[0];return}let i=hre(e),o=[];for(let a of i)try{let u=Nn(a,s);u!==void 0&&o.push(u)}catch(u){if(u instanceof vh.MergeError)continue;throw u}r[t]=o}function pre(t,e){let{items:r,additionalItems:n}=t;return Array.isArray(r)?e<r.length?r[e]:n:r!==void 0?r:n}function mre(t,e,r,n,s){let i=0;for(let a of e)Array.isArray(a)&&(i=Math.max(i,a.length));if(i===0){r[t]=Nn(e,s);return}let o=[];for(let a=0;a<i;a++){let u=[];for(let c of n){let l=pre(c,a);l!==void 0&&u.push(l)}o[a]=Nn(u,s)}r[t]=o}function yre(t,e,r,n,s){let i=!1;for(let a of n)if(Array.isArray(a.items)){i=!0;break}if(!i){r[t]=Nn(e,s);return}let o=[];for(let a of n){let u=a.additionalItems;u===void 0&&!Array.isArray(a.items)&&(u=a.items),u!==void 0&&o.push(u)}r[t]=Nn(o,s)}function gre(t,e){let{properties:r,patternProperties:n,additionalProperties:s}=t;if(r?.[e]!==void 0)return r[e];for(let i of Object.keys(n??{}))if(new RegExp(i).test(e))return n[i];return s}function _re(t,e,r,n,s){let i={};for(let a of n){let u=a.properties??{};for(let c of Object.keys(u)){if(i[c]!==void 0)continue;let l=u[c];i[c]=[l];for(let f of n){if(a===f)continue;let h=gre(f,c);h!==void 0&&i[c].push(h)}}}let o={};for(let a of Object.keys(i)){let u=i[a];o[a]=Nn(u,s)}r[t]=o}function _h(t,e,r,n,s){let i={};for(let a of e)for(let u of Object.keys(a))i[u]===void 0&&(i[u]=[]),i[u].push(a[u]);let o={};for(let a of Object.keys(i)){let u=i[a],c=Nn(u,s);o[a]=c}r[t]=o}function vre(t,e,r,n,s){for(let i=0;i<n.length;i++){let o={if:n[i].if,then:n[i].then,else:n[i].else};if(o.if!==void 0){if(r.if===void 0){r.if=o.if,o.then!==void 0&&(r.then=o.then),o.else!==void 0&&(r.else=o.else);continue}r.then!==void 0&&(r.then=Nn([r.then,o],s)),r.else!==void 0&&(r.else=Nn([r.else,o],s))}}}function oq(t,e,r){let n={};for(let s of e)for(let i of Object.keys(s)){n[i]===void 0&&(n[i]=[]);let o=n[i];for(let a of s[i])o.includes(a)||o.push(a)}r[t]=n}function Nn(t,e){if(t.length===0)return{};if(t.length===1)return t[0];let r={},n={},s=!0;for(let i of t){if(i===!1)return!1;if(i!==!0){s=!1;for(let o of Object.keys(i))n[o]===void 0&&(n[o]=[]),n[o].push(i[o])}}if(s)return!0;for(let i of Object.keys(n)){let o=n[i];(e.resolvers[i]??e.defaultResolver)(i,o,r,t,e)}return r}function uq(t,e,r,n,s){let i=s.onConflict??"throw";if(e.length===1||i==="first"){r[t]=e[0];return}let o=!0;for(let a=1;a<e.length;a++)if(!dre(e[a],e[0])){o=!1;break}if(o){r[t]=e[0];return}if(i==="throw")throw new vh.ResolverNotFoundError(t,e);if(i!=="skip")throw new vh.InvalidOnConflictOptionError(i)}function Ere(t,e={}){return e.defaultResolver===void 0&&(e.defaultResolver=uq),e.resolvers={...aq,...e.resolvers},Nn(t,e)}lq.exports={mergeSchemas:Ere,keywordsResolvers:aq,defaultResolver:uq,...vh}});var dq=_((T0e,fq)=>{"use strict";var{mergeSchemas:Sre}=cq();function $re(t){return Sre(t,{onConflict:"skip"})}fq.exports=$re});var Sq=_((O0e,va)=>{"use strict";var{RefResolver:bre}=Gk(),wre=ty(),Rre=$_(),so=Wk(),hq=eq(),Pre=dq(),Tre=/'/g,Eh=2e4,mq="default",Ore=["floor","ceil","round","trunc"],yq=["default","json-stringify"],ql=0;function Iv(t,e){if(!hq(t)){e?e=`"${e}" `:e="";let r=hq.errors[0],n=new Error(`${e}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=Iv.errors,n}}function jl(t,e){let r=e.schema.$ref,n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||e.schemaId,i=r.slice(n)||"#",o=t.refResolver.getSchema(s,i);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new so(o,s,i);return o.$ref!==void 0?jl(t,a):a}function Sh(t,e){let r=t.refResolver.getSchema(e,"#");return new so(r,e,"#")}function pq(t,e){return t.$id&&t.$id.charAt(0)!=="#"?t.$id:e}function Cv(t,e){Iv(t),e=e||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:e,refResolver:new bre,rootSchemaId:t.$id||`__fjs_root_${ql++}`,validatorSchemasIds:new Set,mergedSchemasIds:new Map},n=pq(t,r.rootSchemaId);if(r.refResolver.hasSchema(n)||r.refResolver.addSchema(t,r.rootSchemaId),e.schema)for(let l in e.schema){let f=e.schema[l],h=pq(f,l);r.refResolver.hasSchema(h)||(Iv(f,l),r.refResolver.addSchema(f,l))}if(e.rounding&&!Ore.includes(e.rounding))throw new Error(`Unsupported integer rounding method ${e.rounding}`);if(e.largeArrayMechanism)if(yq.includes(e.largeArrayMechanism))mq=e.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${e.largeArrayMechanism}`);if(e.largeArraySize)if(typeof e.largeArraySize=="string"&&Number.isFinite(Number.parseInt(e.largeArraySize,10)))Eh=Number.parseInt(e.largeArraySize,10);else if(typeof e.largeArraySize=="number"&&Number.isInteger(e.largeArraySize))Eh=e.largeArraySize;else if(typeof e.largeArraySize=="bigint")Eh=Number(e.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof e.largeArraySize} with value ${e.largeArraySize}`);let s=new so(t,r.rootSchemaId),i=Vr(r,s,"input"),o;i==="json += anonymous0(input)"?o=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o=`
    function main (input) {
      let json = ''
      ${i}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new wre(e),u=new Rre(e.ajv);for(let l of r.validatorSchemasIds){let f=r.refResolver.getSchema(l);u.addSchema(f,l);let h=r.refResolver.getSchemaDependencies(l);for(let[d,p]of Object.entries(h))u.addSchema(p,d)}if(e.debugMode&&(e.mode="debug"),e.mode==="debug")return{validator:u,serializer:a,code:`validator
serializer
${o}`,ajv:u.ajv};let c=new Function("validator","serializer",o);return e.mode==="standalone"?w_()(c,r,a,u):c(u,a)}var Nre=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],Ire=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],Cre=["maxLength","minLength","pattern"],Are=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function kre(t){for(var e of Nre)if(e in t)return"object";for(var e of Ire)if(e in t)return"array";for(var e of Cre)if(e in t)return"string";for(var e of Are)if(e in t)return"number";return t.type}function qre(t,e,r){let n=e.schema,s=Object.keys(n.properties||{}),i=`
    const propertiesKeys = ${JSON.stringify(s)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,o=e.getPropertyLocation("patternProperties"),a=o.schema;if(a!==void 0)for(let l in a){let f=o.getPropertyLocation(l);i+=`
        if (/${l.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${r}
          json += serializer.asString(key) + ':'
          ${Vr(t,f,"value")}
          continue
        }
      `}let c=e.getPropertyLocation("additionalProperties").schema;if(c!==void 0)if(c===!0)i+=`
        ${r}
        json += serializer.asString(key) + ':' + JSON.stringify(value)
      `;else{let l=e.getPropertyLocation("additionalProperties");i+=`
        ${r}
        json += serializer.asString(key) + ':'
        ${Vr(t,l,"value")}
      `}return i+=`
    }
  `,i}function jre(t,e){let r=e.schema,n=e.getPropertyLocation("properties"),s=r.required||[],i=Object.keys(r.properties||{}).sort((c,l)=>{let f=s.includes(c),h=s.includes(l);return f===h?0:f?-1:1}),o=s.includes(i[0]),a="";for(let c of s)i.includes(c)||(a+=`if (obj['${c}'] === undefined) throw new Error('"${c}" is required!')
`);a+=`let json = '{'
`;let u="";o||(a+=`let addComma = false
`,u="!addComma && (addComma = true) || (json += ',')");for(let c of i){let l=n.getPropertyLocation(c);l.schema.$ref&&(l=jl(t,l));let f=JSON.stringify(c),h=l.schema.default,d=s.includes(c);a+=`
      if (obj[${f}] !== undefined) {
        ${u}
        json += ${JSON.stringify(f+":")}
        ${Vr(t,l,`obj[${f}]`)}
      }`,h!==void 0?a+=` else {
        ${u}
        json += ${JSON.stringify(f+":"+JSON.stringify(h))}
      }
      `:d?a+=` else {
        throw new Error('${f} is required!')
      }
      `:a+=`
`,o&&(u="json += ','")}return(r.patternProperties||r.additionalProperties)&&(a+=qre(t,e,u)),a+=`
    return json + '}'
  `,a}function $h(t,e,r){for(let o=0;o<r.length;o++){let a=r[o];a.schema.$ref&&(r[o]=jl(t,a))}let n=[];for(let o of r){let a=gq(t,o.schema,o.schemaId);delete a.$id,n.push(a)}let s=Pre(n),i=new so(s,e);return t.refResolver.addSchema(s,e),i}function gq(t,e,r){let n=Array.isArray(e)?[]:{};e.$id!==void 0&&e.$id.charAt(0)!=="#"&&(r=e.$id);let s=t.mergedSchemasIds.get(e);s&&t.mergedSchemasIds.set(n,s);for(let i in e){let o=e[i];i==="$ref"&&o.charAt(0)==="#"&&(o=r+o),typeof o=="object"&&o!==null&&(o=gq(t,o,r)),n[i]=o}return n}function Dre(t){return`(${t} && typeof ${t}.toJSON === 'function')
    ? ${t}.toJSON()
    : ${t}
  `}function Lre(t,e){let r=e.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let n=vq(t);t.functionsNamesBySchema.set(r,n);let s=e.getSchemaRef();s.startsWith(t.rootSchemaId)&&(s=s.replace(t.rootSchemaId,""));let i=`
  `,o=r.nullable===!0;return i+=`
    // ${s}
    function ${n} (input) {
      const obj = ${Dre("input")}
      ${o?"":"if (obj === null) return '{}'"}

      ${jre(t,e)}
    }
  `,t.functions.push(i),n}function xre(t,e){let r=e.schema,n=e.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=jl(t,n));let s=n.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let i=vq(t);t.functionsNamesBySchema.set(r,i);let o=e.getSchemaRef();o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `,u=r.nullable===!0;if(a+=`
    ${u?"":"if (obj === null) return '[]'"}
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),mq==="json-stringify"&&(a+=`if (arrayLength && arrayLength >= ${Eh}) return JSON.stringify(obj)
`),a+=`
    let jsonOutput = ''
  `,Array.isArray(s)){for(let c=0;c<s.length;c++){let l=s[c],f=Vr(t,n.getPropertyLocation(c),`obj[${c}]`);a+=`
        if (${c} < arrayLength) {
          if (${_q(l.type,`[${c}]`)}) {
            let json = ''
            ${f}
            jsonOutput += json
            if (${c} < arrayLength - 1) {
              jsonOutput += ','
            }
          } else {
            throw new Error(\`Item at ${c} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          jsonOutput += JSON.stringify(obj[i])
          if (i < arrayLength - 1) {
            jsonOutput += ','
          }
        }`)}else{let c=Vr(t,n,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        let json = ''
        ${c}
        jsonOutput += json
        if (i < arrayLength - 1) {
          jsonOutput += ','
        }
      }`}return a+="\n    return `[${jsonOutput}]`\n  }",t.functions.push(a),i}function _q(t,e){let r;switch(t){case"null":r=`obj${e} === null`;break;case"string":r=`typeof obj${e} === 'string' ||
      obj${e} === null ||
      obj${e} instanceof Date ||
      obj${e} instanceof RegExp ||
      (
        typeof obj${e} === "object" &&
        typeof obj${e}.toString === "function" &&
        obj${e}.toString !== Object.prototype.toString
      )`;break;case"integer":r=`Number.isInteger(obj${e})`;break;case"number":r=`Number.isFinite(obj${e})`;break;case"boolean":r=`typeof obj${e} === 'boolean'`;break;case"object":r=`obj${e} && typeof obj${e} === 'object' && obj${e}.constructor === Object`;break;case"array":r=`Array.isArray(obj${e})`;break;default:Array.isArray(t)&&(r=`(${t.map(s=>_q(s,e)).join(" || ")})`)}return r}function vq(t){return"anonymous"+t.functionsCounter++}function Mre(t,e,r){let s=e.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,u)=>{e.schema={...e.schema,type:a};let c=Eq(t,e,r),l=u===0?"if":"else if";switch(a){case"null":i+=`
          ${l} (${r} === null)
            ${c}
          `;break;case"string":{i+=`
          ${l}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString
            )
          )
            ${c}
        `;break}case"array":{i+=`
          ${l}(Array.isArray(${r}))
            ${c}
        `;break}case"integer":{i+=`
          ${l}(Number.isInteger(${r}) || ${r} === null)
            ${c}
        `;break}default:{i+=`
          ${l}(typeof ${r} === "${a}" || ${r} === null)
            ${c}
        `;break}}});let o=e.getSchemaRef();return o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function Eq(t,e,r){let n=e.schema;switch(n.type){case"null":return"json += 'null'";case"string":return n.format==="date-time"?`json += serializer.asDateTime(${r})`:n.format==="date"?`json += serializer.asDate(${r})`:n.format==="time"?`json += serializer.asTime(${r})`:n.format==="unsafe"?`json += serializer.asUnsafeString(${r})`:`
        if (typeof ${r} !== 'string') {
          if (${r} === null) {
            json += '""'
          } else if (${r} instanceof Date) {
            json += '"' + ${r}.toISOString() + '"'
          } else if (${r} instanceof RegExp) {
            json += serializer.asString(${r}.source)
          } else {
            json += serializer.asString(${r}.toString())
          }
        } else {
          json += serializer.asString(${r})
        }
        `;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${Lre(t,e)}(${r})`;case"array":return`json += ${xre(t,e)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function Fre(t,e){let r=t.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${e} === null) {
        json += 'null'
      } else {
    `),i+=`json += '${JSON.stringify(r.const).replace(Tre,"\\'")}'`,s&&(i+=`
      }
    `),i}function Vre(t,e,r){let n=e.schema,s=t.mergedSchemasIds.get(n);if(s){let l=Sh(t,s);return Vr(t,l,r)}s=`__fjs_merged_${ql++}`,t.mergedSchemasIds.set(n,s);let{allOf:i,...o}=e.schema,a=[new so(o,e.schemaId,e.jsonPointer)],u=e.getPropertyLocation("allOf");for(let l=0;l<i.length;l++)a.push(u.getPropertyLocation(l));let c=$h(t,s,a);return Vr(t,c,r)}function zre(t,e,r){t.validatorSchemasIds.add(e.schemaId);let s=e.schema.anyOf?"anyOf":"oneOf",{[s]:i,...o}=e.schema,a=new so(o,e.schemaId,e.jsonPointer),u=e.getPropertyLocation(s),c="";for(let f=0;f<i.length;f++){let h=u.getPropertyLocation(f),d=h.schema,p=t.mergedSchemasIds.get(d),m=null;p?m=Sh(t,p):(p=`__fjs_merged_${ql++}`,t.mergedSchemasIds.set(d,p),m=$h(t,p,[a,h]));let g=Vr(t,m,r),E=h.getSchemaRef();c+=`
      ${f===0?"if":"else if"}(validator.validate("${E}", ${r}))
        ${g}
    `}let l=e.getSchemaRef();return l.startsWith(t.rootSchemaId)&&(l=l.replace(t.rootSchemaId,"")),c+=`
    else throw new TypeError(\`The value of '${l}' does not match schema definition.\`)
  `,c}function Hre(t,e,r){t.validatorSchemasIds.add(e.schemaId);let{if:n,then:s,else:i,...o}=e.schema,a=new so(o,e.schemaId,e.jsonPointer),c=e.getPropertyLocation("if").getSchemaRef(),l=e.getPropertyLocation("then"),f=t.mergedSchemasIds.get(s),h=null;if(f?h=Sh(t,f):(f=`__fjs_merged_${ql++}`,t.mergedSchemasIds.set(s,f),h=$h(t,f,[a,l])),!i)return`
      if (validator.validate("${c}", ${r})) {
        ${Vr(t,h,r)}
      } else {
        ${Vr(t,a,r)}
      }
    `;let d=e.getPropertyLocation("else"),p=t.mergedSchemasIds.get(i),m=null;return p?m=Sh(t,p):(p=`__fjs_merged_${ql++}`,t.mergedSchemasIds.set(i,p),m=$h(t,p,[a,d])),`
    if (validator.validate("${c}", ${r})) {
      ${Vr(t,h,r)}
    } else {
      ${Vr(t,m,r)}
    }
  `}function Vr(t,e,r){let n=e.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(e=jl(t,e),n=e.schema),n.allOf)return Vre(t,e,r);if(n.anyOf||n.oneOf)return zre(t,e,r);if(n.if&&n.then)return Hre(t,e,r);if(n.type===void 0){let a=kre(n);a&&(n.type=a)}let s="",i=n.type,o=n.nullable===!0;return o&&(s+=`
      if (${r} === null) {
        json += 'null'
      } else {
    `),n.const!==void 0?s+=Fre(e,r):Array.isArray(i)?s+=Mre(t,e,r):s+=Eq(t,e,r),o&&(s+=`
      }
    `),s}va.exports=Cv;va.exports.default=Cv;va.exports.build=Cv;va.exports.validLargeArrayMechanisms=yq;va.exports.restore=function({code:t,validator:e,serializer:r}){return Function.apply(null,["validator","serializer",t]).apply(null,[e,r])}});var bq=_((N0e,Av)=>{"use strict";var Ure=kv();function $q(t={readMode:!0}){if(t.readMode===!0&&typeof t.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(t.readMode!==!0&&typeof t.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=Ure();return function(n,s={}){s.mode="standalone";let i=e(n,s);return function(o){let a=i(o);return t.storeFunction(o,a),new Function(a)}}}Av.exports=$q;Av.exports.default=$q});var kv=_((I0e,Dl)=>{"use strict";var Kre=Sq();function qv(){return function(e,r){let n=Object.assign({},r,{schema:e});return Bre.bind(null,n)}}function Bre(t,{schema:e}){return t.schema&&e.$id&&t.schema[e.$id]&&(t.schema={...t.schema},delete t.schema[e.$id]),Kre(e,t)}Dl.exports=qv;Dl.exports.default=qv;Dl.exports.SerializerSelector=qv;Dl.exports.StandaloneSerializer=bq()});var Ea=_(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.regexpCode=Me.getEsmExportName=Me.getProperty=Me.safeStringify=Me.stringify=Me.strConcat=Me.addCodeArg=Me.str=Me._=Me.nil=Me._Code=Me.Name=Me.IDENTIFIER=Me._CodeOrName=void 0;var Ll=class{};Me._CodeOrName=Ll;Me.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var io=class extends Ll{constructor(e){if(super(),!Me.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Me.Name=io;var an=class extends Ll{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof io&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Me._Code=an;Me.nil=new an("");function wq(t,...e){let r=[t[0]],n=0;for(;n<e.length;)Dv(r,e[n]),r.push(t[++n]);return new an(r)}Me._=wq;var jv=new an("+");function Rq(t,...e){let r=[xl(t[0])],n=0;for(;n<e.length;)r.push(jv),Dv(r,e[n]),r.push(jv,xl(t[++n]));return Gre(r),new an(r)}Me.str=Rq;function Dv(t,e){e instanceof an?t.push(...e._items):e instanceof io?t.push(e):t.push(Yre(e))}Me.addCodeArg=Dv;function Gre(t){let e=1;for(;e<t.length-1;){if(t[e]===jv){let r=Jre(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Jre(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof io||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof io))return`"${t}${e.slice(1)}`}function Wre(t,e){return e.emptyStr()?t:t.emptyStr()?e:Rq`${t}${e}`}Me.strConcat=Wre;function Yre(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:xl(Array.isArray(t)?t.join(","):t)}function Xre(t){return new an(xl(t))}Me.stringify=Xre;function xl(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Me.safeStringify=xl;function Qre(t){return typeof t=="string"&&Me.IDENTIFIER.test(t)?new an(`.${t}`):wq`[${t}]`}Me.getProperty=Qre;function Zre(t){if(typeof t=="string"&&Me.IDENTIFIER.test(t))return new an(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Me.getEsmExportName=Zre;function ene(t){return new an(t.toString())}Me.regexpCode=ene});var Rh=_(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.ValueScope=Er.ValueScopeName=Er.Scope=Er.varKinds=Er.UsedValueState=void 0;var Ar=Ea(),Lv=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},xv;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(xv=Er.UsedValueState||(Er.UsedValueState={}));Er.varKinds={const:new Ar.Name("const"),let:new Ar.Name("let"),var:new Ar.Name("var")};var bh=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Ar.Name?e:this.name(e)}name(e){return new Ar.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Er.Scope=bh;var wh=class extends Ar.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Ar._)`.${new Ar.Name(r)}[${n}]`}};Er.ValueScopeName=wh;var tne=(0,Ar._)`\n`,Mv=class extends bh{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?tne:Ar.nil}}get(){return this._scope}name(e){return new wh(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Ar._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Ar.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,xv.Started);let l=r(c);if(l){let f=this.opts.es5?Er.varKinds.var:Er.varKinds.const;i=(0,Ar._)`${i}${f} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,Ar._)`${i}${l}${this.opts._n}`;else throw new Lv(c);u.set(c,xv.Completed)})}return i}};Er.ValueScope=Mv});var te=_(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.or=ge.and=ge.not=ge.CodeGen=ge.operators=ge.varKinds=ge.ValueScopeName=ge.ValueScope=ge.Scope=ge.Name=ge.regexpCode=ge.stringify=ge.getProperty=ge.nil=ge.strConcat=ge.str=ge._=void 0;var Ne=Ea(),In=Rh(),oi=Ea();Object.defineProperty(ge,"_",{enumerable:!0,get:function(){return oi._}});Object.defineProperty(ge,"str",{enumerable:!0,get:function(){return oi.str}});Object.defineProperty(ge,"strConcat",{enumerable:!0,get:function(){return oi.strConcat}});Object.defineProperty(ge,"nil",{enumerable:!0,get:function(){return oi.nil}});Object.defineProperty(ge,"getProperty",{enumerable:!0,get:function(){return oi.getProperty}});Object.defineProperty(ge,"stringify",{enumerable:!0,get:function(){return oi.stringify}});Object.defineProperty(ge,"regexpCode",{enumerable:!0,get:function(){return oi.regexpCode}});Object.defineProperty(ge,"Name",{enumerable:!0,get:function(){return oi.Name}});var Nh=Rh();Object.defineProperty(ge,"Scope",{enumerable:!0,get:function(){return Nh.Scope}});Object.defineProperty(ge,"ValueScope",{enumerable:!0,get:function(){return Nh.ValueScope}});Object.defineProperty(ge,"ValueScopeName",{enumerable:!0,get:function(){return Nh.ValueScopeName}});Object.defineProperty(ge,"varKinds",{enumerable:!0,get:function(){return Nh.varKinds}});ge.operators={GT:new Ne._Code(">"),GTE:new Ne._Code(">="),LT:new Ne._Code("<"),LTE:new Ne._Code("<="),EQ:new Ne._Code("==="),NEQ:new Ne._Code("!=="),NOT:new Ne._Code("!"),OR:new Ne._Code("||"),AND:new Ne._Code("&&"),ADD:new Ne._Code("+")};var Rs=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Fv=class extends Rs{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?In.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=$a(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ne._CodeOrName?this.rhs.names:{}}},Ph=class extends Rs{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ne.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=$a(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ne.Name?{}:{...this.lhs.names};return Oh(e,this.rhs)}},Vv=class extends Ph{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},zv=class extends Rs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Hv=class extends Rs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Uv=class extends Rs{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Kv=class extends Rs{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=$a(this.code,e,r),this}get names(){return this.code instanceof Ne._CodeOrName?this.code.names:{}}},Ml=class extends Rs{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(rne(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>uo(e,r.names),{})}},Ps=class extends Ml{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Bv=class extends Ml{},Sa=class extends Ps{};Sa.kind="else";var oo=class t extends Ps{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Sa(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(Pq(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=$a(this.condition,e,r),this}get names(){let e=super.names;return Oh(e,this.condition),this.else&&uo(e,this.else.names),e}};oo.kind="if";var ao=class extends Ps{};ao.kind="for";var Gv=class extends ao{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=$a(this.iteration,e,r),this}get names(){return uo(super.names,this.iteration.names)}},Jv=class extends ao{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?In.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Oh(super.names,this.from);return Oh(e,this.to)}},Th=class extends ao{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=$a(this.iterable,e,r),this}get names(){return uo(super.names,this.iterable.names)}},Fl=class extends Ps{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Fl.kind="func";var Vl=class extends Ml{render(e){return"return "+super.render(e)}};Vl.kind="return";var Wv=class extends Ps{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&uo(e,this.catch.names),this.finally&&uo(e,this.finally.names),e}},zl=class extends Ps{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};zl.kind="catch";var Hl=class extends Ps{render(e){return"finally"+super.render(e)}};Hl.kind="finally";var Yv=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new In.Scope({parent:e}),this._nodes=[new Bv]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Fv(e,i,n)),i}const(e,r,n){return this._def(In.varKinds.const,e,r,n)}let(e,r,n){return this._def(In.varKinds.let,e,r,n)}var(e,r,n){return this._def(In.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Ph(e,r,n))}add(e,r){return this._leafNode(new Vv(e,ge.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ne.nil&&this._leafNode(new Kv(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ne.addCodeArg)(r,s));return r.push("}"),new Ne._Code(r)}if(e,r,n){if(this._blockNode(new oo(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new oo(e))}else(){return this._elseNode(new Sa)}endIf(){return this._endBlockNode(oo,Sa)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Gv(e),r)}forRange(e,r,n,s,i=this.opts.es5?In.varKinds.var:In.varKinds.let){let o=this._scope.toName(e);return this._for(new Jv(i,o,r,n),()=>s(o))}forOf(e,r,n,s=In.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ne.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ne._)`${o}.length`,a=>{this.var(i,(0,Ne._)`${o}[${a}]`),n(i)})}return this._for(new Th("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?In.varKinds.var:In.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ne._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Th("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(ao)}label(e){return this._leafNode(new zv(e))}break(e){return this._leafNode(new Hv(e))}return(e){let r=new Vl;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Vl)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Wv;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new zl(i),r(i)}return n&&(this._currNode=s.finally=new Hl,this.code(n)),this._endBlockNode(zl,Hl)}throw(e){return this._leafNode(new Uv(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ne.nil,n,s){return this._blockNode(new Fl(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Fl)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof oo))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ge.CodeGen=Yv;function uo(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Oh(t,e){return e instanceof Ne._CodeOrName?uo(t,e.names):t}function $a(t,e,r){if(t instanceof Ne.Name)return n(t);if(!s(t))return t;return new Ne._Code(t._items.reduce((i,o)=>(o instanceof Ne.Name&&(o=n(o)),o instanceof Ne._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ne._Code&&i._items.some(o=>o instanceof Ne.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function rne(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Pq(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ne._)`!${Xv(t)}`}ge.not=Pq;var nne=Tq(ge.operators.AND);function sne(...t){return t.reduce(nne)}ge.and=sne;var ine=Tq(ge.operators.OR);function one(...t){return t.reduce(ine)}ge.or=one;function Tq(t){return(e,r)=>e===Ne.nil?r:r===Ne.nil?e:(0,Ne._)`${Xv(e)} ${t} ${Xv(r)}`}function Xv(t){return t instanceof Ne.Name?t:(0,Ne._)`(${t})`}});var de=_(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.checkStrictMode=_e.getErrorPath=_e.Type=_e.useFunc=_e.setEvaluated=_e.evaluatedPropsToName=_e.mergeEvaluated=_e.eachItem=_e.unescapeJsonPointer=_e.escapeJsonPointer=_e.escapeFragment=_e.unescapeFragment=_e.schemaRefOrVal=_e.schemaHasRulesButRef=_e.schemaHasRules=_e.checkUnknownRules=_e.alwaysValidSchema=_e.toHash=void 0;var it=te(),ane=Ea();function une(t){let e={};for(let r of t)e[r]=!0;return e}_e.toHash=une;function lne(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Iq(t,e),!Cq(e,t.self.RULES.all))}_e.alwaysValidSchema=lne;function Iq(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||jq(t,`unknown keyword: "${i}"`)}_e.checkUnknownRules=Iq;function Cq(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}_e.schemaHasRules=Cq;function cne(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}_e.schemaHasRulesButRef=cne;function fne({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,it._)`${r}`}return(0,it._)`${t}${e}${(0,it.getProperty)(n)}`}_e.schemaRefOrVal=fne;function dne(t){return Aq(decodeURIComponent(t))}_e.unescapeFragment=dne;function hne(t){return encodeURIComponent(Qv(t))}_e.escapeFragment=hne;function Qv(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}_e.escapeJsonPointer=Qv;function Aq(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}_e.unescapeJsonPointer=Aq;function pne(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}_e.eachItem=pne;function Oq({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof it.Name?(i instanceof it.Name?t(s,i,o):e(s,i,o),o):i instanceof it.Name?(e(s,o,i),i):r(i,o);return a===it.Name&&!(u instanceof it.Name)?n(s,u):u}}_e.mergeEvaluated={props:Oq({mergeNames:(t,e,r)=>t.if((0,it._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,it._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,it._)`${r} || {}`).code((0,it._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,it._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,it._)`${r} || {}`),Zv(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:kq}),items:Oq({mergeNames:(t,e,r)=>t.if((0,it._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,it._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,it._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,it._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function kq(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,it._)`{}`);return e!==void 0&&Zv(t,r,e),r}_e.evaluatedPropsToName=kq;function Zv(t,e,r){Object.keys(r).forEach(n=>t.assign((0,it._)`${e}${(0,it.getProperty)(n)}`,!0))}_e.setEvaluated=Zv;var Nq={};function mne(t,e){return t.scopeValue("func",{ref:e,code:Nq[e.code]||(Nq[e.code]=new ane._Code(e.code))})}_e.useFunc=mne;var qq;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(qq=_e.Type||(_e.Type={}));function yne(t,e,r){if(t instanceof it.Name){let n=e===qq.Num;return r?n?(0,it._)`"[" + ${t} + "]"`:(0,it._)`"['" + ${t} + "']"`:n?(0,it._)`"/" + ${t}`:(0,it._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,it.getProperty)(t).toString():"/"+Qv(t)}_e.getErrorPath=yne;function jq(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}_e.checkStrictMode=jq});var un=_(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});var lr=te(),gne={data:new lr.Name("data"),valCxt:new lr.Name("valCxt"),instancePath:new lr.Name("instancePath"),parentData:new lr.Name("parentData"),parentDataProperty:new lr.Name("parentDataProperty"),rootData:new lr.Name("rootData"),dynamicAnchors:new lr.Name("dynamicAnchors"),vErrors:new lr.Name("vErrors"),errors:new lr.Name("errors"),this:new lr.Name("this"),self:new lr.Name("self"),scope:new lr.Name("scope"),json:new lr.Name("json"),jsonPos:new lr.Name("jsonPos"),jsonLen:new lr.Name("jsonLen"),jsonPart:new lr.Name("jsonPart")};eE.default=gne});var Ul=_(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.extendErrors=cr.resetErrorsCount=cr.reportExtraError=cr.reportError=cr.keyword$DataError=cr.keywordError=void 0;var ke=te(),Ih=de(),Sr=un();cr.keywordError={message:({keyword:t})=>(0,ke.str)`must pass "${t}" keyword validation`};cr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,ke.str)`"${t}" keyword must be ${e} ($data)`:(0,ke.str)`"${t}" keyword is invalid ($data)`};function _ne(t,e=cr.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=xq(t,e,r);n??(o||a)?Dq(i,u):Lq(s,(0,ke._)`[${u}]`)}cr.reportError=_ne;function vne(t,e=cr.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=xq(t,e,r);Dq(s,a),i||o||Lq(n,Sr.default.vErrors)}cr.reportExtraError=vne;function Ene(t,e){t.assign(Sr.default.errors,e),t.if((0,ke._)`${Sr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,ke._)`${Sr.default.vErrors}.length`,e),()=>t.assign(Sr.default.vErrors,null)))}cr.resetErrorsCount=Ene;function Sne({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,Sr.default.errors,a=>{t.const(o,(0,ke._)`${Sr.default.vErrors}[${a}]`),t.if((0,ke._)`${o}.instancePath === undefined`,()=>t.assign((0,ke._)`${o}.instancePath`,(0,ke.strConcat)(Sr.default.instancePath,i.errorPath))),t.assign((0,ke._)`${o}.schemaPath`,(0,ke.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,ke._)`${o}.schema`,r),t.assign((0,ke._)`${o}.data`,n))})}cr.extendErrors=Sne;function Dq(t,e){let r=t.const("err",e);t.if((0,ke._)`${Sr.default.vErrors} === null`,()=>t.assign(Sr.default.vErrors,(0,ke._)`[${r}]`),(0,ke._)`${Sr.default.vErrors}.push(${r})`),t.code((0,ke._)`${Sr.default.errors}++`)}function Lq(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,ke._)`new ${t.ValidationError}(${e})`):(r.assign((0,ke._)`${n}.errors`,e),r.return(!1))}var lo={keyword:new ke.Name("keyword"),schemaPath:new ke.Name("schemaPath"),params:new ke.Name("params"),propertyName:new ke.Name("propertyName"),message:new ke.Name("message"),schema:new ke.Name("schema"),parentSchema:new ke.Name("parentSchema")};function xq(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,ke._)`{}`:$ne(t,e,r)}function $ne(t,e,r={}){let{gen:n,it:s}=t,i=[bne(s,r),wne(t,r)];return Rne(t,e,i),n.object(...i)}function bne({errorPath:t},{instancePath:e}){let r=e?(0,ke.str)`${t}${(0,Ih.getErrorPath)(e,Ih.Type.Str)}`:t;return[Sr.default.instancePath,(0,ke.strConcat)(Sr.default.instancePath,r)]}function wne({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,ke.str)`${e}/${t}`;return r&&(s=(0,ke.str)`${s}${(0,Ih.getErrorPath)(r,Ih.Type.Str)}`),[lo.schemaPath,s]}function Rne(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:f}=a;n.push([lo.keyword,s],[lo.params,typeof e=="function"?e(t):e||(0,ke._)`{}`]),u.messages&&n.push([lo.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([lo.schema,o],[lo.parentSchema,(0,ke._)`${l}${f}`],[Sr.default.data,i]),c&&n.push([lo.propertyName,c])}});var Fq=_(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.boolOrEmptySchema=ba.topBoolOrEmptySchema=void 0;var Pne=Ul(),Tne=te(),One=un(),Nne={message:"boolean schema is false"};function Ine(t){let{gen:e,schema:r,validateName:n}=t;r===!1?Mq(t,!1):typeof r=="object"&&r.$async===!0?e.return(One.default.data):(e.assign((0,Tne._)`${n}.errors`,null),e.return(!0))}ba.topBoolOrEmptySchema=Ine;function Cne(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),Mq(t)):r.var(e,!0)}ba.boolOrEmptySchema=Cne;function Mq(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Pne.reportError)(s,Nne,void 0,e)}});var tE=_(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.getRules=wa.isJSONType=void 0;var Ane=["string","number","integer","boolean","null","object","array"],kne=new Set(Ane);function qne(t){return typeof t=="string"&&kne.has(t)}wa.isJSONType=qne;function jne(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}wa.getRules=jne});var rE=_(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.shouldUseRule=ai.shouldUseGroup=ai.schemaHasRulesForType=void 0;function Dne({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&Vq(t,n)}ai.schemaHasRulesForType=Dne;function Vq(t,e){return e.rules.some(r=>zq(t,r))}ai.shouldUseGroup=Vq;function zq(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}ai.shouldUseRule=zq});var Bl=_(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.reportTypeError=Wt.checkDataTypes=Wt.checkDataType=Wt.coerceAndCheckDataType=Wt.getJSONTypes=Wt.getSchemaTypes=Wt.DataType=void 0;var Lne=tE(),xne=rE(),Mne=Ul(),ce=te(),Hq=de(),Kl;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Kl=Wt.DataType||(Wt.DataType={}));function Fne(t){let e=Uq(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Wt.getSchemaTypes=Fne;function Uq(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Lne.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Wt.getJSONTypes=Uq;function Vne(t,e){let{gen:r,data:n,opts:s}=t,i=zne(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,xne.schemaHasRulesForType)(t,e[0]));if(o){let a=sE(e,n,s.strictNumbers,Kl.Wrong);r.if(a,()=>{i.length?Hne(t,e,i):iE(t)})}return o}Wt.coerceAndCheckDataType=Vne;var Kq=new Set(["string","number","integer","boolean","null"]);function zne(t,e){return e?t.filter(r=>Kq.has(r)||e==="array"&&r==="array"):[]}function Hne(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,ce._)`typeof ${s}`),a=n.let("coerced",(0,ce._)`undefined`);i.coerceTypes==="array"&&n.if((0,ce._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ce._)`${s}[0]`).assign(o,(0,ce._)`typeof ${s}`).if(sE(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,ce._)`${a} !== undefined`);for(let c of r)(Kq.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),iE(t),n.endIf(),n.if((0,ce._)`${a} !== undefined`,()=>{n.assign(s,a),Une(t,a)});function u(c){switch(c){case"string":n.elseIf((0,ce._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ce._)`"" + ${s}`).elseIf((0,ce._)`${s} === null`).assign(a,(0,ce._)`""`);return;case"number":n.elseIf((0,ce._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,ce._)`+${s}`);return;case"integer":n.elseIf((0,ce._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,ce._)`+${s}`);return;case"boolean":n.elseIf((0,ce._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,ce._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ce._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ce._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,ce._)`[${s}]`)}}}function Une({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ce._)`${e} !== undefined`,()=>t.assign((0,ce._)`${e}[${r}]`,n))}function nE(t,e,r,n=Kl.Correct){let s=n===Kl.Correct?ce.operators.EQ:ce.operators.NEQ,i;switch(t){case"null":return(0,ce._)`${e} ${s} null`;case"array":i=(0,ce._)`Array.isArray(${e})`;break;case"object":i=(0,ce._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,ce._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,ce._)`typeof ${e} ${s} ${t}`}return n===Kl.Correct?i:(0,ce.not)(i);function o(a=ce.nil){return(0,ce.and)((0,ce._)`typeof ${e} == "number"`,a,r?(0,ce._)`isFinite(${e})`:ce.nil)}}Wt.checkDataType=nE;function sE(t,e,r,n){if(t.length===1)return nE(t[0],e,r,n);let s,i=(0,Hq.toHash)(t);if(i.array&&i.object){let o=(0,ce._)`typeof ${e} != "object"`;s=i.null?o:(0,ce._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=ce.nil;i.number&&delete i.integer;for(let o in i)s=(0,ce.and)(s,nE(o,e,r,n));return s}Wt.checkDataTypes=sE;var Kne={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ce._)`{type: ${t}}`:(0,ce._)`{type: ${e}}`};function iE(t){let e=Bne(t);(0,Mne.reportError)(e,Kne)}Wt.reportTypeError=iE;function Bne(t){let{gen:e,data:r,schema:n}=t,s=(0,Hq.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var Gq=_(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.assignDefaults=void 0;var Ra=te(),Gne=de();function Jne(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)Bq(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>Bq(t,i,s.default))}Ch.assignDefaults=Jne;function Bq(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Ra._)`${i}${(0,Ra.getProperty)(e)}`;if(s){(0,Gne.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,Ra._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Ra._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Ra._)`${a} = ${(0,Ra.stringify)(r)}`)}});var Yt=_(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.validateUnion=et.validateArray=et.usePattern=et.callValidateCode=et.schemaProperties=et.allSchemaProperties=et.noPropertyInData=et.propertyInData=et.isOwnProperty=et.hasPropFunc=et.reportMissingProp=et.checkMissingProp=et.checkReportMissingProp=void 0;var dt=te(),oE=de(),ui=un(),Wne=de();function Yne(t,e){let{gen:r,data:n,it:s}=t;r.if(uE(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,dt._)`${e}`},!0),t.error()})}et.checkReportMissingProp=Yne;function Xne({gen:t,data:e,it:{opts:r}},n,s){return(0,dt.or)(...n.map(i=>(0,dt.and)(uE(t,e,i,r.ownProperties),(0,dt._)`${s} = ${i}`)))}et.checkMissingProp=Xne;function Qne(t,e){t.setParams({missingProperty:e},!0),t.error()}et.reportMissingProp=Qne;function Jq(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,dt._)`Object.prototype.hasOwnProperty`})}et.hasPropFunc=Jq;function aE(t,e,r){return(0,dt._)`${Jq(t)}.call(${e}, ${r})`}et.isOwnProperty=aE;function Zne(t,e,r,n){let s=(0,dt._)`${e}${(0,dt.getProperty)(r)} !== undefined`;return n?(0,dt._)`${s} && ${aE(t,e,r)}`:s}et.propertyInData=Zne;function uE(t,e,r,n){let s=(0,dt._)`${e}${(0,dt.getProperty)(r)} === undefined`;return n?(0,dt.or)(s,(0,dt.not)(aE(t,e,r))):s}et.noPropertyInData=uE;function Wq(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}et.allSchemaProperties=Wq;function ese(t,e){return Wq(e).filter(r=>!(0,oE.alwaysValidSchema)(t,e[r]))}et.schemaProperties=ese;function tse({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,dt._)`${t}, ${e}, ${n}${s}`:e,f=[[ui.default.instancePath,(0,dt.strConcat)(ui.default.instancePath,i)],[ui.default.parentData,o.parentData],[ui.default.parentDataProperty,o.parentDataProperty],[ui.default.rootData,ui.default.rootData]];o.opts.dynamicRef&&f.push([ui.default.dynamicAnchors,ui.default.dynamicAnchors]);let h=(0,dt._)`${l}, ${r.object(...f)}`;return u!==dt.nil?(0,dt._)`${a}.call(${u}, ${h})`:(0,dt._)`${a}(${h})`}et.callValidateCode=tse;var rse=(0,dt._)`new RegExp`;function nse({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,dt._)`${s.code==="new RegExp"?rse:(0,Wne.useFunc)(t,s)}(${r}, ${n})`})}et.usePattern=nse;function sse(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,dt._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:oE.Type.Num},i),e.if((0,dt.not)(i),a)})}}et.validateArray=sse;function ise(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,oE.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,dt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,dt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}et.validateUnion=ise});var Qq=_(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.validateKeywordUsage=Wn.validSchemaType=Wn.funcKeywordCode=Wn.macroKeywordCode=void 0;var $r=te(),co=un(),ose=Yt(),ase=Ul();function use(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=Xq(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:$r.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}Wn.macroKeywordCode=use;function lse(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;fse(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=Xq(n,s,c),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&Yq(t),g(()=>t.error());else{let E=e.async?d():p();e.modifying&&Yq(t),g(()=>cse(t,E))}}function d(){let E=n.let("ruleErrs",null);return n.try(()=>m((0,$r._)`await `),$=>n.assign(f,!1).if((0,$r._)`${$} instanceof ${u.ValidationError}`,()=>n.assign(E,(0,$r._)`${$}.errors`),()=>n.throw($))),E}function p(){let E=(0,$r._)`${l}.errors`;return n.assign(E,null),m($r.nil),E}function m(E=e.async?(0,$r._)`await `:$r.nil){let $=u.opts.passContext?co.default.this:co.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,$r._)`${E}${(0,ose.callValidateCode)(t,l,$,v)}`,e.modifying)}function g(E){var $;n.if((0,$r.not)(($=e.valid)!==null&&$!==void 0?$:f),E)}}Wn.funcKeywordCode=lse;function Yq(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,$r._)`${n.parentData}[${n.parentDataProperty}]`))}function cse(t,e){let{gen:r}=t;r.if((0,$r._)`Array.isArray(${e})`,()=>{r.assign(co.default.vErrors,(0,$r._)`${co.default.vErrors} === null ? ${e} : ${co.default.vErrors}.concat(${e})`).assign(co.default.errors,(0,$r._)`${co.default.vErrors}.length`),(0,ase.extendErrors)(t)},()=>t.error())}function fse({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Xq(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,$r.stringify)(r)})}function dse(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Wn.validSchemaType=dse;function hse({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Wn.validateKeywordUsage=hse});var ej=_(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.extendSubschemaMode=li.extendSubschemaData=li.getSubschema=void 0;var Yn=te(),Zq=de();function pse(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Yn._)`${t.schemaPath}${(0,Yn.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Yn._)`${t.schemaPath}${(0,Yn.getProperty)(e)}${(0,Yn.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Zq.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}li.getSubschema=pse;function mse(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:f}=e,h=a.let("data",(0,Yn._)`${e.data}${(0,Yn.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Yn.str)`${c}${(0,Zq.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Yn._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof Yn.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}li.extendSubschemaData=mse;function yse(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}li.extendSubschemaMode=yse});var rj=_((K0e,tj)=>{"use strict";var ci=tj.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Ah(e,n,s,t,"",t)};ci.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ci.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ci.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ci.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ah(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var f=n[l];if(Array.isArray(f)){if(l in ci.arrayKeywords)for(var h=0;h<f.length;h++)Ah(t,e,r,f[h],s+"/"+l+"/"+h,i,s,l,n,h)}else if(l in ci.propsKeywords){if(f&&typeof f=="object")for(var d in f)Ah(t,e,r,f[d],s+"/"+l+"/"+gse(d),i,s,l,n,d)}else(l in ci.keywords||t.allKeys&&!(l in ci.skipKeywords))&&Ah(t,e,r,f,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function gse(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Gl=_(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.getSchemaRefs=kr.resolveUrl=kr.normalizeId=kr._getFullPath=kr.getFullPath=kr.inlineRef=void 0;var _se=de(),vse=Yr(),Ese=rj(),Sse=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function $se(t,e=!0){return typeof t=="boolean"?!0:e===!0?!lE(t):e?nj(t)<=e:!1}kr.inlineRef=$se;var bse=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function lE(t){for(let e in t){if(bse.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(lE)||typeof r=="object"&&lE(r))return!0}return!1}function nj(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Sse.has(r)&&(typeof t[r]=="object"&&(0,_se.eachItem)(t[r],n=>e+=nj(n)),e===1/0))return 1/0}return e}function sj(t,e="",r){r!==!1&&(e=Pa(e));let n=t.parse(e);return ij(t,n)}kr.getFullPath=sj;function ij(t,e){return t.serialize(e).split("#")[0]+"#"}kr._getFullPath=ij;var wse=/#\/?$/;function Pa(t){return t?t.replace(wse,""):""}kr.normalizeId=Pa;function Rse(t,e,r){return r=Pa(r),t.resolve(e,r)}kr.resolveUrl=Rse;var Pse=/^[a-z_][-a-z0-9._]*$/i;function Tse(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Pa(t[r]||e),i={"":s},o=sj(n,s,!1),a={},u=new Set;return Ese(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,g=i[p];typeof f[r]=="string"&&(g=E.call(this,f[r])),$.call(this,f.$anchor),$.call(this,f.$dynamicAnchor),i[h]=g;function E(v){let y=this.opts.uriResolver.resolve;if(v=Pa(g?y(g,v):v),u.has(v))throw l(v);u.add(v);let S=this.refs[v];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(f,S.schema,v):v!==Pa(m)&&(v[0]==="#"?(c(f,a[v],v),a[v]=f):this.refs[v]=m),v}function $(v){if(typeof v=="string"){if(!Pse.test(v))throw new Error(`invalid anchor "${v}"`);E.call(this,`#${v}`)}}}),a;function c(f,h,d){if(h!==void 0&&!vse(f,h))throw l(d)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}kr.getSchemaRefs=Tse});var Ta=_(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.getData=fi.KeywordCxt=fi.validateFunctionCode=void 0;var cj=Fq(),oj=Bl(),fE=rE(),kh=Bl(),Ose=Gq(),Wl=Qq(),cE=ej(),Y=te(),se=un(),Nse=Gl(),Ts=de(),Jl=Ul();function Ise(t){if(hj(t)&&(pj(t),dj(t))){kse(t);return}fj(t,()=>(0,cj.topBoolOrEmptySchema)(t))}fi.validateFunctionCode=Ise;function fj({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Y._)`${se.default.data}, ${se.default.valCxt}`,n.$async,()=>{t.code((0,Y._)`"use strict"; ${aj(r,s)}`),Ase(t,s),t.code(i)}):t.func(e,(0,Y._)`${se.default.data}, ${Cse(s)}`,n.$async,()=>t.code(aj(r,s)).code(i))}function Cse(t){return(0,Y._)`{${se.default.instancePath}="", ${se.default.parentData}, ${se.default.parentDataProperty}, ${se.default.rootData}=${se.default.data}${t.dynamicRef?(0,Y._)`, ${se.default.dynamicAnchors}={}`:Y.nil}}={}`}function Ase(t,e){t.if(se.default.valCxt,()=>{t.var(se.default.instancePath,(0,Y._)`${se.default.valCxt}.${se.default.instancePath}`),t.var(se.default.parentData,(0,Y._)`${se.default.valCxt}.${se.default.parentData}`),t.var(se.default.parentDataProperty,(0,Y._)`${se.default.valCxt}.${se.default.parentDataProperty}`),t.var(se.default.rootData,(0,Y._)`${se.default.valCxt}.${se.default.rootData}`),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,Y._)`${se.default.valCxt}.${se.default.dynamicAnchors}`)},()=>{t.var(se.default.instancePath,(0,Y._)`""`),t.var(se.default.parentData,(0,Y._)`undefined`),t.var(se.default.parentDataProperty,(0,Y._)`undefined`),t.var(se.default.rootData,se.default.data),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,Y._)`{}`)})}function kse(t){let{schema:e,opts:r,gen:n}=t;fj(t,()=>{r.$comment&&e.$comment&&yj(t),xse(t),n.let(se.default.vErrors,null),n.let(se.default.errors,0),r.unevaluated&&qse(t),mj(t),Vse(t)})}function qse(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Y._)`${r}.evaluated`),e.if((0,Y._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Y._)`${t.evaluated}.props`,(0,Y._)`undefined`)),e.if((0,Y._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Y._)`${t.evaluated}.items`,(0,Y._)`undefined`))}function aj(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Y._)`/*# sourceURL=${r} */`:Y.nil}function jse(t,e){if(hj(t)&&(pj(t),dj(t))){Dse(t,e);return}(0,cj.boolOrEmptySchema)(t,e)}function dj({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function hj(t){return typeof t.schema!="boolean"}function Dse(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&yj(t),Mse(t),Fse(t);let i=n.const("_errs",se.default.errors);mj(t,i),n.var(e,(0,Y._)`${i} === ${se.default.errors}`)}function pj(t){(0,Ts.checkUnknownRules)(t),Lse(t)}function mj(t,e){if(t.opts.jtd)return uj(t,[],!1,e);let r=(0,oj.getSchemaTypes)(t.schema),n=(0,oj.coerceAndCheckDataType)(t,r);uj(t,r,!n,e)}function Lse(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Ts.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function xse(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ts.checkStrictMode)(t,"default is ignored in the schema root")}function Mse(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Nse.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Fse(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function yj({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Y._)`${se.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Y.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Y._)`${se.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Vse(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Y._)`${se.default.errors} === 0`,()=>e.return(se.default.data),()=>e.throw((0,Y._)`new ${s}(${se.default.vErrors})`)):(e.assign((0,Y._)`${n}.errors`,se.default.vErrors),i.unevaluated&&zse(t),e.return((0,Y._)`${se.default.errors} === 0`))}function zse({gen:t,evaluated:e,props:r,items:n}){r instanceof Y.Name&&t.assign((0,Y._)`${e}.props`,r),n instanceof Y.Name&&t.assign((0,Y._)`${e}.items`,n)}function uj(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,Ts.schemaHasRulesButRef)(i,l))){s.block(()=>_j(t,"$ref",l.all.$ref.definition));return}u.jtd||Hse(t,e),s.block(()=>{for(let h of l.rules)f(h);f(l.post)});function f(h){(0,fE.shouldUseGroup)(i,h)&&(h.type?(s.if((0,kh.checkDataType)(h.type,o,u.strictNumbers)),lj(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,kh.reportTypeError)(t)),s.endIf()):lj(t,h),a||s.if((0,Y._)`${se.default.errors} === ${n||0}`))}}function lj(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Ose.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,fE.shouldUseRule)(n,i)&&_j(t,i.keyword,i.definition,e.type)})}function Hse(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Use(t,e),t.opts.allowUnionTypes||Kse(t,e),Bse(t,t.dataTypes))}function Use(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{gj(t.dataTypes,r)||dE(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Jse(t,e)}}function Kse(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&dE(t,"use allowUnionTypes to allow union type keyword")}function Bse(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,fE.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Gse(e,o))&&dE(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Gse(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function gj(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Jse(t,e){let r=[];for(let n of t.dataTypes)gj(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function dE(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Ts.checkStrictMode)(t,e,t.opts.strictTypes)}var qh=class{constructor(e,r,n){if((0,Wl.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ts.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",vj(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Wl.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",se.default.errors))}result(e,r,n){this.failResult((0,Y.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Y.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Y._)`${r} !== undefined && (${(0,Y.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Jl.reportExtraError:Jl.reportError)(this,this.def.error,r)}$dataError(){(0,Jl.reportError)(this,this.def.$dataError||Jl.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Jl.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Y.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Y.nil,r=Y.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Y.or)((0,Y._)`${s} === undefined`,r)),e!==Y.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Y.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Y.or)(o(),a());function o(){if(n.length){if(!(r instanceof Y.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,Y._)`${(0,kh.checkDataTypes)(u,r,i.opts.strictNumbers,kh.DataType.Wrong)}`}return Y.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Y._)`!${u}(${r})`}return Y.nil}}subschema(e,r){let n=(0,cE.getSubschema)(this.it,e);(0,cE.extendSubschemaData)(n,this.it,e),(0,cE.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return jse(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Ts.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Ts.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Y.Name)),!0}};fi.KeywordCxt=qh;function _j(t,e,r,n){let s=new qh(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Wl.funcKeywordCode)(s,r):"macro"in r?(0,Wl.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Wl.funcKeywordCode)(s,r)}var Wse=/^\/(?:[^~]|~0|~1)*$/,Yse=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function vj(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return se.default.rootData;if(t[0]==="/"){if(!Wse.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=se.default.rootData}else{let c=Yse.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,Y._)`${i}${(0,Y.getProperty)((0,Ts.unescapeJsonPointer)(c))}`,o=(0,Y._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}fi.getData=vj});var Yl=_(pE=>{"use strict";Object.defineProperty(pE,"__esModule",{value:!0});var hE=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};pE.default=hE});var di=_(gE=>{"use strict";Object.defineProperty(gE,"__esModule",{value:!0});var mE=Gl(),yE=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,mE.resolveUrl)(e,r,n),this.missingSchema=(0,mE.normalizeId)((0,mE.getFullPath)(e,this.missingRef))}};gE.default=yE});var ho=_(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.resolveSchema=ln.getCompilingSchema=ln.resolveRef=ln.compileSchema=ln.SchemaEnv=void 0;var Cn=te(),Xse=Yl(),fo=un(),An=Gl(),Ej=de(),Qse=Ta(),Oa=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,An.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};ln.SchemaEnv=Oa;function vE(t){let e=Sj.call(this,t);if(e)return e;let r=(0,An.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Cn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Xse.default,code:(0,Cn._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:fo.default.data,parentData:fo.default.parentData,parentDataProperty:fo.default.parentDataProperty,dataNames:[fo.default.data],dataPathArr:[Cn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Cn.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Cn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Cn._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,Qse.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(fo.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let d=new Function(`${fo.default.self}`,`${fo.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=c;d.evaluated={props:p instanceof Cn.Name?void 0:p,items:m instanceof Cn.Name?void 0:m,dynamicProps:p instanceof Cn.Name,dynamicItems:m instanceof Cn.Name},d.source&&(d.source.evaluated=(0,Cn.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),f}finally{this._compilations.delete(t)}}ln.compileSchema=vE;function Zse(t,e,r){var n;r=(0,An.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=rie.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Oa({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=eie.call(this,i)}ln.resolveRef=Zse;function eie(t){return(0,An.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:vE.call(this,t)}function Sj(t){for(let e of this._compilations)if(tie(e,t))return e}ln.getCompilingSchema=Sj;function tie(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function rie(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||jh.call(this,t,e)}function jh(t,e){let r=this.opts.uriResolver.parse(e),n=(0,An._getFullPath)(this.opts.uriResolver,r),s=(0,An.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return _E.call(this,r,t);let i=(0,An.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=jh.call(this,t,o);return typeof a?.schema!="object"?void 0:_E.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||vE.call(this,o),i===(0,An.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,An.resolveUrl)(this.opts.uriResolver,s,c)),new Oa({schema:a,schemaId:u,root:t,baseId:s})}return _E.call(this,r,o)}}ln.resolveSchema=jh;var nie=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _E(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,Ej.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!nie.has(a)&&c&&(e=(0,An.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Ej.schemaHasRulesButRef)(r,this.RULES)){let a=(0,An.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=jh.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Oa({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var $j=_((X0e,sie)=>{sie.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var wj=_(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});var bj=Ff();bj.code='require("ajv/dist/runtime/uri").default';EE.default=bj});var bE=_(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.CodeGen=Xt.Name=Xt.nil=Xt.stringify=Xt.str=Xt._=Xt.KeywordCxt=void 0;var iie=Ta();Object.defineProperty(Xt,"KeywordCxt",{enumerable:!0,get:function(){return iie.KeywordCxt}});var Na=te();Object.defineProperty(Xt,"_",{enumerable:!0,get:function(){return Na._}});Object.defineProperty(Xt,"str",{enumerable:!0,get:function(){return Na.str}});Object.defineProperty(Xt,"stringify",{enumerable:!0,get:function(){return Na.stringify}});Object.defineProperty(Xt,"nil",{enumerable:!0,get:function(){return Na.nil}});Object.defineProperty(Xt,"Name",{enumerable:!0,get:function(){return Na.Name}});Object.defineProperty(Xt,"CodeGen",{enumerable:!0,get:function(){return Na.CodeGen}});var oie=Yl(),Nj=di(),aie=tE(),Xl=ho(),uie=te(),Ql=Gl(),Dh=Bl(),$E=de(),Rj=$j(),lie=wj(),Ij=(t,e)=>new RegExp(t,e);Ij.code="new RegExp";var cie=["removeAdditional","useDefaults","coerceTypes"],fie=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),die={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},hie={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Pj=200;function pie(t){var e,r,n,s,i,o,a,u,c,l,f,h,d,p,m,g,E,$,v,y,S,N,w,T,A;let R=t.strict,j=(e=t.code)===null||e===void 0?void 0:e.optimize,q=j===!0||j===void 0?1:j||0,D=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Ij,ee=(s=t.uriResolver)!==null&&s!==void 0?s:lie.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:R)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:R)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:R)!==null&&l!==void 0?l:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:R)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:R)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:q,regExp:D}:{optimize:q,regExp:D},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:Pj,loopEnum:(g=t.loopEnum)!==null&&g!==void 0?g:Pj,meta:(E=t.meta)!==null&&E!==void 0?E:!0,messages:($=t.messages)!==null&&$!==void 0?$:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(y=t.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:(N=t.validateSchema)!==null&&N!==void 0?N:!0,validateFormats:(w=t.validateFormats)!==null&&w!==void 0?w:!0,unicodeRegExp:(T=t.unicodeRegExp)!==null&&T!==void 0?T:!0,int32range:(A=t.int32range)!==null&&A!==void 0?A:!0,uriResolver:ee}}var Zl=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...pie(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new uie.ValueScope({scope:{},prefixes:fie,es5:r,lines:n}),this.logger=Eie(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,aie.getRules)(),Tj.call(this,die,e,"NOT SUPPORTED"),Tj.call(this,hie,e,"DEPRECATED","warn"),this._metaOpts=_ie.call(this),e.formats&&yie.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&gie.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),mie.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=Rj;n==="id"&&(s={...Rj},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,f){await i.call(this,l.$schema);let h=this._addSchema(l,f);return h.validate||o.call(this,h)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(f){if(!(f instanceof Nj.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:f}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${f} cannot be resolved`)}async function u(l){let f=await c.call(this,l);this.refs[l]||await i.call(this,f.$schema),this.refs[l]||this.addSchema(f,l,r)}async function c(l){let f=this._loading[l];if(f)return f;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Ql.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=Oj.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Xl.SchemaEnv({schema:{},schemaId:n});if(r=Xl.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Oj.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Ql.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($ie.call(this,n,r),!r)return(0,$E.eachItem)(n,i=>SE.call(this,i)),this;wie.call(this,r);let s={...r,type:(0,Dh.getJSONTypes)(r.type),schemaType:(0,Dh.getJSONTypes)(r.schemaType)};return(0,$E.eachItem)(n,s.type.length===0?i=>SE.call(this,i,s):i=>s.type.forEach(o=>SE.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=Cj(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Ql.normalizeId)(o||n);let c=Ql.getSchemaRefs.call(this,e,n);return u=new Xl.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Xl.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Xl.compileSchema.call(this,e)}finally{this.opts=r}}};Xt.default=Zl;Zl.ValidationError=oie.default;Zl.MissingRefError=Nj.default;function Tj(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function Oj(t){return t=(0,Ql.normalizeId)(t),this.schemas[t]||this.refs[t]}function mie(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function yie(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function gie(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function _ie(){let t={...this.opts};for(let e of cie)delete t[e];return t}var vie={log(){},warn(){},error(){}};function Eie(t){if(t===!1)return vie;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Sie=/^[a-z_$][a-z0-9_$:-]*$/i;function $ie(t,e){let{RULES:r}=this;if((0,$E.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Sie.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function SE(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Dh.getJSONTypes)(e.type),schemaType:(0,Dh.getJSONTypes)(e.schemaType)}};e.before?bie.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function bie(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function wie(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Cj(e)),t.validateSchema=this.compile(e,!0))}var Rie={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Cj(t){return{anyOf:[t,Rie]}}});var Aj=_(wE=>{"use strict";Object.defineProperty(wE,"__esModule",{value:!0});var Pie={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};wE.default=Pie});var RE=_(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.callRef=po.getValidate=void 0;var Tie=di(),kj=Yt(),qr=te(),Ia=un(),qj=ho(),Lh=de(),Oie={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return f();let l=qj.resolveRef.call(u,c,s,r);if(l===void 0)throw new Tie.default(n.opts.uriResolver,s,r);if(l instanceof qj.SchemaEnv)return h(l);return d(l);function f(){if(i===c)return xh(t,o,i,i.$async);let p=e.scopeValue("root",{ref:c});return xh(t,(0,qr._)`${p}.validate`,c,c.$async)}function h(p){let m=jj(t,p);xh(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,qr.stringify)(p)}:{ref:p}),g=e.name("valid"),E=t.subschema({schema:p,dataTypes:[],schemaPath:qr.nil,topSchemaRef:m,errSchemaPath:r},g);t.mergeEvaluated(E),t.ok(g)}}};function jj(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,qr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}po.getValidate=jj;function xh(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?Ia.default.this:qr.nil;n?l():f();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,qr._)`await ${(0,kj.callValidateCode)(t,e,c)}`),d(e),o||s.assign(p,!0)},m=>{s.if((0,qr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function f(){t.result((0,kj.callValidateCode)(t,e,c),()=>d(e),()=>h(e))}function h(p){let m=(0,qr._)`${p}.errors`;s.assign(Ia.default.vErrors,(0,qr._)`${Ia.default.vErrors} === null ? ${m} : ${Ia.default.vErrors}.concat(${m})`),s.assign(Ia.default.errors,(0,qr._)`${Ia.default.vErrors}.length`)}function d(p){var m;if(!i.opts.unevaluated)return;let g=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=Lh.mergeEvaluated.props(s,g.props,i.props));else{let E=s.var("props",(0,qr._)`${p}.evaluated.props`);i.props=Lh.mergeEvaluated.props(s,E,i.props,qr.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=Lh.mergeEvaluated.items(s,g.items,i.items));else{let E=s.var("items",(0,qr._)`${p}.evaluated.items`);i.items=Lh.mergeEvaluated.items(s,E,i.items,qr.Name)}}}po.callRef=xh;po.default=Oie});var Dj=_(PE=>{"use strict";Object.defineProperty(PE,"__esModule",{value:!0});var Nie=Aj(),Iie=RE(),Cie=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Nie.default,Iie.default];PE.default=Cie});var Lj=_(TE=>{"use strict";Object.defineProperty(TE,"__esModule",{value:!0});var Mh=te(),hi=Mh.operators,Fh={maximum:{okStr:"<=",ok:hi.LTE,fail:hi.GT},minimum:{okStr:">=",ok:hi.GTE,fail:hi.LT},exclusiveMaximum:{okStr:"<",ok:hi.LT,fail:hi.GTE},exclusiveMinimum:{okStr:">",ok:hi.GT,fail:hi.LTE}},Aie={message:({keyword:t,schemaCode:e})=>(0,Mh.str)`must be ${Fh[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Mh._)`{comparison: ${Fh[t].okStr}, limit: ${e}}`},kie={keyword:Object.keys(Fh),type:"number",schemaType:"number",$data:!0,error:Aie,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Mh._)`${r} ${Fh[e].fail} ${n} || isNaN(${r})`)}};TE.default=kie});var xj=_(OE=>{"use strict";Object.defineProperty(OE,"__esModule",{value:!0});var ec=te(),qie={message:({schemaCode:t})=>(0,ec.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,ec._)`{multipleOf: ${t}}`},jie={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:qie,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,ec._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,ec._)`${o} !== parseInt(${o})`;t.fail$data((0,ec._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};OE.default=jie});var Fj=_(NE=>{"use strict";Object.defineProperty(NE,"__esModule",{value:!0});function Mj(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}NE.default=Mj;Mj.code='require("ajv/dist/runtime/ucs2length").default'});var Vj=_(IE=>{"use strict";Object.defineProperty(IE,"__esModule",{value:!0});var mo=te(),Die=de(),Lie=Fj(),xie={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,mo.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,mo._)`{limit: ${t}}`},Mie={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:xie,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?mo.operators.GT:mo.operators.LT,o=s.opts.unicode===!1?(0,mo._)`${r}.length`:(0,mo._)`${(0,Die.useFunc)(t.gen,Lie.default)}(${r})`;t.fail$data((0,mo._)`${o} ${i} ${n}`)}};IE.default=Mie});var zj=_(CE=>{"use strict";Object.defineProperty(CE,"__esModule",{value:!0});var Fie=Yt(),Vh=te(),Vie={message:({schemaCode:t})=>(0,Vh.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Vh._)`{pattern: ${t}}`},zie={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Vie,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Vh._)`(new RegExp(${s}, ${o}))`:(0,Fie.usePattern)(t,n);t.fail$data((0,Vh._)`!${a}.test(${e})`)}};CE.default=zie});var Hj=_(AE=>{"use strict";Object.defineProperty(AE,"__esModule",{value:!0});var tc=te(),Hie={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,tc.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,tc._)`{limit: ${t}}`},Uie={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Hie,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?tc.operators.GT:tc.operators.LT;t.fail$data((0,tc._)`Object.keys(${r}).length ${s} ${n}`)}};AE.default=Uie});var Uj=_(kE=>{"use strict";Object.defineProperty(kE,"__esModule",{value:!0});var rc=Yt(),nc=te(),Kie=de(),Bie={message:({params:{missingProperty:t}})=>(0,nc.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,nc._)`{missingProperty: ${t}}`},Gie={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Bie,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let g=o.schemaEnv.baseId+o.errSchemaPath,E=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Kie.checkStrictMode)(o,E,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(nc.nil,f);else for(let d of r)(0,rc.checkReportMissingProp)(t,d)}function l(){let d=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,rc.checkMissingProp)(t,r,d)),(0,rc.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,rc.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,rc.propertyInData)(e,s,d,a.ownProperties)),e.if((0,nc.not)(p),()=>{t.error(),e.break()})},nc.nil)}}};kE.default=Gie});var Kj=_(qE=>{"use strict";Object.defineProperty(qE,"__esModule",{value:!0});var sc=te(),Jie={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,sc.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,sc._)`{limit: ${t}}`},Wie={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Jie,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?sc.operators.GT:sc.operators.LT;t.fail$data((0,sc._)`${r}.length ${s} ${n}`)}};qE.default=Wie});var zh=_(jE=>{"use strict";Object.defineProperty(jE,"__esModule",{value:!0});var Bj=Yr();Bj.code='require("ajv/dist/runtime/equal").default';jE.default=Bj});var Gj=_(LE=>{"use strict";Object.defineProperty(LE,"__esModule",{value:!0});var DE=Bl(),Qt=te(),Yie=de(),Xie=zh(),Qie={message:({params:{i:t,j:e}})=>(0,Qt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Qt._)`{i: ${t}, j: ${e}}`},Zie={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Qie,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,DE.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,Qt._)`${o} === false`),t.ok(u);function l(){let p=e.let("i",(0,Qt._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Qt._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function h(p,m){let g=e.name("item"),E=(0,DE.checkDataTypes)(c,g,a.opts.strictNumbers,DE.DataType.Wrong),$=e.const("indices",(0,Qt._)`{}`);e.for((0,Qt._)`;${p}--;`,()=>{e.let(g,(0,Qt._)`${r}[${p}]`),e.if(E,(0,Qt._)`continue`),c.length>1&&e.if((0,Qt._)`typeof ${g} == "string"`,(0,Qt._)`${g} += "_"`),e.if((0,Qt._)`typeof ${$}[${g}] == "number"`,()=>{e.assign(m,(0,Qt._)`${$}[${g}]`),t.error(),e.assign(u,!1).break()}).code((0,Qt._)`${$}[${g}] = ${p}`)})}function d(p,m){let g=(0,Yie.useFunc)(e,Xie.default),E=e.name("outer");e.label(E).for((0,Qt._)`;${p}--;`,()=>e.for((0,Qt._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Qt._)`${g}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(E)})))}}};LE.default=Zie});var Jj=_(ME=>{"use strict";Object.defineProperty(ME,"__esModule",{value:!0});var xE=te(),eoe=de(),toe=zh(),roe={message:"must be equal to constant",params:({schemaCode:t})=>(0,xE._)`{allowedValue: ${t}}`},noe={keyword:"const",$data:!0,error:roe,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,xE._)`!${(0,eoe.useFunc)(e,toe.default)}(${r}, ${s})`):t.fail((0,xE._)`${i} !== ${r}`)}};ME.default=noe});var Wj=_(FE=>{"use strict";Object.defineProperty(FE,"__esModule",{value:!0});var ic=te(),soe=de(),ioe=zh(),ooe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,ic._)`{allowedValues: ${t}}`},aoe={keyword:"enum",schemaType:"array",$data:!0,error:ooe,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,soe.useFunc)(e,ioe.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",i);l=(0,ic.or)(...s.map((p,m)=>h(d,m)))}t.pass(l);function f(){e.assign(l,!1),e.forOf("v",i,d=>e.if((0,ic._)`${c()}(${r}, ${d})`,()=>e.assign(l,!0).break()))}function h(d,p){let m=s[p];return typeof m=="object"&&m!==null?(0,ic._)`${c()}(${r}, ${d}[${p}])`:(0,ic._)`${r} === ${m}`}}};FE.default=aoe});var Yj=_(VE=>{"use strict";Object.defineProperty(VE,"__esModule",{value:!0});var uoe=Lj(),loe=xj(),coe=Vj(),foe=zj(),doe=Hj(),hoe=Uj(),poe=Kj(),moe=Gj(),yoe=Jj(),goe=Wj(),_oe=[uoe.default,loe.default,coe.default,foe.default,doe.default,hoe.default,poe.default,moe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},yoe.default,goe.default];VE.default=_oe});var HE=_(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.validateAdditionalItems=void 0;var yo=te(),zE=de(),voe={message:({params:{len:t}})=>(0,yo.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,yo._)`{limit: ${t}}`},Eoe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:voe,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,zE.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Xj(t,n)}};function Xj(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,yo._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,yo._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,zE.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,yo._)`${a} <= ${e.length}`);r.if((0,yo.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:zE.Type.Num},c),o.allErrors||r.if((0,yo.not)(c),()=>r.break())})}}oc.validateAdditionalItems=Xj;oc.default=Eoe});var UE=_(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.validateTuple=void 0;var Qj=te(),Hh=de(),Soe=Yt(),$oe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Zj(t,"additionalItems",e);r.items=!0,!(0,Hh.alwaysValidSchema)(r,e)&&t.ok((0,Soe.validateArray)(t))}};function Zj(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Hh.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,Qj._)`${i}.length`);r.forEach((f,h)=>{(0,Hh.alwaysValidSchema)(a,f)||(n.if((0,Qj._)`${c} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function l(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let g=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Hh.checkStrictMode)(a,g,h.strictTuples)}}}ac.validateTuple=Zj;ac.default=$oe});var eD=_(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});var boe=UE(),woe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,boe.validateTuple)(t,"items")};KE.default=woe});var rD=_(BE=>{"use strict";Object.defineProperty(BE,"__esModule",{value:!0});var tD=te(),Roe=de(),Poe=Yt(),Toe=HE(),Ooe={message:({params:{len:t}})=>(0,tD.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,tD._)`{limit: ${t}}`},Noe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ooe,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Roe.alwaysValidSchema)(n,e)&&(s?(0,Toe.validateAdditionalItems)(t,s):t.ok((0,Poe.validateArray)(t)))}};BE.default=Noe});var nD=_(GE=>{"use strict";Object.defineProperty(GE,"__esModule",{value:!0});var cn=te(),Uh=de(),Ioe={message:({params:{min:t,max:e}})=>e===void 0?(0,cn.str)`must contain at least ${t} valid item(s)`:(0,cn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,cn._)`{minContains: ${t}}`:(0,cn._)`{minContains: ${t}, maxContains: ${e}}`},Coe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ioe,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,cn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Uh.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Uh.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Uh.alwaysValidSchema)(i,r)){let m=(0,cn._)`${l} >= ${o}`;a!==void 0&&(m=(0,cn._)`${m} && ${l} <= ${a}`),t.pass(m);return}i.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,cn._)`${s}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),g=e.let("count",0);d(m,()=>e.if(m,()=>p(g)))}function d(m,g){e.forRange("i",0,l,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:Uh.Type.Num,compositeRule:!0},m),g()})}function p(m){e.code((0,cn._)`${m}++`),a===void 0?e.if((0,cn._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,cn._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,cn._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};GE.default=Coe});var oD=_(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.validateSchemaDeps=Xn.validatePropertyDeps=Xn.error=void 0;var JE=te(),Aoe=de(),uc=Yt();Xn.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,JE.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,JE._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var koe={keyword:"dependencies",type:"object",schemaType:"object",error:Xn.error,code(t){let[e,r]=qoe(t);sD(t,e),iD(t,r)}};function qoe({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function sD(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,uc.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,uc.checkReportMissingProp)(t,c)}):(r.if((0,JE._)`${u} && (${(0,uc.checkMissingProp)(t,a,i)})`),(0,uc.reportMissingProp)(t,i),r.else())}}Xn.validatePropertyDeps=sD;function iD(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Aoe.alwaysValidSchema)(i,e[a])||(r.if((0,uc.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}Xn.validateSchemaDeps=iD;Xn.default=koe});var uD=_(WE=>{"use strict";Object.defineProperty(WE,"__esModule",{value:!0});var aD=te(),joe=de(),Doe={message:"property name must be valid",params:({params:t})=>(0,aD._)`{propertyName: ${t.propertyName}}`},Loe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Doe,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,joe.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,aD.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};WE.default=Loe});var XE=_(YE=>{"use strict";Object.defineProperty(YE,"__esModule",{value:!0});var Kh=Yt(),kn=te(),xoe=un(),Bh=de(),Moe={message:"must NOT have additional properties",params:({params:t})=>(0,kn._)`{additionalProperty: ${t.additionalProperty}}`},Foe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Moe,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Bh.alwaysValidSchema)(o,r))return;let c=(0,Kh.allSchemaProperties)(n.properties),l=(0,Kh.allSchemaProperties)(n.patternProperties);f(),t.ok((0,kn._)`${i} === ${xoe.default.errors}`);function f(){e.forIn("key",s,g=>{!c.length&&!l.length?p(g):e.if(h(g),()=>p(g))})}function h(g){let E;if(c.length>8){let $=(0,Bh.schemaRefOrVal)(o,n.properties,"properties");E=(0,Kh.isOwnProperty)(e,$,g)}else c.length?E=(0,kn.or)(...c.map($=>(0,kn._)`${g} === ${$}`)):E=kn.nil;return l.length&&(E=(0,kn.or)(E,...l.map($=>(0,kn._)`${(0,Kh.usePattern)(t,$)}.test(${g})`))),(0,kn.not)(E)}function d(g){e.code((0,kn._)`delete ${s}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Bh.alwaysValidSchema)(o,r)){let E=e.name("valid");u.removeAdditional==="failing"?(m(g,E,!1),e.if((0,kn.not)(E),()=>{t.reset(),d(g)})):(m(g,E),a||e.if((0,kn.not)(E),()=>e.break()))}}function m(g,E,$){let v={keyword:"additionalProperties",dataProp:g,dataPropType:Bh.Type.Str};$===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,E)}}};YE.default=Foe});var fD=_(ZE=>{"use strict";Object.defineProperty(ZE,"__esModule",{value:!0});var Voe=Ta(),lD=Yt(),QE=de(),cD=XE(),zoe={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&cD.default.code(new Voe.KeywordCxt(i,cD.default,"additionalProperties"));let o=(0,lD.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=QE.mergeEvaluated.props(e,(0,QE.toHash)(o),i.props));let a=o.filter(f=>!(0,QE.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=e.name("valid");for(let f of a)c(f)?l(f):(e.if((0,lD.propertyInData)(e,s,f,i.opts.ownProperties)),l(f),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(u);function c(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function l(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};ZE.default=zoe});var mD=_(eS=>{"use strict";Object.defineProperty(eS,"__esModule",{value:!0});var dD=Yt(),Gh=te(),hD=de(),pD=de(),Hoe={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,dD.allSchemaProperties)(r),u=a.filter(m=>(0,hD.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof Gh.Name)&&(i.props=(0,pD.evaluatedPropsToName)(e,i.props));let{props:f}=i;h();function h(){for(let m of a)c&&d(m),i.allErrors?p(m):(e.var(l,!0),p(m),e.if(l))}function d(m){for(let g in c)new RegExp(m).test(g)&&(0,hD.checkStrictMode)(i,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,g=>{e.if((0,Gh._)`${(0,dD.usePattern)(t,m)}.test(${g})`,()=>{let E=u.includes(m);E||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:pD.Type.Str},l),i.opts.unevaluated&&f!==!0?e.assign((0,Gh._)`${f}[${g}]`,!0):!E&&!i.allErrors&&e.if((0,Gh.not)(l),()=>e.break())})})}}};eS.default=Hoe});var yD=_(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});var Uoe=de(),Koe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Uoe.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};tS.default=Koe});var gD=_(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});var Boe=Yt(),Goe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Boe.validateUnion,error:{message:"must match a schema in anyOf"}};rS.default=Goe});var _D=_(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});var Jh=te(),Joe=de(),Woe={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Jh._)`{passingSchemas: ${t.passing}}`},Yoe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Woe,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,f)=>{let h;(0,Joe.alwaysValidSchema)(s,l)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&e.if((0,Jh._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Jh._)`[${a}, ${f}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,Jh.Name)})})}}};nS.default=Yoe});var vD=_(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});var Xoe=de(),Qoe={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,Xoe.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};sS.default=Qoe});var $D=_(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});var Wh=te(),SD=de(),Zoe={message:({params:t})=>(0,Wh.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Wh._)`{failingKeyword: ${t.ifClause}}`},eae={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Zoe,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,SD.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=ED(n,"then"),i=ED(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,Wh.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,f){return()=>{let h=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,Wh._)`${l}`):t.setParams({ifClause:l})}}}};function ED(t,e){let r=t.schema[e];return r!==void 0&&!(0,SD.alwaysValidSchema)(t,r)}iS.default=eae});var bD=_(oS=>{"use strict";Object.defineProperty(oS,"__esModule",{value:!0});var tae=de(),rae={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,tae.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};oS.default=rae});var wD=_(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});var nae=HE(),sae=eD(),iae=UE(),oae=rD(),aae=nD(),uae=oD(),lae=uD(),cae=XE(),fae=fD(),dae=mD(),hae=yD(),pae=gD(),mae=_D(),yae=vD(),gae=$D(),_ae=bD();function vae(t=!1){let e=[hae.default,pae.default,mae.default,yae.default,gae.default,_ae.default,lae.default,cae.default,uae.default,fae.default,dae.default];return t?e.push(sae.default,oae.default):e.push(nae.default,iae.default),e.push(aae.default),e}aS.default=vae});var RD=_(uS=>{"use strict";Object.defineProperty(uS,"__esModule",{value:!0});var Nt=te(),Eae={message:({schemaCode:t})=>(0,Nt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Nt._)`{format: ${t}}`},Sae={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Eae,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:f}=a;if(!u.validateFormats)return;s?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=r.const("fDef",(0,Nt._)`${p}[${o}]`),g=r.let("fType"),E=r.let("format");r.if((0,Nt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(g,(0,Nt._)`${m}.type || "string"`).assign(E,(0,Nt._)`${m}.validate`),()=>r.assign(g,(0,Nt._)`"string"`).assign(E,m)),t.fail$data((0,Nt.or)($(),v()));function $(){return u.strictSchema===!1?Nt.nil:(0,Nt._)`${o} && !${E}`}function v(){let y=l.$async?(0,Nt._)`(${m}.async ? await ${E}(${n}) : ${E}(${n}))`:(0,Nt._)`${E}(${n})`,S=(0,Nt._)`(typeof ${E} == "function" ? ${y} : ${E}.test(${n}))`;return(0,Nt._)`${E} && ${E} !== true && ${g} === ${e} && !${S}`}}function d(){let p=f.formats[i];if(!p){$();return}if(p===!0)return;let[m,g,E]=v(p);m===e&&t.pass(y());function $(){if(u.strictSchema===!1){f.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function v(S){let N=S instanceof RegExp?(0,Nt.regexpCode)(S):u.code.formats?(0,Nt._)`${u.code.formats}${(0,Nt.getProperty)(i)}`:void 0,w=r.scopeValue("formats",{key:i,ref:S,code:N});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Nt._)`${w}.validate`]:["string",S,w]}function y(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,Nt._)`await ${E}(${n})`}return typeof g=="function"?(0,Nt._)`${E}(${n})`:(0,Nt._)`${E}.test(${n})`}}}};uS.default=Sae});var PD=_(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});var $ae=RD(),bae=[$ae.default];lS.default=bae});var TD=_(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.contentVocabulary=Ca.metadataVocabulary=void 0;Ca.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ca.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ND=_(cS=>{"use strict";Object.defineProperty(cS,"__esModule",{value:!0});var wae=Dj(),Rae=Yj(),Pae=wD(),Tae=PD(),OD=TD(),Oae=[wae.default,Rae.default,(0,Pae.default)(),Tae.default,OD.metadataVocabulary,OD.contentVocabulary];cS.default=Oae});var fS=_(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.DiscrError=void 0;var Nae;(function(t){t.Tag="tag",t.Mapping="mapping"})(Nae=lc.DiscrError||(lc.DiscrError={}))});var CD=_(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});var Aa=te(),dS=fS(),ID=ho(),Iae=de(),Cae={message:({params:{discrError:t,tagName:e}})=>t===dS.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Aa._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Aae={keyword:"discriminator",type:"object",schemaType:"object",error:Cae,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,Aa._)`${r}${(0,Aa.getProperty)(a)}`);e.if((0,Aa._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:dS.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,Aa._)`${c} === ${p}`),e.assign(u,f(d[p]));e.else(),t.error(!1,{discrError:dS.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,Aa.Name),p}function h(){var d;let p={},m=E(s),g=!0;for(let y=0;y<o.length;y++){let S=o[y];S?.$ref&&!(0,Iae.schemaHasRulesButRef)(S,i.self.RULES)&&(S=ID.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,S?.$ref),S instanceof ID.SchemaEnv&&(S=S.schema));let N=(d=S?.properties)===null||d===void 0?void 0:d[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||E(S)),$(N,y)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function E({required:y}){return Array.isArray(y)&&y.includes(a)}function $(y,S){if(y.const)v(y.const,S);else if(y.enum)for(let N of y.enum)v(N,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(y,S){if(typeof y!="string"||y in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[y]=S}}}};hS.default=Aae});var AD=_((M_e,kae)=>{kae.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var jD=_((Et,qD)=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.MissingRefError=Et.ValidationError=Et.CodeGen=Et.Name=Et.nil=Et.stringify=Et.str=Et._=Et.KeywordCxt=void 0;var qae=bE(),jae=ND(),Dae=CD(),kD=AD(),Lae=["/properties"],Yh="http://json-schema.org/draft-07/schema",Xh=class extends qae.default{_addVocabularies(){super._addVocabularies(),jae.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Dae.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(kD,Lae):kD;this.addMetaSchema(e,Yh,!1),this.refs["http://json-schema.org/schema"]=Yh}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Yh)?Yh:void 0)}};qD.exports=Et=Xh;Object.defineProperty(Et,"__esModule",{value:!0});Et.default=Xh;var xae=Ta();Object.defineProperty(Et,"KeywordCxt",{enumerable:!0,get:function(){return xae.KeywordCxt}});var ka=te();Object.defineProperty(Et,"_",{enumerable:!0,get:function(){return ka._}});Object.defineProperty(Et,"str",{enumerable:!0,get:function(){return ka.str}});Object.defineProperty(Et,"stringify",{enumerable:!0,get:function(){return ka.stringify}});Object.defineProperty(Et,"nil",{enumerable:!0,get:function(){return ka.nil}});Object.defineProperty(Et,"Name",{enumerable:!0,get:function(){return ka.Name}});Object.defineProperty(Et,"CodeGen",{enumerable:!0,get:function(){return ka.CodeGen}});var Mae=Yl();Object.defineProperty(Et,"ValidationError",{enumerable:!0,get:function(){return Mae.default}});var Fae=di();Object.defineProperty(Et,"MissingRefError",{enumerable:!0,get:function(){return Fae.default}})});var Os=_(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.checkMetadata=void 0;var Vae=de(),zae={keyword:"metadata",schemaType:"object",code(t){DD(t);let{gen:e,schema:r,it:n}=t;if((0,Vae.alwaysValidSchema)(n,r))return;let s=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},s),t.ok(s)}};function DD({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}cc.checkMetadata=DD;cc.default=zae});var Qh=_(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.hasRef=void 0;var LD=ho(),fc=te(),Hae=di(),xD=un(),MD=RE(),Uae=Os(),Kae={keyword:"ref",schemaType:"string",code(t){(0,Uae.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{schemaEnv:{root:o}}=i,a=e.name("valid");s.nullable?(e.var(a,(0,fc._)`${r} === null`),e.if((0,fc.not)(a),u)):(e.var(a,!1),u()),t.ok(a);function u(){var f;let h=(f=o.schema.definitions)===null||f===void 0?void 0:f[n];if(!h)throw new Hae.default(i.opts.uriResolver,"",n,`No definition ${n}`);pS(h)||!i.opts.inlineRefs?c(h):l(h)}function c(f){let h=LD.compileSchema.call(i.self,new LD.SchemaEnv({schema:f,root:o,schemaPath:`/definitions/${n}`})),d=(0,MD.getValidate)(t,h),p=e.const("_errs",xD.default.errors);(0,MD.callRef)(t,d,h,h.$async),e.assign(a,(0,fc._)`${p} === ${xD.default.errors}`)}function l(f){let h=e.scopeValue("schema",i.opts.code.source===!0?{ref:f,code:(0,fc.stringify)(f)}:{ref:f});t.subschema({schema:f,dataTypes:[],schemaPath:fc.nil,topSchemaRef:h,errSchemaPath:`/definitions/${n}`},a)}}};function pS(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&pS(r))return!0}return!1}dc.hasRef=pS;dc.default=Kae});var yS=_(mS=>{"use strict";Object.defineProperty(mS,"__esModule",{value:!0});var Bae=/t|\s/i,Gae=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Jae=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,Wae=[0,31,28,31,30,31,30,31,31,30,31,30,31];function VD(t,e){let r=t.split(Bae);return r.length===2&&FD(r[0])&&Yae(r[1])||e&&r.length===1&&FD(r[0])}mS.default=VD;function FD(t){let e=Gae.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&(s<=Wae[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function Yae(t){let e=Jae.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3],i=+(e[4]||0),o=+(e[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}VD.code='require("ajv/dist/runtime/timestamp").default'});var qa=_(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.typeErrorParams=pi.typeErrorMessage=pi.typeError=void 0;var Xae=te();function Qae(t){return{message:e=>zD(e,t),params:e=>HD(e,t)}}pi.typeError=Qae;function zD({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}pi.typeErrorMessage=zD;function HD({parentSchema:t},e){return(0,Xae._)`{type: ${e}, nullable: ${!!t?.nullable}}`}pi.typeErrorParams=HD});var gS=_(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.intRange=void 0;var zr=te(),Zae=yS(),eue=de(),tue=Os(),UD=qa();ja.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var rue={message:t=>(0,UD.typeErrorMessage)(t,t.schema),params:t=>(0,UD.typeErrorParams)(t,t.schema)};function nue(t){let{gen:e,data:r,it:n}=t,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,zr._)`${r} instanceof Date `;let o=(0,eue.useFunc)(e,Zae.default),a=i?(0,zr._)`, true`:zr.nil,u=(0,zr._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?u:(0,zr.or)((0,zr._)`${r} instanceof Date`,u)}var sue={keyword:"type",schemaType:"string",error:rue,code(t){(0,tue.checkMetadata)(t);let{data:e,schema:r,parentSchema:n,it:s}=t,i;switch(r){case"boolean":case"string":i=(0,zr._)`typeof ${e} == ${r}`;break;case"timestamp":{i=nue(t);break}case"float32":case"float64":i=(0,zr._)`typeof ${e} == "number"`;break;default:{let o=r;if(i=(0,zr._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,zr._)`${i} && ${e} >= 0`);else{let[a,u]=ja.intRange[o];i=(0,zr._)`${i} && ${e} >= ${a} && ${e} <= ${u}`}}}t.pass(n.nullable?(0,zr.or)((0,zr._)`${e} === null`,i):i)}};ja.default=sue});var La=_(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.checkNullableObject=Da.checkNullable=void 0;var Zh=te();function KD({gen:t,data:e,parentSchema:r},n=Zh.nil){let s=t.name("valid");return r.nullable?(t.let(s,(0,Zh._)`${e} === null`),n=(0,Zh.not)(s)):t.let(s,!1),[s,n]}Da.checkNullable=KD;function iue(t,e){let[r,n]=KD(t,e);return[r,(0,Zh._)`${n} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}Da.checkNullableObject=iue});var BD=_(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});var mi=te(),oue=Os(),aue=La(),uue={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,mi._)`{allowedValues: ${t}}`},lue={keyword:"enum",schemaType:"array",error:uue,code(t){(0,oue.checkMetadata)(t);let{gen:e,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=t;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,u=(0,mi._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let l;[a,l]=(0,aue.checkNullable)(t,u),e.if(l,c)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,mi.and)(u,(0,mi.or)(...n.map(l=>(0,mi._)`${r} === ${l}`))),i.nullable&&(a=(0,mi.or)((0,mi._)`${r} === null`,a))}t.pass(a);function c(){e.forOf("v",s,l=>e.if((0,mi._)`${a} = ${r} === ${l}`,()=>e.break()))}}};_S.default=lue});var JD=_(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0});var cue=de(),fue=Yt(),GD=te(),due=Os(),hue=La(),pue=qa(),mue={keyword:"elements",schemaType:"object",error:(0,pue.typeError)("array"),code(t){(0,due.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t;if((0,cue.alwaysValidSchema)(s,n))return;let[i]=(0,hue.checkNullable)(t);e.if((0,GD.not)(i),()=>e.if((0,GD._)`Array.isArray(${r})`,()=>e.assign(i,(0,fue.validateArray)(t)),()=>t.error())),t.ok(i)}};vS.default=mue});var SS=_(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.validateProperties=yi.error=void 0;var ES=Yt(),WD=de(),Ns=te(),yue=Os(),gue=La(),YD=qa(),xa;(function(t){t.Additional="additional",t.Missing="missing"})(xa||(xa={}));yi.error={message:t=>{let{params:e}=t;return e.propError?e.propError===xa.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,YD.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===xa.Additional?(0,Ns._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,Ns._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,YD.typeErrorParams)(t,"object")}};var _ue={keyword:"properties",schemaType:"object",error:yi.error,code:XD};function XD(t){(0,yue.checkMetadata)(t);let{gen:e,data:r,parentSchema:n,it:s}=t,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(d())throw new Error("JTD: properties and optionalProperties have common members");let[a,u]=p("properties"),[c,l]=p("optionalProperties");if(u.length===0&&l.length===0&&i)return;let[f,h]=s.jtdDiscriminator===void 0?(0,gue.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(h,()=>e.assign(f,!0).block(()=>{m(u,"properties",!0),m(l,"optionalProperties"),i||E()})),t.pass(f);function d(){let v=n.properties,y=n.optionalProperties;if(!(v&&y))return!1;for(let S in v)if(Object.prototype.hasOwnProperty.call(y,S))return!0;return!1}function p(v){let y=n[v],S=y?(0,ES.allSchemaProperties)(y):[];if(s.jtdDiscriminator&&S.some(w=>w===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${v}`);let N=S.filter(w=>!(0,WD.alwaysValidSchema)(s,y[w]));return[S,N]}function m(v,y,S){let N=e.var("valid");for(let T of v)e.if((0,ES.propertyInData)(e,r,T,s.opts.ownProperties),()=>g(T,y,N),()=>w(T)),t.ok(N);function w(T){S?(e.assign(N,!1),t.error(!1,{propError:xa.Missing,missingProperty:T},{schemaPath:T})):e.assign(N,!0)}}function g(v,y,S){t.subschema({keyword:y,schemaProp:v,dataProp:v},S)}function E(){e.forIn("key",r,v=>{let y=$(v,a,"properties",s.jtdDiscriminator),S=$(v,c,"optionalProperties"),N=y===!0?S:S===!0?y:(0,Ns.and)(y,S);e.if(N,()=>{s.opts.removeAdditional?e.code((0,Ns._)`delete ${r}[${v}]`):(t.error(!1,{propError:xa.Additional,additionalProperty:v},{instancePath:v,parentSchema:!0}),s.opts.allErrors||e.break())})})}function $(v,y,S,N){let w;if(y.length>8){let T=(0,WD.schemaRefOrVal)(s,n[S],S);w=(0,Ns.not)((0,ES.isOwnProperty)(e,T,v)),N!==void 0&&(w=(0,Ns.and)(w,(0,Ns._)`${v} !== ${N}`))}else if(y.length||N!==void 0){let T=N===void 0?y:[N].concat(y);w=(0,Ns.and)(...T.map(A=>(0,Ns._)`${v} !== ${A}`))}else w=!0;return w}}yi.validateProperties=XD;yi.default=_ue});var ZD=_($S=>{"use strict";Object.defineProperty($S,"__esModule",{value:!0});var QD=SS(),vue={keyword:"optionalProperties",schemaType:"object",error:QD.error,code(t){t.parentSchema.properties||(0,QD.validateProperties)(t)}};$S.default=vue});var tL=_(bS=>{"use strict";Object.defineProperty(bS,"__esModule",{value:!0});var go=te(),Eue=Os(),Sue=La(),eL=qa(),ep=fS(),$ue={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===ep.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,eL.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,go._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,eL.typeErrorParams)(t,"object")}},bue={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:$ue,code(t){(0,Eue.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s}=t,[i,o]=(0,Sue.checkNullableObject)(t,r);e.if(o),a(),e.elseIf((0,go.not)(i)),t.error(),e.endIf(),t.ok(i);function a(){let l=e.const("tag",(0,go._)`${r}${(0,go.getProperty)(n)}`);e.if((0,go._)`${l} === undefined`),t.error(!1,{discrError:ep.DiscrError.Tag,tag:l}),e.elseIf((0,go._)`typeof ${l} == "string"`),u(l),e.else(),t.error(!1,{discrError:ep.DiscrError.Tag,tag:l},{instancePath:n}),e.endIf()}function u(l){e.if(!1);for(let f in s.mapping)e.elseIf((0,go._)`${l} === ${f}`),e.assign(i,c(f));e.else(),t.error(!1,{discrError:ep.DiscrError.Mapping,tag:l},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function c(l){let f=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:l,jtdDiscriminator:n},f),f}}};bS.default=bue});var nL=_(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});var rL=de(),tp=te(),wue=Os(),Rue=La(),Pue=qa(),Tue={keyword:"values",schemaType:"object",error:(0,Pue.typeError)("object"),code(t){(0,wue.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t,[i,o]=(0,Rue.checkNullableObject)(t,r);(0,rL.alwaysValidSchema)(s,n)?e.if((0,tp.not)((0,tp.or)(o,i)),()=>t.error()):(e.if(o),e.assign(i,a()),e.elseIf((0,tp.not)(i)),t.error(),e.endIf()),t.ok(i);function a(){let u=e.name("valid");if(s.allErrors){let l=e.let("valid",!0);return c(()=>e.assign(l,!1)),l}return e.var(u,!0),c(()=>e.break()),u;function c(l){e.forIn("key",r,f=>{t.subschema({keyword:"values",dataProp:f,dataPropType:rL.Type.Str},u),e.if((0,tp.not)(u),l)})}}}};wS.default=Tue});var sL=_(RS=>{"use strict";Object.defineProperty(RS,"__esModule",{value:!0});var Oue=Yt(),Nue={keyword:"union",schemaType:"array",trackErrors:!0,code:Oue.validateUnion,error:{message:"must match a schema in union"}};RS.default=Nue});var iL=_(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});var Iue=Qh(),Cue=gS(),Aue=BD(),kue=JD(),que=SS(),jue=ZD(),Due=tL(),Lue=nL(),xue=sL(),Mue=Os(),Fue=["definitions",Iue.default,Cue.default,Aue.default,kue.default,que.default,jue.default,Due.default,Lue.default,xue.default,Mue.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];PS.default=Fue});var lL=_(TS=>{"use strict";Object.defineProperty(TS,"__esModule",{value:!0});var Is=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},Vue=t=>({optionalProperties:Is(t)}),zue=t=>({properties:{ref:{type:"string"}},optionalProperties:Is(t)}),Hue=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:Is(t)}),Uue=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:Is(t)}),Kue=t=>({properties:{elements:{ref:"schema"}},optionalProperties:Is(t)}),aL=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...Is(t)}}),uL=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...Is(t)}}),Bue=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[aL(!1),uL(!1)]}}}},optionalProperties:Is(t)}),Gue=t=>({properties:{values:{ref:"schema"}},optionalProperties:Is(t)}),oL=t=>({metadata:{union:[Vue,zue,Hue,Uue,Kue,aL,uL,Bue,Gue].map(e=>e(t))}}),Jue={definitions:{schema:oL(!1)},...oL(!0)};TS.default=Jue});var OS=_(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.jtdForms=void 0;rp.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var fL=_(IS=>{"use strict";Object.defineProperty(IS,"__esModule",{value:!0});var NS=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Wue={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function cL(t){return NS.lastIndex=0,'"'+(NS.test(t)?t.replace(NS,e=>{let r=Wue[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}IS.default=cL;cL.code='require("ajv/dist/runtime/quote").default'});var gL=_(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0});var Yue=OS(),hL=ho(),Pe=te(),Xue=di(),at=un(),Que=Yt(),Zue=Qh(),ele=de(),tle=fL(),rle={elements:sle,values:ile,discriminator:ole,properties:dL,optionalProperties:dL,enum:hc,type:ale,ref:lle};function pL(t,e){let r=hL.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Pe.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),u={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:at.default.data},c;try{this._compilations.add(t),t.serializeName=a,o.func(a,at.default.data,!1,()=>{o.let(at.default.json,(0,Pe.str)``),pc(u),o.return(at.default.json)}),o.optimize(this.opts.code.optimize);let l=o.toString();c=`${o.scopeRefs(at.default.scope)}return ${l}`;let h=new Function(`${at.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:h}),t.serialize=h}catch(l){throw c&&this.logger.error("Error compiling serializer, function code:",c),delete t.serialize,delete t.serializeName,l}finally{this._compilations.delete(t)}return t}AS.default=pL;function pc(t){let e;for(let r of Yue.jtdForms)if(r in t.schema){e=r;break}nle(t,e?rle[e]:fle)}function nle(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);r.if((0,Pe._)`${s} === undefined || ${s} === null`,()=>r.add(at.default.json,(0,Pe._)`"null"`),()=>e(t))}function sle(t){let{gen:e,schema:r,data:n}=t;e.add(at.default.json,(0,Pe.str)`[`);let s=e.let("first",!0);e.forOf("el",n,i=>{CS(t,s),pc({...t,schema:r.elements,data:i})}),e.add(at.default.json,(0,Pe.str)`]`)}function ile(t){let{gen:e,schema:r,data:n}=t;e.add(at.default.json,(0,Pe.str)`{`);let s=e.let("first",!0);e.forIn("key",n,i=>mL(t,i,r.values,s)),e.add(at.default.json,(0,Pe.str)`}`)}function mL(t,e,r,n){let{gen:s,data:i}=t;CS(t,n),hc({...t,data:e}),s.add(at.default.json,(0,Pe.str)`:`);let o=s.const("value",(0,Pe._)`${i}${(0,Pe.getProperty)(e)}`);pc({...t,schema:r,data:o})}function ole(t){let{gen:e,schema:r,data:n}=t,{discriminator:s}=r;e.add(at.default.json,(0,Pe.str)`{${JSON.stringify(s)}:`);let i=e.const("tag",(0,Pe._)`${n}${(0,Pe.getProperty)(s)}`);hc({...t,data:i}),e.if(!1);for(let o in r.mapping){e.elseIf((0,Pe._)`${i} === ${o}`);let a=r.mapping[o];yL({...t,schema:a},s)}e.endIf(),e.add(at.default.json,(0,Pe.str)`}`)}function dL(t){let{gen:e}=t;e.add(at.default.json,(0,Pe.str)`{`),yL(t),e.add(at.default.json,(0,Pe.str)`}`)}function yL(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o}=n,a=h(i),u=h(o),c=d(a.concat(u)),l=!e,f;for(let E of a)l?l=!1:r.add(at.default.json,(0,Pe.str)`,`),m(E,i[E],p(E));l&&(f=r.let("first",!0));for(let E of u){let $=p(E);r.if((0,Pe.and)((0,Pe._)`${$} !== undefined`,(0,Que.isOwnProperty)(r,s,E)),()=>{CS(t,f),m(E,o[E],$)})}n.additionalProperties&&r.forIn("key",s,E=>r.if(g(E,c),()=>mL(t,E,{},f)));function h(E){return E?Object.keys(E):[]}function d(E){if(e&&E.push(e),new Set(E).size!==E.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return E}function p(E){return r.const("value",(0,Pe._)`${s}${(0,Pe.getProperty)(E)}`)}function m(E,$,v){r.add(at.default.json,(0,Pe.str)`${JSON.stringify(E)}:`),pc({...t,schema:$,data:v})}function g(E,$){return $.length?(0,Pe.and)(...$.map(v=>(0,Pe._)`${E} !== ${v}`)):!0}}function ale(t){let{gen:e,schema:r,data:n}=t;switch(r.type){case"boolean":e.add(at.default.json,(0,Pe._)`${n} ? "true" : "false"`);break;case"string":hc(t);break;case"timestamp":e.if((0,Pe._)`${n} instanceof Date`,()=>e.add(at.default.json,(0,Pe._)`'"' + ${n}.toISOString() + '"'`),()=>hc(t));break;default:ule(t)}}function hc({gen:t,data:e}){t.add(at.default.json,(0,Pe._)`${(0,ele.useFunc)(t,tle.default)}(${e})`)}function ule({gen:t,data:e}){t.add(at.default.json,(0,Pe._)`"" + ${e}`)}function lle(t){let{gen:e,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=t,{ref:a}=i,u=s[a];if(!u)throw new Xue.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,Zue.hasRef)(u))return pc({...t,schema:u});let{root:c}=o,l=pL.call(r,new hL.SchemaEnv({schema:u,root:c}),s);e.add(at.default.json,(0,Pe._)`${cle(e,l)}(${n})`)}function cle(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,Pe._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function fle({gen:t,data:e}){t.add(at.default.json,(0,Pe._)`JSON.stringify(${e})`)}function CS({gen:t},e){e?t.if(e,()=>t.assign(e,!1),()=>t.add(at.default.json,(0,Pe.str)`,`)):t.add(at.default.json,(0,Pe.str)`,`)}});var vL=_(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.parseJsonString=_i.parseJsonNumber=_i.parseJson=void 0;var dle=/position\s(\d+)$/;function Cs(t,e){let r;Cs.message=void 0;let n;e&&(t=t.slice(e));try{return Cs.position=e+t.length,JSON.parse(t)}catch(s){if(n=dle.exec(s.message),!n){Cs.message="unexpected end";return}r=+n[1];let i=t[r];t=t.slice(0,r),Cs.position=e+r;try{return JSON.parse(t)}catch{Cs.message=`unexpected token ${i}`;return}}}_i.parseJson=Cs;Cs.message=void 0;Cs.position=0;Cs.code='require("ajv/dist/runtime/parseJson").parseJson';function As(t,e,r){let n="",s;if(As.message=void 0,t[e]==="-"&&(n+="-",e++),t[e]==="0")n+="0",e++;else if(!i(r)){o();return}if(r)return As.position=e,+n;if(t[e]==="."&&(n+=".",e++,!i())){o();return}if(s=t[e],(s==="e"||s==="E")&&(n+="e",e++,s=t[e],(s==="+"||s==="-")&&(n+=s,e++),!i())){o();return}return As.position=e,+n;function i(a){let u=!1;for(;s=t[e],s>="0"&&s<="9"&&(a===void 0||a-- >0);)u=!0,n+=s,e++;return u}function o(){As.position=e,As.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}_i.parseJsonNumber=As;As.message=void 0;As.position=0;As.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var _L={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},hle=97,ple=48;function gi(t,e){let r="",n;for(gi.message=void 0;n=t[e++],n!=='"';)if(n==="\\")if(n=t[e],n in _L)r+=_L[n],e++;else if(n==="u"){e++;let i=4,o=0;for(;i--;){if(o<<=4,n=t[e],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-hle+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-ple;else{s(`unexpected token ${n}`);return}e++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return gi.position=e,r;function s(i){gi.position=e,gi.message=i}}_i.parseJsonString=gi;gi.message=void 0;gi.position=0;gi.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var IL=_(FS=>{"use strict";Object.defineProperty(FS,"__esModule",{value:!0});var mle=OS(),bL=ho(),X=te(),yle=di(),be=un(),gle=Yt(),_le=Qh(),vle=gS(),jS=vL(),wL=de(),Ele=yS(),Sle={elements:Rle,values:Ple,discriminator:Ole,properties:EL,optionalProperties:EL,enum:Ile,type:Nle,ref:Cle};function RL(t,e){let r=bL.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new X.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),u={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:be.default.data,parseName:a,char:o.name("c")},c;try{this._compilations.add(t),t.parseName=a,$le(u),o.optimize(this.opts.code.optimize);let l=o.toString();c=`${o.scopeRefs(be.default.scope)}return ${l}`;let h=new Function(`${be.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:h}),t.parse=h}catch(l){throw c&&this.logger.error("Error compiling parser, function code:",c),delete t.parse,delete t.parseName,l}finally{this._compilations.delete(t)}return t}FS.default=RL;var qS=(0,X._)`undefined`;function $le(t){let{gen:e,parseName:r,char:n}=t;e.func(r,(0,X._)`${be.default.json}, ${be.default.jsonPos}, ${be.default.jsonPart}`,!1,()=>{e.let(be.default.data),e.let(n),e.assign((0,X._)`${r}.message`,qS),e.assign((0,X._)`${r}.position`,qS),e.assign(be.default.jsonPos,(0,X._)`${be.default.jsonPos} || 0`),e.const(be.default.jsonLen,(0,X._)`${be.default.json}.length`),np(t),MS(t),e.if(be.default.jsonPart,()=>{e.assign((0,X._)`${r}.position`,be.default.jsonPos),e.return(be.default.data)}),e.if((0,X._)`${be.default.jsonPos} === ${be.default.jsonLen}`,()=>e.return(be.default.data)),Ma(t)})}function np(t){let e;for(let r of mle.jtdForms)if(r in t.schema){e=r;break}e?wle(t,Sle[e]):LS(t)}var ble=$L(!0,$L(!1,Ma));function wle(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);mc(t,"null",e,()=>r.assign(s,null))}function Rle(t){let{gen:e,schema:r,data:n}=t;Qn(t,"[");let s=e.let("i",0);e.assign(n,(0,X._)`[]`),DS(t,"]",()=>{let i=e.let("el");np({...t,schema:r.elements,data:i}),e.assign((0,X._)`${n}[${s}++]`,i)})}function Ple(t){let{gen:e,schema:r,data:n}=t;Qn(t,"{"),e.assign(n,(0,X._)`{}`),DS(t,"}",()=>Tle(t,r.values))}function DS(t,e,r){PL(t,e,r),Qn(t,e)}function PL(t,e,r){let{gen:n}=t;n.for((0,X._)`;${be.default.jsonPos}<${be.default.jsonLen} && ${sp(1)}!==${e};`,()=>{r(),mc(t,",",()=>n.break(),s)});function s(){mc(t,e,()=>{},Ma)}}function Tle(t,e){let{gen:r}=t,n=r.let("key");_o({...t,data:n}),Qn(t,":"),OL(t,n,e)}function Ole(t){let{gen:e,data:r,schema:n}=t,{discriminator:s,mapping:i}=n;Qn(t,"{"),e.assign(r,(0,X._)`{}`);let o=e.const("pos",be.default.jsonPos),a=e.let("value"),u=e.let("tag");PL(t,"}",()=>{let c=e.let("key");_o({...t,data:c}),Qn(t,":"),e.if((0,X._)`${c} === ${s}`,()=>{_o({...t,data:u}),e.assign((0,X._)`${r}[${c}]`,u),e.break()},()=>LS({...t,data:a}))}),e.assign(be.default.jsonPos,o),e.if((0,X._)`${u} === undefined`),ks(t,(0,X.str)`discriminator tag not found`);for(let c in i)e.elseIf((0,X._)`${u} === ${c}`),TL({...t,schema:i[c]},s);e.else(),ks(t,(0,X.str)`discriminator value not in schema`),e.endIf()}function EL(t){let{gen:e,data:r}=t;Qn(t,"{"),e.assign(r,(0,X._)`{}`),TL(t)}function TL(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(DS(t,"}",()=>{let u=r.let("key");if(_o({...t,data:u}),Qn(t,":"),r.if(!1),SL(t,u,i),SL(t,u,o),e){r.elseIf((0,X._)`${u} === ${e}`);let c=r.let("tag");_o({...t,data:c})}r.else(),a?LS({...t,data:(0,X._)`${s}[${u}]`}):ks(t,(0,X.str)`property ${u} not allowed`),r.endIf()}),i){let u=(0,gle.hasPropFunc)(r),c=(0,X.and)(...Object.keys(i).map(l=>(0,X._)`${u}.call(${s}, ${l})`));r.if((0,X.not)(c),()=>ks(t,(0,X.str)`missing required properties`))}}function SL(t,e,r={}){let{gen:n}=t;for(let s in r)n.elseIf((0,X._)`${e} === ${s}`),OL(t,e,r[s])}function OL(t,e,r){np({...t,schema:r,data:(0,X._)`${t.data}[${e}]`})}function Nle(t){let{gen:e,schema:r,data:n,self:s}=t;switch(r.type){case"boolean":ble(t);break;case"string":_o(t);break;case"timestamp":{_o(t);let i=(0,wL.useFunc)(e,Ele.default),{allowDate:o,parseDate:a}=s.opts,u=o?(0,X._)`!${i}(${n}, true)`:(0,X._)`!${i}(${n})`,c=a?(0,X.or)(u,(0,X._)`(${n} = new Date(${n}), false)`,(0,X._)`isNaN(${n}.valueOf())`):u;e.if(c,()=>ks(t,(0,X.str)`invalid timestamp`));break}case"float32":case"float64":kS(t);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))kS(t,16),i==="uint32"&&e.if((0,X._)`${n} < 0`,()=>ks(t,(0,X.str)`integer out of range`));else{let[o,a,u]=vle.intRange[i];kS(t,u),e.if((0,X._)`${n} < ${o} || ${n} > ${a}`,()=>ks(t,(0,X.str)`integer out of range`))}}}}function _o(t){Qn(t,'"'),xS(t,jS.parseJsonString)}function Ile(t){let{gen:e,data:r,schema:n}=t,s=n.enum;Qn(t,'"'),e.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);e.elseIf((0,X._)`${sp(o.length)} === ${o}`),e.assign(r,(0,X.str)`${i}`),e.add(be.default.jsonPos,o.length)}e.else(),Ma(t),e.endIf()}function kS(t,e){let{gen:r}=t;MS(t),r.if((0,X._)`"-0123456789".indexOf(${sp(1)}) < 0`,()=>Ma(t),()=>xS(t,jS.parseJsonNumber,e))}function $L(t,e){return r=>{let{gen:n,data:s}=r;mc(r,`${t}`,()=>e(r),()=>n.assign(s,t))}}function Cle(t){let{gen:e,self:r,definitions:n,schema:s,schemaEnv:i}=t,{ref:o}=s,a=n[o];if(!a)throw new yle.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,_le.hasRef)(a))return np({...t,schema:a});let{root:u}=i,c=RL.call(r,new bL.SchemaEnv({schema:a,root:u}),n);NL(t,Ale(e,c),!0)}function Ale(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,X._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function LS(t){xS(t,jS.parseJson)}function xS(t,e,r){NL(t,(0,wL.useFunc)(t.gen,e),r)}function NL(t,e,r){let{gen:n,data:s}=t;n.assign(s,(0,X._)`${e}(${be.default.json}, ${be.default.jsonPos}${r?(0,X._)`, ${r}`:X.nil})`),n.assign(be.default.jsonPos,(0,X._)`${e}.position`),n.if((0,X._)`${s} === undefined`,()=>ks(t,(0,X._)`${e}.message`))}function Qn(t,e){mc(t,e,Ma)}function mc(t,e,r,n){let{gen:s}=t,i=e.length;MS(t),s.if((0,X._)`${sp(i)} === ${e}`,()=>{s.add(be.default.jsonPos,i),n?.(t)},()=>r(t))}function MS({gen:t,char:e}){t.code((0,X._)`while((${e}=${be.default.json}[${be.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${be.default.jsonPos}++;`)}function sp(t){return t===1?(0,X._)`${be.default.json}[${be.default.jsonPos}]`:(0,X._)`${be.default.json}.slice(${be.default.jsonPos}, ${be.default.jsonPos}+${t})`}function Ma(t){ks(t,(0,X._)`"unexpected token " + ${be.default.json}[${be.default.jsonPos}]`)}function ks({gen:t,parseName:e},r){t.assign((0,X._)`${e}.message`,r),t.assign((0,X._)`${e}.position`,be.default.jsonPos),t.return(qS)}});var zS=_((St,CL)=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.MissingRefError=St.ValidationError=St.CodeGen=St.Name=St.nil=St.stringify=St.str=St._=St.KeywordCxt=void 0;var kle=bE(),qle=iL(),jle=lL(),Dle=gL(),Lle=IL(),VS="JTD-meta-schema",ip=class extends kle.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(qle.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(jle.default,VS,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(VS)?VS:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if(Dle.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(Lle.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};CL.exports=St=ip;Object.defineProperty(St,"__esModule",{value:!0});St.default=ip;var xle=Ta();Object.defineProperty(St,"KeywordCxt",{enumerable:!0,get:function(){return xle.KeywordCxt}});var Fa=te();Object.defineProperty(St,"_",{enumerable:!0,get:function(){return Fa._}});Object.defineProperty(St,"str",{enumerable:!0,get:function(){return Fa.str}});Object.defineProperty(St,"stringify",{enumerable:!0,get:function(){return Fa.stringify}});Object.defineProperty(St,"nil",{enumerable:!0,get:function(){return Fa.nil}});Object.defineProperty(St,"Name",{enumerable:!0,get:function(){return Fa.Name}});Object.defineProperty(St,"CodeGen",{enumerable:!0,get:function(){return Fa.CodeGen}});var Mle=Yl();Object.defineProperty(St,"ValidationError",{enumerable:!0,get:function(){return Mle.default}});var Fle=di();Object.defineProperty(St,"MissingRefError",{enumerable:!0,get:function(){return Fle.default}})});var HS=_((ove,AL)=>{"use strict";var Vle=Dg();AL.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:Vle,addUsedSchema:!1,allErrors:!1})});var jL=_((ave,qL)=>{"use strict";var zle=jD().default,Hle=zS(),kL=HS(),US=class{constructor(e,r){r.mode==="JTD"?this.ajv=new Hle(Object.assign({},kL,r.customOptions)):this.ajv=new zle(Object.assign({},kL,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&E_()(this.ajv);let s=Object.values(e);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:e}){if(e.$id){let r=this.ajv.getSchema(e.$id);if(r)return r}return this.ajv.compile(e)}};qL.exports=US});var LL=_((uve,DL)=>{"use strict";var Ule=zS(),Kle=HS(),KS=class{constructor(e,r){this.ajv=new Ule(Object.assign({},Kle,r))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}};DL.exports=KS});var FL=_((gc,ML)=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var yc=Rh(),qn=Ea();function xL(t,e){if(!t.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=t.scope.opts;return typeof e=="function"?s(e.source):e!==void 0?i(e,n):i(t.schemas,a=>a.meta?void 0:t.compile(a.schema));function n(a){let u=t.getSchema(a);if(!u)throw new Error(`moduleCode: no schema with id ${a}`);return u}function s(a){let u={},c=a?.validateName,l=o(u,a);return t.opts.code.esm?`"use strict";${r}export const validate = ${c};${r}export default ${c};${r}${l}`:`"use strict";${r}module.exports = ${c};${r}module.exports.default = ${c};${r}${l}`}function i(a,u){var c;let l={},f=(0,qn._)`"use strict";`;for(let h in a){let d=u(a[h]);if(d){let p=o(l,d.source),m=t.opts.code.esm?(0,qn._)`export const ${(0,qn.getEsmExportName)(h)}`:(0,qn._)`exports${(0,qn.getProperty)(h)}`;f=(0,qn._)`${f}${r}${m} = ${(c=d.source)===null||c===void 0?void 0:c.validateName};${r}${p}`}}return`${f}`}function o(a,u){if(!u)throw new Error('moduleCode: function does not have "source" property');if(h(u.validateName)===yc.UsedValueState.Completed)return qn.nil;d(u.validateName,yc.UsedValueState.Started);let c=t.scope.scopeCode(u.scopeValues,a,f),l=new qn._Code(`${c}${r}${u.validateCode}`);return u.evaluated?(0,qn._)`${l}${u.validateName}.evaluated = ${u.evaluated};${r}`:l;function f(p){var m;let g=(m=p.value)===null||m===void 0?void 0:m.ref;if(p.prefix==="validate"&&typeof g=="function")return o(a,g.source);if((p.prefix==="root"||p.prefix==="wrapper")&&typeof g=="object"){let{validate:E,validateName:$}=g;if(!$)throw new Error("ajv internal error");let v=t.opts.code.es5?yc.varKinds.var:yc.varKinds.const,y=(0,qn._)`${v} ${p} = {validate: ${$}};`;if(h($)===yc.UsedValueState.Started)return y;let S=o(a,E?.source);return(0,qn._)`${y}${r}${S}`}}function h(p){var m;return(m=a[p.prefix])===null||m===void 0?void 0:m.get(p)}function d(p,m){let{prefix:g}=p;(a[g]=a[g]||new Map).set(p,m)}}}ML.exports=gc=xL;Object.defineProperty(gc,"__esModule",{value:!0});gc.default=xL});var HL=_((lve,zL)=>{"use strict";var VL=BS(),Ble=FL().default;function Gle(t={readMode:!0}){if(t.readMode===!0&&!t.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(t.readMode!==!0&&!t.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=VL();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=e(n,s);return function(o){let a=i(o),u=Ble(i[VL.AjvReference].ajv,a);return t.storeFunction(o,u),a}}}zL.exports=Gle});var BS=_((cve,Va)=>{"use strict";var KL=Symbol.for("fastify.ajv-compiler.reference"),Jle=jL(),Wle=LL();function GS(t){let e=new Map,r=new Map;return t&&t.jtdSerializer===!0?function(s,i){let o=UL({},i);if(r.has(o))return r.get(o);let a=new Wle(s,i),u=a.buildSerializerFunction.bind(a);return r.set(o,u),u}:function(s,i){let o=UL(s,i.customOptions);if(e.has(o))return e.get(o);let a=new Jle(s,i),u=a.buildValidatorFunction.bind(a);return e.set(o,u),i.customOptions.code!==void 0&&(u[KL]=a),u}}function UL(t,e){let r=JSON.stringify(t),n=JSON.stringify(e);return`${r}${n}`}Va.exports=GS;Va.exports.default=GS;Va.exports.AjvCompiler=GS;Va.exports.AjvReference=KL;Va.exports.StandaloneValidator=HL()});var JS=_((fve,BL)=>{"use strict";var{buildSchemas:Yle}=cu(),Xle=kv(),Qle=BS();function Zle(t,e){if(t)return new za(t,e);let r=Object.assign({buildValidator:null,buildSerializer:null},e?.compilersFactory);r.buildValidator||(r.buildValidator=Qle()),r.buildSerializer||(r.buildSerializer=Xle());let n={bucket:e&&e.bucket||Yle,compilersFactory:r,isCustomValidatorCompiler:typeof e?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof e?.compilersFactory?.buildValidator=="function"};return new za(void 0,n)}var za=class{constructor(e,r){this.opts=r||e?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.isCustomValidatorCompiler=e.isCustomValidatorCompiler,this.isCustomSerializerCompiler=e.isCustomSerializerCompiler,this.parent=e):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>e}),this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>e}),this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};za.buildSchemaController=Zle;BL.exports=za});var e$=_((dve,ZS)=>{"use strict";var WS=tv(),XS=require("node:assert"),QS=Symbol.for("registered-plugin"),{kTestInternals:ece}=Mt(),{exist:tce,existReply:rce,existRequest:nce}=fv(),{FST_ERR_PLUGIN_VERSION_MISMATCH:sce,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:ice}=rr(),{FSTWRN002:oce}=ls();function _c(t){return t[Symbol.for("plugin-meta")]}function GL(t){let e=JL(t);if(e)return e;let r=require.cache;if(r){let n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===t)return i}}return t.name?t.name:null}function ace(t){return t.toString().split(`
`).slice(0,2).map(e=>e.trim()).join(" -- ")}function JL(t){return t[Symbol.for("fastify.display-name")]}function WL(t){return!!t[Symbol.for("skip-override")]}function YL(t){let e=_c(t);if(!e)return;let r=e.dependencies;r&&(XS(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{XS(this[QS].indexOf(n)>-1,`The dependency '${n}' of plugin '${e.name}' is not registered`)}))}function XL(t){let e=_c(t);if(!e)return;let{decorators:r,name:n}=e;r&&(r.fastify&&YS(this,"Fastify",r.fastify,n),r.reply&&YS(this,"Reply",r.reply,n),r.request&&YS(this,"Request",r.request,n))}var uce={Fastify:tce,Request:nce,Reply:rce};function YS(t,e,r,n){XS(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!uce[e].call(t,s))throw new ice(s,i,e)})}function lce(t){let e=_c(t);if(!e)return;let r=e.fastify,n=/-rc.+$/.test(this.version);if(!(n===!0&&WS.gt(this.version,WS.coerce(r))===!0)&&r&&WS.satisfies(this.version,r,{includePrerelease:n})===!1)throw new sce(e.name,r,this.version)}function cce(t){let e=_c(t);if(!e)return;let r=e.name;if(r)return this[QS].push(r),r}function fce(t,e){t.constructor.name==="AsyncFunction"&&t.length===3&&oce(e||"anonymous")}function dce(t){let e=cce.call(this,t)||GL(t);return fce.call(this,t,e),lce.call(this,t),XL.call(this,t),YL.call(this,t),WL(t)}ZS.exports={getPluginName:GL,getFuncPreview:ace,kRegisteredPlugins:QS,getDisplayName:JL,registerPlugin:dce};ZS.exports[ece]={shouldSkipOverride:WL,getMeta:_c,checkDecorators:XL,checkDependencies:YL}});var op=_((hve,QL)=>{"use strict";function hce(t,e){let r=e||mce();return t?yce(t,r):r}function pce(t,e){return t.genReqId(e)}function mce(){let e=0;return function(){return e=e+1&2147483647,`req-${e.toString(36)}`}}function yce(t,e){return function(r){return r.headers[t]||e(r)}}QL.exports={getGenReqId:pce,reqIdGenFactory:hce}});var rx=_((pve,tx)=>{"use strict";var ZL=12,gce=0,t$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function _ce(t){var e=t.indexOf("%");if(e===-1)return t;for(var r=t.length,n="",s=0,i=0,o=e,a=ZL;e>-1&&e<r;){var u=ex(t[e+1],4),c=ex(t[e+2],0),l=u|c,f=t$[l];if(a=t$[256+a+f],i=i<<6|l&t$[364+f],a===ZL)n+=t.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=e+3,e=o=t.indexOf("%",s);else{if(a===gce)return null;if(e+=3,e<r&&t.charCodeAt(e)===37)continue;return null}}return n+t.slice(s)}var vce={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function ex(t,e){var r=vce[t];return r===void 0?255:r<<e}tx.exports=_ce});var ax=_((mve,ox)=>{"use strict";var nx=rx(),sx=/\+/g,ix=function(){};ix.prototype=Object.create(null);function Ece(t){let e=new ix;if(typeof t!="string")return e;let r=t.length,n="",s="",i=-1,o=-1,a=!1,u=!1,c=!1,l=!1,f=!1,h=0;for(let d=0;d<r+1;d++)if(h=d!==r?t.charCodeAt(d):38,h===38){if(f=o>i,f||(o=d),n=t.slice(i+1,o),f||n.length>0){c&&(n=n.replace(sx," ")),a&&(n=nx(n)||n),f&&(s=t.slice(o+1,d),l&&(s=s.replace(sx," ")),u&&(s=nx(s)||s));let p=e[n];p===void 0?e[n]=s:p.pop?p.push(s):e[n]=[p,s]}s="",i=d,o=d,a=!1,u=!1,c=!1,l=!1}else h===61?o<=i?o=d:u=!0:h===43?o>i?l=!0:c=!0:h===37&&(o>i?u=!0:a=!0);return e}ox.exports=Ece});var lx=_((yve,ux)=>{var Zn=Array.from({length:256},(t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase()),Sce=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function $ce(t){let e=t.length;if(e===0)return"";let r="",n=0,s=0;e:for(;s<e;s++){let i=t.charCodeAt(s);for(;i<128;){if(Sce[i]!==1&&(n<s&&(r+=t.slice(n,s)),n=s+1,r+=Zn[i]),++s===e)break e;i=t.charCodeAt(s)}if(n<s&&(r+=t.slice(n,s)),i<2048){n=s+1,r+=Zn[192|i>>6]+Zn[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=Zn[224|i>>12]+Zn[128|i>>6&63]+Zn[128|i&63];continue}if(++s,s>=e)throw new Error("URI malformed");let o=t.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=Zn[240|i>>18]+Zn[128|i>>12&63]+Zn[128|i>>6&63]+Zn[128|i&63]}return n===0?t:n<e?r+t.slice(n):r}ux.exports={encodeString:$ce}});var dx=_((gve,fx)=>{"use strict";var{encodeString:r$}=lx();function cx(t){let e=typeof t;return e==="string"?r$(t):e==="bigint"?t.toString():e==="boolean"?t?"true":"false":e==="number"&&Number.isFinite(t)?t<1e21?""+t:r$(""+t):""}function bce(t){let e="";if(t===null||typeof t!="object")return e;let r="&",n=Object.keys(t),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],u=t[a],c=r$(a)+"=";if(o&&(e+=r),Array.isArray(u)){i=u.length;for(let l=0;l<i;l++)l&&(e+=r),e+=c,e+=cx(u[l])}else e+=c,e+=cx(u)}return e}fx.exports=bce});var yx=_((_ve,vc)=>{"use strict";var hx=ax(),px=dx(),mx={parse:hx,stringify:px};vc.exports=mx;vc.exports.default=mx;vc.exports.parse=hx;vc.exports.stringify=px});var Ec=_((vve,gx)=>{gx.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}});var s$=_(vi=>{var Ge=Ec(),n$=()=>[{type:Ge.RANGE,from:48,to:57}],_x=()=>[{type:Ge.CHAR,value:95},{type:Ge.RANGE,from:97,to:122},{type:Ge.RANGE,from:65,to:90}].concat(n$()),vx=()=>[{type:Ge.CHAR,value:9},{type:Ge.CHAR,value:10},{type:Ge.CHAR,value:11},{type:Ge.CHAR,value:12},{type:Ge.CHAR,value:13},{type:Ge.CHAR,value:32},{type:Ge.CHAR,value:160},{type:Ge.CHAR,value:5760},{type:Ge.RANGE,from:8192,to:8202},{type:Ge.CHAR,value:8232},{type:Ge.CHAR,value:8233},{type:Ge.CHAR,value:8239},{type:Ge.CHAR,value:8287},{type:Ge.CHAR,value:12288},{type:Ge.CHAR,value:65279}],wce=()=>[{type:Ge.CHAR,value:10},{type:Ge.CHAR,value:13},{type:Ge.CHAR,value:8232},{type:Ge.CHAR,value:8233}];vi.words=()=>({type:Ge.SET,set:_x(),not:!1});vi.notWords=()=>({type:Ge.SET,set:_x(),not:!0});vi.ints=()=>({type:Ge.SET,set:n$(),not:!1});vi.notInts=()=>({type:Ge.SET,set:n$(),not:!0});vi.whitespace=()=>({type:Ge.SET,set:vx(),not:!1});vi.notWhitespace=()=>({type:Ge.SET,set:vx(),not:!0});vi.anyChar=()=>({type:Ge.SET,set:wce(),not:!0})});var Sx=_(Sc=>{var Ex=Ec(),Ha=s$(),Rce="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",Pce={0:0,t:9,n:10,v:11,f:12,r:13};Sc.strToChars=function(t){var e=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return t=t.replace(e,function(r,n,s,i,o,a,u,c){if(s)return r;var l=n?8:i?parseInt(i,16):o?parseInt(o,16):a?parseInt(a,8):u?Rce.indexOf(u):Pce[c],f=String.fromCharCode(l);return/[[\]{}^$.|?*+()]/.test(f)&&(f="\\"+f),f}),t};Sc.tokenizeClass=(t,e)=>{for(var r=[],n=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g,s,i;(s=n.exec(t))!=null;)if(s[1])r.push(Ha.words());else if(s[2])r.push(Ha.ints());else if(s[3])r.push(Ha.whitespace());else if(s[4])r.push(Ha.notWords());else if(s[5])r.push(Ha.notInts());else if(s[6])r.push(Ha.notWhitespace());else if(s[7])r.push({type:Ex.RANGE,from:(s[8]||s[9]).charCodeAt(0),to:s[10].charCodeAt(0)});else if(i=s[12])r.push({type:Ex.CHAR,value:i.charCodeAt(0)});else return[r,n.lastIndex];Sc.error(e,"Unterminated character class")};Sc.error=(t,e)=>{throw new SyntaxError("Invalid regular expression: /"+t+"/: "+e)}});var $x=_($c=>{var ap=Ec();$c.wordBoundary=()=>({type:ap.POSITION,value:"b"});$c.nonWordBoundary=()=>({type:ap.POSITION,value:"B"});$c.begin=()=>({type:ap.POSITION,value:"^"});$c.end=()=>({type:ap.POSITION,value:"$"})});var bx=_((bve,i$)=>{var Ua=Sx(),fn=Ec(),vo=s$(),up=$x();i$.exports=t=>{var e=0,r,n,s={type:fn.ROOT,stack:[]},i=s,o=s.stack,a=[],u=E=>{Ua.error(t,`Nothing to repeat at column ${E-1}`)},c=Ua.strToChars(t);for(r=c.length;e<r;)switch(n=c[e++],n){case"\\":switch(n=c[e++],n){case"b":o.push(up.wordBoundary());break;case"B":o.push(up.nonWordBoundary());break;case"w":o.push(vo.words());break;case"W":o.push(vo.notWords());break;case"d":o.push(vo.ints());break;case"D":o.push(vo.notInts());break;case"s":o.push(vo.whitespace());break;case"S":o.push(vo.notWhitespace());break;default:/\d/.test(n)?o.push({type:fn.REFERENCE,value:parseInt(n,10)}):o.push({type:fn.CHAR,value:n.charCodeAt(0)})}break;case"^":o.push(up.begin());break;case"$":o.push(up.end());break;case"[":var l;c[e]==="^"?(l=!0,e++):l=!1;var f=Ua.tokenizeClass(c.slice(e),t);e+=f[1],o.push({type:fn.SET,set:f[0],not:l});break;case".":o.push(vo.anyChar());break;case"(":var h={type:fn.GROUP,stack:[],remember:!0};n=c[e],n==="?"&&(n=c[e+1],e+=2,n==="="?h.followedBy=!0:n==="!"?h.notFollowedBy=!0:n!==":"&&Ua.error(t,`Invalid group, character '${n}' after '?' at column ${e-1}`),h.remember=!1),o.push(h),a.push(i),i=h,o=h.stack;break;case")":a.length===0&&Ua.error(t,`Unmatched ) at column ${e-1}`),i=a.pop(),o=i.options?i.options[i.options.length-1]:i.stack;break;case"|":i.options||(i.options=[i.stack],delete i.stack);var d=[];i.options.push(d),o=d;break;case"{":var p=/^(\d+)(,(\d+)?)?\}/.exec(c.slice(e)),m,g;p!==null?(o.length===0&&u(e),m=parseInt(p[1],10),g=p[2]?p[3]?parseInt(p[3],10):1/0:m,e+=p[0].length,o.push({type:fn.REPETITION,min:m,max:g,value:o.pop()})):o.push({type:fn.CHAR,value:123});break;case"?":o.length===0&&u(e),o.push({type:fn.REPETITION,min:0,max:1,value:o.pop()});break;case"+":o.length===0&&u(e),o.push({type:fn.REPETITION,min:1,max:1/0,value:o.pop()});break;case"*":o.length===0&&u(e),o.push({type:fn.REPETITION,min:0,max:1/0,value:o.pop()});break;default:o.push({type:fn.CHAR,value:n.charCodeAt(0)})}return a.length!==0&&Ua.error(t,"Unterminated group"),s};i$.exports.types=fn});var Px=_((wve,Rx)=>{"use strict";var wx=bx(),Tce=wx.types;Rx.exports=function(t,e){e||(e={});var r=e.limit===void 0?25:e.limit;Oce(t)?t=t.source:typeof t!="string"&&(t=String(t));try{t=wx(t)}catch{return!1}var n=0;return function s(i,o){var a,u,c;if(i.type===Tce.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,c=i.options.length;a<c;a++)if(u=s({stack:i.options[a]},o),!u)return!1}var l=i.stack||i.value&&i.value.stack;if(!l)return!0;for(a=0;a<l.length;a++)if(u=s(l[a],o),!u)return!1;return!0}(t,0)};function Oce(t){return{}.toString.call(t)==="[object RegExp]"}});var lp=_((Rve,Tx)=>{"use strict";Tx.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let t={};return{get:e=>t[e]||null,set:(e,r)=>{t[e]=r}}},deriveConstraint:t=>t.method,mustMatchWhenDerived:!0}});var qx=_((Pve,kx)=>{"use strict";var Ox=Yr(),Nx=lp(),Ix=Symbol("treeData");function Cx(t,e=""){let r="",n=Object.keys(t);for(let s=0;s<n.length;s++){let i=n[s],o=t[i],a=s===n.length-1,u=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",c=a?"    ":"\u2502   ",f=(o[Ix]||"").split(`
`).join(`
`+e+c);r+=e+u+i+f+`
`,r+=Cx(o,e+c)}return r}function Nce(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}function Ax(t){return Array.isArray(t)?t.map(e=>Ax(e)):typeof t=="symbol"?t.toString():typeof t=="function"?Nce(t):t}function Ice(t,e){if(!e.includeMeta)return{};let r=e.buildPrettyMeta(t),n={},s=e.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let u=JSON.stringify(Ax(a));n[o]=u}}return n}function Cce(t){let e="";for(let[r,n]of Object.entries(t))e+=`
\u2022 (${r}) ${n}`;return e}function Ace(t){let e={...t.opts.constraints},r=e[Nx.name];return delete e[Nx.name],{...t,method:r,opts:{constraints:e}}}function kce(t){let e=` (${t.method})`,r=t.opts.constraints||{};return Object.keys(r).length!==0&&(e+=" "+JSON.stringify(r)),e+=Cce(t.metaData),e}function qce(t){return t.reduce((e,r)=>{for(let n of e)if(Ox(r.opts.constraints,n.opts.constraints)&&Ox(r.metaData,n.metaData))return n.method+=", "+r.method,e;return e.push(r),e},[])}function jce(t,e,r){let n=t.routes;return r.method===void 0&&(n=n.map(Ace)),n=n.map(s=>(s.metaData=Ice(s,r),s)),r.method===void 0&&(n=qce(n)),n.map(kce).join(`
${e}`)}function cp(t,e,r,n){if((t.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",e=e[r]={},t.isLeafNode&&(e[Ix]=jce(t,r,n)),r=""),t.staticChildren)for(let s of Object.values(t.staticChildren))cp(s,e,r+s.prefix,n);if(t.parametricChildren)for(let s of Object.values(t.parametricChildren)){let i=Array.from(s.nodePaths).join("|");cp(s,e,r+i,n)}t.wildcardChild&&cp(t.wildcardChild,e,"*",n)}function Dce(t,e){let r={};return cp(t,r,t.prefix,e),Cx(r)}kx.exports={prettyPrintTree:Dce}});var Dx=_((Tve,jx)=>{"use strict";var Lce=lp(),o$=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return e===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let u of o)this.constraints.includes(u)||(u==="version"?this.constraints.unshift(u):this.constraints.push(u));let a=o.includes(Lce.name);if(!a&&this.handlers.length>=32)throw new Error("find-my-way supports a maximum of 32 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((u,c)=>Object.keys(u.constraints).length-Object.keys(c.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,s)}_compileCreateParamsObject(e){let r=[];for(let n=0;n<e.length;n++)r.push(`'${e[n]}': paramsArray[${n}]`);return new Function("paramsArray",`return {${r.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=e.get(i)||0;o|=1<<n,e.set(i,o)}}}_constrainedIndexBitmask(e){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[e]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(let n of this.constraints){let s=e.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=e.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in e.strategies)e.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};jx.exports=o$});var xx=_((Ove,Lx)=>{"use strict";var xce=Dx(),yp={STATIC:0,PARAMETRIC:1,WILDCARD:2},fp=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new xce),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(r,e)}},dp=class extends fp{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,r){let n=this.staticChildren[e.charAt(r)];return n===void 0||!n.matchPrefix(e,r)?null:n}getStaticChild(e,r=0){if(e.length===r)return this;let n=this.findStaticMatchingChild(e,r);return n?n.getStaticChild(e,r+n.prefix.length):null}createStaticChild(e){if(e.length===0)return this;let r=this.staticChildren[e.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(e.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(e.slice(s))}let n=e.charAt(0);return this.staticChildren[n]=new hp(e),this.staticChildren[n]}},hp=class t extends dp{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=yp.STATIC,this._compilePrefixMatch()}getParametricChild(e){let r=e&&e.source,n=this.parametricChildren.find(s=>(s.regex&&s.regex.source)===r);return n||null}createParametricChild(e,r,n){let s=this.getParametricChild(e);return s?(s.nodePaths.add(n),s):(s=new pp(e,r,n),this.parametricChildren.push(s),this.parametricChildren.sort((i,o)=>i.isRegex?o.isRegex?i.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(i.staticSuffix)?1:i.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),s)}getWildcardChild(){return this.wildcardChild?this.wildcardChild:null}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new mp,this.wildcardChild}split(e,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new t(n);return i.staticChildren[s.charAt(0)]=this,e.staticChildren[n.charAt(0)]=i,i}getNextNode(e,r,n,s){let i=this.findStaticMatchingChild(e,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let e=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);e.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${e.join(" && ")}`)}},pp=class extends dp{constructor(e,r,n){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=r||null,this.kind=yp.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(e,r){return this.findStaticMatchingChild(e,r)}},mp=class extends fp{constructor(){super(),this.kind=yp.WILDCARD}getNextNode(){return null}};Lx.exports={StaticNode:hp,ParametricNode:pp,WildcardNode:mp,NODE_TYPES:yp}});var Fx=_((Nve,Mx)=>{"use strict";var Mce=require("assert");function bc(){if(!(this instanceof bc))return new bc;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}bc.prototype.set=function(t,e){if(typeof t!="string")throw new TypeError("Version should be a string");let[r,n,s]=t.split(".");return r=Number(r)||0,n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=e,this.store["*"]=e,this.store["x.x"]=e,this.store["x.x.x"]=e),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=e,this.store[`${r}.x.x`]=e),s>=(this.store[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store[`${r}.${n}.x`]=e),this.store[`${r}.${n}.${s}`]=e,this};bc.prototype.get=function(t){return this.store[t]};Mx.exports={name:"version",mustMatchWhenDerived:!0,storage:bc,validate(t){Mce(typeof t=="string","Version should be a string")}}});var zx=_((Ive,Vx)=>{"use strict";var Fce=require("assert");function Vce(){let t={},e=[];return{get:r=>{let n=t[r];if(n)return n;for(let s of e)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?e.push({host:r,value:n}):t[r]=n}}}Vx.exports={name:"host",mustMatchWhenDerived:!1,storage:Vce,validate(t){Fce(typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]","Host should be a string or a RegExp")}}});var Ux=_((Cve,Hx)=>{"use strict";var zce=Fx(),Hce=zx(),a$=require("assert"),u$=class{constructor(e){if(this.strategies={version:zce,host:Hce},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(let r of Object.values(e))this.addConstraintStrategy(r)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let r=this.strategies[e];return r!==void 0?r.isCustom||this.isStrategyUsed(e):!1}addConstraintStrategy(e){if(a$(typeof e.name=="string"&&e.name!=="","strategy.name is required."),a$(e.storage&&typeof e.storage=="function","strategy.storage function is required."),a$(e.deriveConstraint&&typeof e.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw new Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=e.deriveConstraint.length===3,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,r,n){let s=this.deriveSyncConstraints(e,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,e,r,n)}deriveSyncConstraints(e,r){}noteUsage(e){if(e){let r=this.strategiesInUse.size;for(let n in e)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw new Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let r in e){let n=e[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(e,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,e);return}e=e||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(u,c)=>{if(u!==null){s(u);return}e[o]=c,--i===0&&s(null,e)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let e=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];if(n.isCustom)e.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`);else if(r==="version")e.push("   version: req.headers['accept-version'],");else if(r==="host")e.push("   host: req.headers.host || req.headers[':authority'],");else throw new Error("unknown non-custom strategy for compiling constraint derivation function")}e.push("}"),this.deriveSyncConstraints=new Function("req","ctx",e.join(`
`)).bind(this)}};Hx.exports=u$});var Bx=_((Ave,Kx)=>{"use strict";var Uce=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];Kx.exports=Uce});var Wx=_((kve,Jx)=>{"use strict";function Gx(t,e){return t===50?e===53?"%":e===51?"#":e===52?"$":e===54?"&":e===66||e===98?"+":e===67||e===99?",":e===70||e===102?"/":null:t===51?e===65||e===97?":":e===66||e===98?";":e===68||e===100?"=":e===70||e===102?"?":null:t===52&&e===48?"@":null}function Kce(t,e){let r=!1,n=!1,s="";for(let o=1;o<t.length;o++){let a=t.charCodeAt(o);if(a===37){let u=t.charCodeAt(o+1),c=t.charCodeAt(o+2);Gx(u,c)===null?r=!0:(n=!0,u===50&&c===53&&(r=!0,t=t.slice(0,o+1)+"25"+t.slice(o+1),o+=2),o+=2)}else if(a===63||a===35||a===59&&e){s=t.slice(o+1),t=t.slice(0,o);break}}return{path:r?decodeURI(t):t,querystring:s,shouldDecodeParam:n}}function Bce(t){let e=t.indexOf("%");if(e===-1)return t;let r="",n=e;for(let s=e;s<t.length;s++)if(t.charCodeAt(s)===37){let i=t.charCodeAt(s+1),o=t.charCodeAt(s+2),a=Gx(i,o);r+=t.slice(n,s)+a,n=s+3}return t.slice(0,e)+r+t.slice(n)}Jx.exports={safeDecodeURI:Kce,safeDecodeURIComponent:Bce}});var p$=_((qve,rM)=>{"use strict";var It=require("assert"),Gce=yx(),gp=Px(),f$=Yr(),{prettyPrintTree:Jce}=qx(),{StaticNode:Yx,NODE_TYPES:l$}=xx(),Wce=Ux(),Ka=Bx(),c$=lp(),{safeDecodeURI:Yce,safeDecodeURIComponent:Xx}=Wx(),Qx=/^https?:\/\/.*?\//,Eo=/(\/:[^/()]*?)\?(\/?)/;if(!gp(Qx))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!gp(Eo))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function $t(t){if(!(this instanceof $t))return new $t(t);t=t||{},this._opts=t,t.defaultRoute?(It(typeof t.defaultRoute=="function","The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(It(typeof t.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(It(typeof t.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=Xce,t.querystringParser?(It(typeof t.querystringParser=="function","querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=e=>e===""?{}:Gce.parse(e),this.caseSensitive=t.caseSensitive===void 0?!0:t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.constrainer=new Wce(t.constraints),this.useSemicolonDelimiter=t.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}$t.prototype.on=function(e,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),It(typeof r=="string","Path should be a string"),It(r.length>0,"The path could not be empty"),It(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),It(typeof s=="function","Handler should be a function");let o=r.match(Eo);if(o){It(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let c=r.replace(Eo,"$1$2"),l=r.replace(Eo,"$2");this.on(e,c,n,s,i),this.on(e,l,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=d$(r)),this.ignoreTrailingSlash&&(r=h$(r));let u=Array.isArray(e)?e:[e];for(let c of u)It(typeof c=="string","Method should be a string"),It(Ka.includes(c),`Method '${c}' is not an http method.`),this._on(c,r,n,s,i,a)};$t.prototype._on=function(e,r,n,s,i){let o={};n.constraints!==void 0&&(It(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[e]===void 0&&(this.trees[e]=new Yx("/"));let a=r;if(a==="*"&&this.trees[e].prefix.length!==0){let h=this.trees[e];this.trees[e]=new Yx(""),this.trees[e].staticChildren["/"]=h}let u=this.trees[e],c=u.prefix.length,l=[];for(let h=0;h<=a.length;h++){if(a.charCodeAt(h)===58&&a.charCodeAt(h+1)===58){h++;continue}let d=a.charCodeAt(h)===58&&a.charCodeAt(h+1)!==58,p=a.charCodeAt(h)===42;if(d||p||h===a.length&&h!==c){let m=a.slice(c,h);this.caseSensitive||(m=m.toLowerCase()),m=m.split("::").join(":"),m=m.split("%").join("%25"),u=u.createStaticChild(m)}if(d){let m=!1,g=[],E=h+1;for(let $=E;;$++){let v=a.charCodeAt($),y=v===40,S=v===45||v===46,N=v===47||$===a.length;if(y||S||N){let w=a.slice(E,$);if(l.push(w),m=m||y||S,y){let R=tM(a,$),j=a.slice($,R+1);this.allowUnsafeRegex||It(gp(new RegExp(j)),`The regex '${j}' is not safe!`),g.push(eM(j)),$=R+1}else g.push("(.*?)");let T=$;for(;$<a.length;$++){let R=a.charCodeAt($);if(R===47)break;if(R===58)if(a.charCodeAt($+1)===58)$++;else break}let A=a.slice(T,$);if(A&&(A=A.split("::").join(":"),A=A.split("%").join("%25"),g.push(Zx(A))),E=$+1,N||a.charCodeAt($)===47||$===a.length){let R=m?"()"+A:A,j=a.slice(h,$);a=a.slice(0,h+1)+R+a.slice($),h+=R.length;let q=m?new RegExp("^"+g.join("")+"$"):null;u=u.createParametricChild(q,A||null,j),c=h+1;break}}}}else if(p&&(l.push("*"),u=u.createWildcardChild(),c=h+1,h!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let h of this.routes){let d=h.opts.constraints||{};if(h.method===e&&h.pattern===a&&f$(d,o))throw new Error(`Method '${e}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let f={method:e,path:r,pattern:a,params:l,opts:n,handler:s,store:i};this.routes.push(f),u.addRoute(f,this.constrainer)};$t.prototype.hasRoute=function(e,r,n){return this.findRoute(e,r,n)!==null};$t.prototype.findRoute=function(e,r,n={}){if(this.trees[e]===void 0)return null;let s=r,i=this.trees[e],o=i.prefix.length,a=[];for(let u=0;u<=s.length;u++){if(s.charCodeAt(u)===58&&s.charCodeAt(u+1)===58){u++;continue}let c=s.charCodeAt(u)===58&&s.charCodeAt(u+1)!==58,l=s.charCodeAt(u)===42;if(c||l||u===s.length&&u!==o){let f=s.slice(o,u);if(this.caseSensitive||(f=f.toLowerCase()),f=f.split("::").join(":"),f=f.split("%").join("%25"),i=i.getStaticChild(f),i===null)return null}if(c){let f=!1,h=[],d=u+1;for(let p=d;;p++){let m=s.charCodeAt(p),g=m===40,E=m===45||m===46,$=m===47||p===s.length;if(g||E||$){let v=s.slice(d,p);if(a.push(v),f=f||g||E,g){let N=tM(s,p),w=s.slice(p,N+1);this.allowUnsafeRegex||It(gp(new RegExp(w)),`The regex '${w}' is not safe!`),h.push(eM(w)),p=N+1}else h.push("(.*?)");let y=p;for(;p<s.length;p++){let N=s.charCodeAt(p);if(N===47)break;if(N===58)if(s.charCodeAt(p+1)===58)p++;else break}let S=s.slice(y,p);if(S&&(S=S.split("::").join(":"),S=S.split("%").join("%25"),h.push(Zx(S))),d=p+1,$||s.charCodeAt(p)===47||p===s.length){let N=f?"()"+S:S,w=s.slice(u,p);s=s.slice(0,u+1)+N+s.slice(p),u+=N.length;let T=f?new RegExp("^"+h.join("")+"$"):null;if(i=i.getParametricChild(T,S||null,w),i===null)return null;o=u+1;break}}}}else if(l){if(a.push("*"),i=i.getWildcardChild(),i===null)return null;if(o=u+1,u!==s.length-1)throw new Error("Wildcard must be the last character in the route")}}this.caseSensitive||(s=s.toLowerCase()),s==="*"&&(s="/*");for(let u of this.routes){let c=u.opts.constraints||{};if(u.method===e&&u.pattern===s&&f$(c,n))return{handler:u.handler,store:u.store,params:u.params||[]}}return null};$t.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)};$t.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)};$t.prototype.reset=function(){this.trees={},this.routes=[]};$t.prototype.off=function(e,r,n){It(typeof r=="string","Path should be a string"),It(r.length>0,"The path could not be empty"),It(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),It(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(Eo);if(s){It(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(Eo,"$1$2"),a=r.replace(Eo,"$2");this.off(e,o,n),this.off(e,a,n);return}this.ignoreDuplicateSlashes&&(r=d$(r)),this.ignoreTrailingSlash&&(r=h$(r));let i=Array.isArray(e)?e:[e];for(let o of i)this._off(o,r,n)};$t.prototype._off=function(e,r,n){It(typeof e=="string","Method should be a string"),It(Ka.includes(e),`Method '${e}' is not an http method.`);function s(u){return e!==u.method||r!==u.path}function i(u){return s(u)||!f$(n,u.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};$t.prototype.lookup=function(e,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(e,n),o=this.find(e.method,e.url,i);return this.callHandler(o,e,r,n)}this.constrainer.deriveConstraints(e,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(e.method,e.url,o),u=this.callHandler(a,e,r,n);s(null,u)}catch(a){s(a)}})};$t.prototype.callHandler=function(e,r,n,s){return e===null?this._defaultRoute(r,n,s):s===void 0?e.handler(r,n,e.params,e.store,e.searchParams):e.handler.call(s,r,n,e.params,e.store,e.searchParams)};$t.prototype.find=function(e,r,n){let s=this.trees[e];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(Qx,"/")),this.ignoreDuplicateSlashes&&(r=d$(r));let i,o,a;try{i=Yce(r,this.useSemicolonDelimiter),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=h$(r));let u=r;this.caseSensitive===!1&&(r=r.toLowerCase());let c=this.maxParamLength,l=s.prefix.length,f=[],h=r.length,d=[];for(;;){if(l===h&&s.isLeafNode){let m=s.handlerStorage.getMatchingHandler(n);if(m!==null)return{handler:m.handler,store:m.store,params:m._createParamsObject(f),searchParams:this.querystringParser(o)}}let p=s.getNextNode(r,l,d,f.length);if(p===null){if(d.length===0)return null;let m=d.pop();l=m.brotherPathIndex,f.splice(m.paramsCount),p=m.brotherNode}if(s=p,s.kind===l$.STATIC){l+=s.prefix.length;continue}if(s.kind===l$.WILDCARD){let m=u.slice(l);a&&(m=Xx(m)),f.push(m),l=h;continue}if(s.kind===l$.PARAMETRIC){let m=u.indexOf("/",l);m===-1&&(m=h);let g=u.slice(l,m);if(a&&(g=Xx(g)),s.isRegex){let E=s.regex.exec(g);if(E===null)continue;for(let $=1;$<E.length;$++){let v=E[$];if(v.length>c)return null;f.push(v)}}else{if(g.length>c)return null;f.push(g)}l=m}}};$t.prototype._rebuild=function(t){this.reset();for(let e of t){let{method:r,path:n,opts:s,handler:i,store:o}=e;this._on(r,n,s,i,o)}};$t.prototype._defaultRoute=function(t,e,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()};$t.prototype._onBadUrl=function(t){if(this.onBadUrl===null)return null;let e=this.onBadUrl;return{handler:(r,n,s)=>e(t,r,n),params:{},store:null}};$t.prototype.prettyPrint=function(t={}){let e=t.method;t.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(e===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[c$.name]=c$;let o=new $t({...this._opts,constraints:i}),a=this.routes.map(u=>{let c={...u.opts.constraints,[c$.name]:u.method};return{...u,method:"MERGED",opts:{constraints:c}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[e];return r==null?"(empty tree)":Jce(r,t)};for(let t in Ka){if(!Ka.hasOwnProperty(t))continue;let e=Ka[t],r=e.toLowerCase();if($t.prototype[r])throw new Error("Method already exists: "+r);$t.prototype[r]=function(n,s,i){return this.on(e,n,s,i)}}$t.prototype.all=function(t,e,r){this.on(Ka,t,e,r)};rM.exports=$t;function Zx(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d$(t){return t.replace(/\/\/+/g,"/")}function h$(t){return t.length>1&&t.charCodeAt(t.length-1)===47?t.slice(0,-1):t}function eM(t){return t.charCodeAt(1)===94&&(t=t.slice(0,1)+t.slice(2)),t.charCodeAt(t.length-2)===36&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function tM(t,e){let r=1;for(;e<t.length;){if(e++,t[e]==="\\"){e++;continue}if(t[e]===")"?r--:t[e]==="("&&r++,!r)return e}throw new TypeError('Invalid regexp expression in "'+t+'"')}function Xce(t){return t?t.store?Object.assign({},t.store):{}:{}}});var sM=_((jve,nM)=>{"use strict";function m$(t,e,r,n){if(r===void 0)return e.header("content-length","0"),n(null,null);if(typeof r.resume=="function")return r.on("error",i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let s=""+Buffer.byteLength(r);e.header("content-length",s),n(null,null)}function Qce(t){return t==null?m$:Array.isArray(t)?[...t,m$]:[t,m$]}nM.exports={parseHeadOnSendHandlers:Qce}});var SM=_((Dve,EM)=>{"use strict";var Zce=p$(),efe=ah(),iM=rm(),{onRequestAbortHookRunner:tfe,lifecycleHooks:oM,preParsingHookRunner:rfe,onTimeoutHookRunner:nfe,onRequestHookRunner:sfe}=xs(),{supportedMethods:ife}=ov(),{normalizeSchema:ofe}=cu(),{parseHeadOnSendHandlers:afe}=sM(),{FSTDEP007:ufe,FSTDEP008:lfe,FSTDEP014:aM}=ls(),{compileSchemasForValidation:cfe,compileSchemasForSerialization:ffe}=Xp(),{FST_ERR_SCH_VALIDATION_BUILD:dfe,FST_ERR_SCH_SERIALIZATION_BUILD:hfe,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:pfe,FST_ERR_DUPLICATED_ROUTE:mfe,FST_ERR_INVALID_URL:yfe,FST_ERR_HOOK_INVALID_HANDLER:uM,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:gfe,FST_ERR_ROUTE_DUPLICATED_HANDLER:_fe,FST_ERR_ROUTE_HANDLER_NOT_FN:lM,FST_ERR_ROUTE_MISSING_HANDLER:vfe,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:Efe,FST_ERR_ROUTE_METHOD_INVALID:Sfe,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:$fe,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:bfe,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:y$}=rr(),{kRoutePrefix:wfe,kLogLevel:Rfe,kLogSerializers:cM,kHooks:fM,kSchemaController:Pfe,kOptions:dM,kReplySerializerDefault:g$,kReplyIsError:Tfe,kRequestPayloadStream:Ofe,kDisableRequestLogging:Nfe,kSchemaErrorFormatter:Ife,kErrorHandler:hM,kHasBeenDecorated:pM,kRequestAcceptVersion:_$,kRouteByFastify:v$,kRouteContext:mM}=Mt(),{buildErrorHandler:Cfe}=yl(),{createChildLogger:Afe}=lu(),{getGenReqId:kfe}=op();function qfe(t){let e=Zce(t.config),r,n,s,i,o,a,u,c,l,f,h,d,p,m=!1;return{setup(T,A){r=A.avvio,n=A.fourOhFour,s=A.logger,i=A.hasLogger,o=A.setupResponseListeners,a=A.throwIfAlreadyStarted,d=A.validateHTTPVersion,h=T.exposeHeadRoutes,u=T.disableRequestLogging,c=T.ignoreTrailingSlash,l=T.ignoreDuplicateSlashes,f=Object.prototype.hasOwnProperty.call(T,"return503OnClosing")?T.return503OnClosing:!0,p=A.keepAliveConnections},routing:e.lookup.bind(e),route:N,hasRoute:y,prepareRoute:v,getDefaultRoute:function(){return aM(),e.defaultRoute},setDefaultRoute:function(T){if(aM(),typeof T!="function")throw new pfe;e.defaultRoute=T},routeHandler:w,closeRoutes:()=>{m=!0},printRoutes:e.prettyPrint.bind(e),addConstraintStrategy:g,hasConstraintStrategy:E,isAsyncConstraint:$,findRoute:S};function g(T){return a("Cannot add constraint strategy!"),e.addConstraintStrategy(T)}function E(T){return e.hasConstraintStrategy(T)}function $(){return e.constrainer.asyncStrategiesInUse.size>0}function v({method:T,url:A,options:R,handler:j,isFastify:q}){if(typeof A!="string")throw new yfe(typeof A);if(!j&&typeof R=="function")j=R,R={};else if(j&&typeof j=="function"){if(Object.prototype.toString.call(R)!=="[object Object]")throw new gfe(T,A);if(R.handler)throw typeof R.handler=="function"?new _fe(T,A):new lM(T,A)}return R=Object.assign({},R,{method:T,url:A,path:A,handler:j||R&&R.handler}),N.call(this,{options:R,isFastify:q})}function y({options:T}){return S(T)!==null}function S(T){let A=e.find(T.method,T.url||"",T.constraints);return A?{handler:A.handler,params:A.params,searchParams:A.searchParams}:null}function N({options:T,isFastify:A}){let R={...T},{exposeHeadRoute:j}=R,D=j!=null?j:h,ee=R.method==="GET"||Array.isArray(R.method)&&R.method.includes("GET"),ve=R.method==="HEAD"||Array.isArray(R.method)&&R.method.includes("HEAD"),z=D&&ee?{...T}:null;a("Cannot add route!");let G=R.url||R.path||"";if(Array.isArray(R.method))for(var Je=0;Je<R.method.length;++Je)R.method[Je]=yM(R.method[Je]),gM(R.method[Je],G,R.schema);else R.method=yM(R.method),gM(R.method,G,R.schema);if(!R.handler)throw new vfe(R.method,G);if(R.errorHandler!==void 0&&typeof R.errorHandler!="function")throw new lM(R.method,G);vM(R.bodyLimit);let H=this[wfe];if(G==="/"&&H.length>0&&R.method!=="HEAD")switch(R.prefixTrailingSlash){case"slash":ht.call(this,{path:G,isFastify:A});break;case"no-slash":ht.call(this,{path:"",isFastify:A});break;case"both":default:ht.call(this,{path:"",isFastify:A}),c!==!0&&(l!==!0||!H.endsWith("/"))&&ht.call(this,{path:G,prefixing:!0,isFastify:A})}else G[0]==="/"&&H.endsWith("/")?ht.call(this,{path:G.slice(1),isFastify:A}):ht.call(this,{path:G,isFastify:A});return this;function ht({path:Hr,prefixing:Ue=!1,isFastify:ns=!1}){let Lt=H+Hr;if(R.url=Lt,R.path=Lt,R.routePath=Hr,R.prefix=H,R.logLevel=R.logLevel||this[Rfe],(this[cM]||R.logSerializers)&&(R.logSerializers=Object.assign(Object.create(this[cM]),R.logSerializers)),R.attachValidation==null&&(R.attachValidation=!1),Ue===!1)for(let Ke of this[fM].onRoute)Ke.call(this,R);for(let Ke of oM)if(R&&Ke in R){if(Array.isArray(R[Ke]))for(let Re of R[Ke]){if(typeof Re!="function")throw new uM(Ke,Object.prototype.toString.call(Re));if(Ke==="onSend"||Ke==="preSerialization"||Ke==="onError"||Ke==="preParsing"){if(Re.constructor.name==="AsyncFunction"&&Re.length===4)throw new y$}else if(Ke==="onRequestAbort"){if(Re.constructor.name==="AsyncFunction"&&Re.length!==1)throw new y$}else if(Re.constructor.name==="AsyncFunction"&&Re.length===3)throw new y$}else if(R[Ke]!==void 0&&typeof R[Ke]!="function")throw new uM(Ke,Object.prototype.toString.call(R[Ke]))}let we=R.constraints||{},At={...R.config,url:Lt,method:R.method},ie=new efe({schema:R.schema,handler:R.handler.bind(this),config:At,errorHandler:R.errorHandler,childLoggerFactory:R.childLoggerFactory,bodyLimit:R.bodyLimit,logLevel:R.logLevel,logSerializers:R.logSerializers,attachValidation:R.attachValidation,schemaErrorFormatter:R.schemaErrorFormatter,replySerializer:this[g$],validatorCompiler:R.validatorCompiler,serializerCompiler:R.serializerCompiler,exposeHeadRoute:D,prefixTrailingSlash:R.prefixTrailingSlash||"both",server:this,isFastify:ns});R.version&&(lfe(),we.version=R.version);let He=e.findRoute("HEAD",R.url,we),Dr=He!==null;ve&&Dr&&!ie[v$]&&He.store[v$]&&e.off("HEAD",R.url,we);try{e.on(R.method,R.url,{constraints:we},w,ie)}catch(Ke){if(!ie[v$])throw Ke.message.includes(`Method '${R.method}' already declared for route '${R.url}'`)?new mfe(R.method,R.url):Ke}if(this.after((Ke,Re)=>{ie.errorHandler=R.errorHandler?Cfe(this[hM],R.errorHandler):this[hM],ie._parserOptions.limit=R.bodyLimit||null,ie.logLevel=R.logLevel,ie.logSerializers=R.logSerializers,ie.attachValidation=R.attachValidation,ie[g$]=this[g$],ie.schemaErrorFormatter=R.schemaErrorFormatter||this[Ife]||ie.schemaErrorFormatter,r.once("preReady",()=>{for(let I of oM){let x=this[fM][I].concat(R[I]||[]).map(F=>F.bind(this));ie[I]=x.length?x:null}for(;!ie.Request[pM]&&ie.Request.parent;)ie.Request=ie.Request.parent;for(;!ie.Reply[pM]&&ie.Reply.parent;)ie.Reply=ie.Reply.parent;if(n.setContext(this,ie),R.schema){ie.schema=ofe(ie.schema,this.initialConfig);let I=this[Pfe];!R.validatorCompiler&&(R.schema.body||R.schema.headers||R.schema.querystring||R.schema.params)&&I.setupValidator(this[dM]);try{let x=typeof R?.validatorCompiler=="function"||I.isCustomValidatorCompiler;cfe(ie,R.validatorCompiler||I.validatorCompiler,x)}catch(x){throw new dfe(R.method,Lt,x.message)}R.schema.response&&!R.serializerCompiler&&I.setupSerializer(this[dM]);try{ffe(ie,R.serializerCompiler||I.serializerCompiler)}catch(x){throw new hfe(R.method,Lt,x.message)}}}),Re(Ke)}),D&&ee&&!ve&&!Dr){let Ke=afe(z.onSend);v.call(this,{method:"HEAD",url:Hr,options:{...z,onSend:Ke},isFastify:!0})}else Dr&&j&&ufe()}}function w(T,A,R,j,q){let D=kfe(j.server,T),ee={level:j.logLevel};j.logSerializers&&(ee.serializers=j.logSerializers);let ve=Afe(j,s,T,D,ee);if(ve[Nfe]=u,!d(T.httpVersion)){ve.info({res:{statusCode:505}},"request aborted - invalid HTTP version");let H='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}',ht={"Content-Type":"application/json","Content-Length":H.length};A.writeHead(505,ht),A.end(H);return}if(m===!0&&(T.httpVersionMajor!==2&&A.setHeader("Connection","close"),f)){let H={"Content-Type":"application/json","Content-Length":"80"};A.writeHead(503,H),A.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),ve.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(T.headers.connection||"")==="keep-alive"&&p.has(T.socket)===!1&&(p.add(T.socket),T.socket.on("close",Lfe.bind({keepAliveConnections:p,socket:T.socket}))),T.headers[_$]!==void 0&&(T.headers["accept-version"]=T.headers[_$],T.headers[_$]=void 0);let G=new j.Request(D,R,T,q,ve,j),Je=new j.Reply(A,G,ve);u===!1&&ve.info({req:G},"incoming request"),(i===!0||j.onResponse!==null)&&o(Je),j.onRequest!==null?sfe(j.onRequest,G,Je,_M):_M(null,G,Je),j.onRequestAbort!==null&&T.on("close",()=>{T.aborted&&tfe(j.onRequestAbort,G,jfe.bind(null,Je))}),j.onTimeout!==null&&(G.raw.socket._meta||G.raw.socket.on("timeout",Dfe),G.raw.socket._meta={context:j,request:G,reply:Je})}}function jfe(t,e){e&&t.log.error({err:e},"onRequestAborted hook failed")}function Dfe(){let{context:t,request:e,reply:r}=this._meta;nfe(t.onTimeout,e,r,xfe)}function yM(t){if(typeof t!="string")throw new Sfe;if(t=t.toUpperCase(),ife.indexOf(t)===-1)throw new Efe(t);return t}function gM(t,e,r){if((t==="GET"||t==="HEAD")&&r&&r.body)throw new $fe(t,e)}function vM(t){if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new bfe(t)}function _M(t,e,r){if(r.sent!==!0){if(t!=null){r[Tfe]=!0,r.send(t);return}e[Ofe]=e.raw,e[mM].preParsing!==null?rfe(e[mM].preParsing,e,r,iM):iM(null,e,r)}}function Lfe(){this.keepAliveConnections.delete(this.socket)}function xfe(){}EM.exports={buildRouting:qfe,validateBodyLimitOption:vM}});var OM=_((Lve,TM)=>{"use strict";var Mfe=p$(),$M=Ud(),bM=oh(),Ffe=ah(),{kRoutePrefix:Vfe,kCanSetNotFoundHandler:wc,kFourOhFourLevelInstance:Rc,kFourOhFourContext:es,kHooks:zfe,kErrorHandler:wM}=Mt(),{lifecycleHooks:Hfe}=xs(),{buildErrorHandler:Ufe}=yl(),{FST_ERR_NOT_FOUND:Kfe}=rr(),{createChildLogger:RM}=lu(),{getGenReqId:PM}=op();function Bfe(t){let{logger:e}=t,r=Mfe({onBadUrl:o(),defaultRoute:l}),n=null;return{router:r,setNotFoundHandler:u,setContext:a,arrange404:s};function s(f){f[Rc]=f,f[wc]=!0,r.onBadUrl=r.onBadUrl.bind(f),r.defaultRoute=r.defaultRoute.bind(f)}function i(f,h){let{url:d,method:p}=f.raw,m=`Route ${p}:${d} not found`;f.log.info(m),h.code(404).send({message:m,error:"Not Found",statusCode:404})}function o(){return function(h,d,p){let m=this[Rc][es],g=PM(m.server,d),E=RM(m,e,d,g),$=new bM(g,null,d,null,E,m),v=new $M(p,$,E);n($,v)}}function a(f,h){let d=Object.assign({},f[es]);d.onSend=h.onSend,h[es]=d}function u(f,h,d,p){this[wc]===void 0&&(this[wc]=!0),this[es]===void 0&&(this[es]=null);let m=this,g=this[Vfe]||"/";if(this[wc]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${g}'`);typeof f=="object"&&(f.preHandler&&(Array.isArray(f.preHandler)?f.preHandler=f.preHandler.map(E=>E.bind(m)):f.preHandler=f.preHandler.bind(m)),f.preValidation&&(Array.isArray(f.preValidation)?f.preValidation=f.preValidation.map(E=>E.bind(m)):f.preValidation=f.preValidation.bind(m))),typeof f=="function"&&(h=f,f=void 0),f=f||{},h?(this[Rc][wc]=!1,h=h.bind(this),n=h):(h=i,n=i),this.after((E,$)=>{c.call(this,g,f,h,d,p),$(E)})}function c(f,h,d,p,m){let g=new Ffe({schema:h.schema,handler:d,config:h.config||{},server:this});if(p.once("preReady",()=>{let E=this[es];for(let $ of Hfe){let v=this[zfe][$].concat(h[$]||[]).map(y=>y.bind(this));E[$]=v.length?v:null}E.errorHandler=h.errorHandler?Ufe(this[wM],h.errorHandler):this[wM]}),this[es]!==null&&f==="/"){Object.assign(this[es],g);return}this[Rc][es]=g,r.all(f+(f.endsWith("/")?"*":"/*"),m,g),r.all(f,m,g)}function l(f,h){let d=this[Rc][es],p=PM(d.server,f),m=RM(d,e,f,p);m.info({req:f},"incoming request");let g=new bM(p,null,f,null,m,d),E=new $M(h,g,m);g.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),g.log.warn(r.prettyPrint()),E.code(404).send(new Kfe)}}TM.exports=Bfe});var IM=_((xve,_p)=>{"use strict";_p.exports=Fe;_p.exports.default=Fe;var NM={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},jsonShorthand:{type:"boolean",default:!0},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{enum:[!1]},{type:"string"}],default:"request-id"},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!0},versioning:{type:"object",additionalProperties:!0,required:["storage","deriveVersion"],properties:{storage:{},deriveVersion:{}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},Gfe=Object.prototype.hasOwnProperty,Jfe=new RegExp("idle","u");function Fe(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){t.connectionTimeout===void 0&&(t.connectionTimeout=0),t.keepAliveTimeout===void 0&&(t.keepAliveTimeout=72e3),t.maxRequestsPerSocket===void 0&&(t.maxRequestsPerSocket=0),t.requestTimeout===void 0&&(t.requestTimeout=0),t.bodyLimit===void 0&&(t.bodyLimit=1048576),t.caseSensitive===void 0&&(t.caseSensitive=!0),t.allowUnsafeRegex===void 0&&(t.allowUnsafeRegex=!1),t.ignoreTrailingSlash===void 0&&(t.ignoreTrailingSlash=!1),t.ignoreDuplicateSlashes===void 0&&(t.ignoreDuplicateSlashes=!1),t.disableRequestLogging===void 0&&(t.disableRequestLogging=!1),t.jsonShorthand===void 0&&(t.jsonShorthand=!0),t.maxParamLength===void 0&&(t.maxParamLength=100),t.onProtoPoisoning===void 0&&(t.onProtoPoisoning="error"),t.onConstructorPoisoning===void 0&&(t.onConstructorPoisoning="error"),t.pluginTimeout===void 0&&(t.pluginTimeout=1e4),t.requestIdHeader===void 0&&(t.requestIdHeader="request-id"),t.requestIdLogLabel===void 0&&(t.requestIdLogLabel="reqId"),t.http2SessionTimeout===void 0&&(t.http2SessionTimeout=72e3),t.exposeHeadRoutes===void 0&&(t.exposeHeadRoutes=!0),t.useSemicolonDelimiter===void 0&&(t.useSemicolonDelimiter=!0);let p=o;for(let m in t)Gfe.call(NM.properties,m)||delete t[m];if(p===o){let m=t.connectionTimeout,g=o;if(!(typeof m=="number"&&!(m%1)&&!isNaN(m)&&isFinite(m))){let E=typeof m,$;if($===void 0)if(E==="boolean"||m===null||E==="string"&&m&&m==+m&&!(m%1))$=+m;else return Fe.errors=[{instancePath:e+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;$!==void 0&&(m=$,t!==void 0&&(t.connectionTimeout=$))}var a=g===o;if(a){let E=t.keepAliveTimeout,$=o;if(!(typeof E=="number"&&!(E%1)&&!isNaN(E)&&isFinite(E))){let y=typeof E,S;if(S===void 0)if(y==="boolean"||E===null||y==="string"&&E&&E==+E&&!(E%1))S=+E;else return Fe.errors=[{instancePath:e+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;S!==void 0&&(E=S,t!==void 0&&(t.keepAliveTimeout=S))}var a=$===o;if(a){if(t.forceCloseConnections!==void 0){let y=t.forceCloseConnections,S=o,N=o,w=!1,T=null,A=o;if(typeof y!="string"){let q=typeof y,D;if(D===void 0)if(q=="number"||q=="boolean")D=""+y;else if(y===null)D="";else{let ee={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ee]:i.push(ee),o++}D!==void 0&&(y=D,t!==void 0&&(t.forceCloseConnections=D))}if(o===A&&typeof y=="string"&&!Jfe.test(y)){let q={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[q]:i.push(q),o++}var u=A===o;u&&(w=!0,T=0);let R=o;if(typeof y!="boolean"){let q;if(q===void 0)if(y==="false"||y===0||y===null)q=!1;else if(y==="true"||y===1)q=!0;else{let D={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[D]:i.push(D),o++}q!==void 0&&(y=q,t!==void 0&&(t.forceCloseConnections=q))}var u=R===o;if(u&&w?(w=!1,T=[T,1]):u&&(w=!0,T=1),w)o=N,i!==null&&(N?i.length=N:i=null);else{let q={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:T},message:"must match exactly one schema in oneOf"};return i===null?i=[q]:i.push(q),o++,Fe.errors=i,!1}var a=S===o}else var a=!0;if(a){let y=t.maxRequestsPerSocket,S=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))&&y!==null){let w=typeof y,T;if(T===void 0)if(w==="boolean"||y===null||w==="string"&&y&&y==+y&&!(y%1))T=+y;else if(y===""||y===0||y===!1)T=null;else return Fe.errors=[{instancePath:e+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;T!==void 0&&(y=T,t!==void 0&&(t.maxRequestsPerSocket=T))}var a=S===o;if(a){let w=t.requestTimeout,T=o;if(!(typeof w=="number"&&!(w%1)&&!isNaN(w)&&isFinite(w))){let R=typeof w,j;if(j===void 0)if(R==="boolean"||w===null||R==="string"&&w&&w==+w&&!(w%1))j=+w;else return Fe.errors=[{instancePath:e+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;j!==void 0&&(w=j,t!==void 0&&(t.requestTimeout=j))}var a=T===o;if(a){let R=t.bodyLimit,j=o;if(!(typeof R=="number"&&!(R%1)&&!isNaN(R)&&isFinite(R))){let D=typeof R,ee;if(ee===void 0)if(D==="boolean"||R===null||D==="string"&&R&&R==+R&&!(R%1))ee=+R;else return Fe.errors=[{instancePath:e+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ee!==void 0&&(R=ee,t!==void 0&&(t.bodyLimit=ee))}var a=j===o;if(a){let D=t.caseSensitive,ee=o;if(typeof D!="boolean"){let z;if(z===void 0)if(D==="false"||D===0||D===null)z=!1;else if(D==="true"||D===1)z=!0;else return Fe.errors=[{instancePath:e+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;z!==void 0&&(D=z,t!==void 0&&(t.caseSensitive=z))}var a=ee===o;if(a){let z=t.allowUnsafeRegex,G=o;if(typeof z!="boolean"){let H;if(H===void 0)if(z==="false"||z===0||z===null)H=!1;else if(z==="true"||z===1)H=!0;else return Fe.errors=[{instancePath:e+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;H!==void 0&&(z=H,t!==void 0&&(t.allowUnsafeRegex=H))}var a=G===o;if(a){if(t.http2!==void 0){let H=t.http2,ht=o;if(typeof H!="boolean"){let Ue;if(Ue===void 0)if(H==="false"||H===0||H===null)Ue=!1;else if(H==="true"||H===1)Ue=!0;else return Fe.errors=[{instancePath:e+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ue!==void 0&&(H=Ue,t!==void 0&&(t.http2=Ue))}var a=ht===o}else var a=!0;if(a){if(t.https!==void 0){let H=t.https,ht=o,Hr=o,Ue=!0,ns=o,Lt=o,we=o,At=o,ie=!1,He=null,Dr=o;if(typeof H!="boolean"){let I;if(I===void 0)if(H==="false"||H===0||H===null)I=!1;else if(H==="true"||H===1)I=!0;else{let x={};i===null?i=[x]:i.push(x),o++}I!==void 0&&(H=I,t!==void 0&&(t.https=I))}var c=Dr===o;c&&(ie=!0,He=0);let Ke=o;if(H!==null){let I;if(I===void 0)if(H===""||H===0||H===!1)I=null;else{let x={};i===null?i=[x]:i.push(x),o++}I!==void 0&&(H=I,t!==void 0&&(t.https=I))}var c=Ke===o;if(c&&ie)ie=!1,He=[He,1];else{c&&(ie=!0,He=1);let I=o;if(o===I)if(H&&typeof H=="object"&&!Array.isArray(H)){let F;if(H.allowHTTP1===void 0&&(F="allowHTTP1")){let Q={};i===null?i=[Q]:i.push(Q),o++}else{let Q=o;for(let Ee in H)Ee!=="allowHTTP1"&&delete H[Ee];if(Q===o&&H.allowHTTP1!==void 0){let Ee=H.allowHTTP1;if(typeof Ee!="boolean"){let Z;if(Z===void 0)if(Ee==="false"||Ee===0||Ee===null)Z=!1;else if(Ee==="true"||Ee===1)Z=!0;else{let We={};i===null?i=[We]:i.push(We),o++}Z!==void 0&&(Ee=Z,H!==void 0&&(H.allowHTTP1=Z))}}}}else{let F={};i===null?i=[F]:i.push(F),o++}var c=I===o;c&&ie?(ie=!1,He=[He,2]):c&&(ie=!0,He=2)}if(ie)o=At,i!==null&&(At?i.length=At:i=null);else{let I={};i===null?i=[I]:i.push(I),o++}var l=we===o;if(l){let I={};i===null?i=[I]:i.push(I),o++}else o=Lt,i!==null&&(Lt?i.length=Lt:i=null);var f=ns===o;if(o=Hr,i!==null&&(Hr?i.length=Hr:i=null),f){let I=o;t.https=!0;var f=I===o;Ue=f}if(!Ue){let I={instancePath:e+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[I]:i.push(I),o++,Fe.errors=i,!1}var a=ht===o}else var a=!0;if(a){let H=t.ignoreTrailingSlash,ht=o;if(typeof H!="boolean"){let Ue;if(Ue===void 0)if(H==="false"||H===0||H===null)Ue=!1;else if(H==="true"||H===1)Ue=!0;else return Fe.errors=[{instancePath:e+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ue!==void 0&&(H=Ue,t!==void 0&&(t.ignoreTrailingSlash=Ue))}var a=ht===o;if(a){let Ue=t.ignoreDuplicateSlashes,ns=o;if(typeof Ue!="boolean"){let we;if(we===void 0)if(Ue==="false"||Ue===0||Ue===null)we=!1;else if(Ue==="true"||Ue===1)we=!0;else return Fe.errors=[{instancePath:e+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;we!==void 0&&(Ue=we,t!==void 0&&(t.ignoreDuplicateSlashes=we))}var a=ns===o;if(a){let we=t.disableRequestLogging,At=o;if(typeof we!="boolean"){let He;if(He===void 0)if(we==="false"||we===0||we===null)He=!1;else if(we==="true"||we===1)He=!0;else return Fe.errors=[{instancePath:e+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;He!==void 0&&(we=He,t!==void 0&&(t.disableRequestLogging=He))}var a=At===o;if(a){let He=t.jsonShorthand,Dr=o;if(typeof He!="boolean"){let Re;if(Re===void 0)if(He==="false"||He===0||He===null)Re=!1;else if(He==="true"||He===1)Re=!0;else return Fe.errors=[{instancePath:e+"/jsonShorthand",schemaPath:"#/properties/jsonShorthand/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Re!==void 0&&(He=Re,t!==void 0&&(t.jsonShorthand=Re))}var a=Dr===o;if(a){let Re=t.maxParamLength,I=o;if(!(typeof Re=="number"&&!(Re%1)&&!isNaN(Re)&&isFinite(Re))){let F=typeof Re,Q;if(Q===void 0)if(F==="boolean"||Re===null||F==="string"&&Re&&Re==+Re&&!(Re%1))Q=+Re;else return Fe.errors=[{instancePath:e+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Q!==void 0&&(Re=Q,t!==void 0&&(t.maxParamLength=Q))}var a=I===o;if(a){let F=t.onProtoPoisoning,Q=o;if(typeof F!="string"){let Z=typeof F,We;if(We===void 0)if(Z=="number"||Z=="boolean")We=""+F;else if(F===null)We="";else return Fe.errors=[{instancePath:e+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;We!==void 0&&(F=We,t!==void 0&&(t.onProtoPoisoning=We))}var a=Q===o;if(a){let Z=t.onConstructorPoisoning,We=o;if(typeof Z!="string"){let Ye=typeof Z,bt;if(bt===void 0)if(Ye=="number"||Ye=="boolean")bt=""+Z;else if(Z===null)bt="";else return Fe.errors=[{instancePath:e+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;bt!==void 0&&(Z=bt,t!==void 0&&(t.onConstructorPoisoning=bt))}var a=We===o;if(a){let Ye=t.pluginTimeout,bt=o;if(!(typeof Ye=="number"&&!(Ye%1)&&!isNaN(Ye)&&isFinite(Ye))){let pn=typeof Ye,ss;if(ss===void 0)if(pn==="boolean"||Ye===null||pn==="string"&&Ye&&Ye==+Ye&&!(Ye%1))ss=+Ye;else return Fe.errors=[{instancePath:e+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ss!==void 0&&(Ye=ss,t!==void 0&&(t.pluginTimeout=ss))}var a=bt===o;if(a){let pn=t.requestIdHeader,ss=o,Wa=o,qs=!1,mn=o;if(pn!==!1){let Zt={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/enum",keyword:"enum",params:{allowedValues:NM.properties.requestIdHeader.anyOf[0].enum},message:"must be equal to one of the allowed values"};i===null?i=[Zt]:i.push(Zt),o++}var h=mn===o;if(qs=qs||h,!qs){let Zt=o;if(typeof pn!="string"){let js=typeof pn,ut;if(ut===void 0)if(js=="number"||js=="boolean")ut=""+pn;else if(pn===null)ut="";else{let Lr={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Lr]:i.push(Lr),o++}ut!==void 0&&(pn=ut,t!==void 0&&(t.requestIdHeader=ut))}var h=Zt===o;qs=qs||h}if(qs)o=Wa,i!==null&&(Wa?i.length=Wa:i=null);else{let Zt={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Zt]:i.push(Zt),o++,Fe.errors=i,!1}var a=ss===o;if(a){let Zt=t.requestIdLogLabel,jc=o;if(typeof Zt!="string"){let ut=typeof Zt,Lr;if(Lr===void 0)if(ut=="number"||ut=="boolean")Lr=""+Zt;else if(Zt===null)Lr="";else return Fe.errors=[{instancePath:e+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Lr!==void 0&&(Zt=Lr,t!==void 0&&(t.requestIdLogLabel=Lr))}var a=jc===o;if(a){let ut=t.http2SessionTimeout,Lr=o;if(!(typeof ut=="number"&&!(ut%1)&&!isNaN(ut)&&isFinite(ut))){let xr=typeof ut,xt;if(xt===void 0)if(xr==="boolean"||ut===null||xr==="string"&&ut&&ut==+ut&&!(ut%1))xt=+ut;else return Fe.errors=[{instancePath:e+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;xt!==void 0&&(ut=xt,t!==void 0&&(t.http2SessionTimeout=xt))}var a=Lr===o;if(a){let xr=t.exposeHeadRoutes,xt=o;if(typeof xr!="boolean"){let er;if(er===void 0)if(xr==="false"||xr===0||xr===null)er=!1;else if(xr==="true"||xr===1)er=!0;else return Fe.errors=[{instancePath:e+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;er!==void 0&&(xr=er,t!==void 0&&(t.exposeHeadRoutes=er))}var a=xt===o;if(a){let er=t.useSemicolonDelimiter,Ip=o;if(typeof er!="boolean"){let kt;if(kt===void 0)if(er==="false"||er===0||er===null)kt=!1;else if(er==="true"||er===1)kt=!0;else return Fe.errors=[{instancePath:e+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;kt!==void 0&&(er=kt,t!==void 0&&(t.useSemicolonDelimiter=kt))}var a=Ip===o;if(a){if(t.versioning!==void 0){let kt=t.versioning,$i=o;if(o===$i)if(kt&&typeof kt=="object"&&!Array.isArray(kt)){let yn;if(kt.storage===void 0&&(yn="storage")||kt.deriveVersion===void 0&&(yn="deriveVersion"))return Fe.errors=[{instancePath:e+"/versioning",schemaPath:"#/properties/versioning/required",keyword:"required",params:{missingProperty:yn},message:"must have required property '"+yn+"'"}],!1}else return Fe.errors=[{instancePath:e+"/versioning",schemaPath:"#/properties/versioning/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=$i===o}else var a=!0;if(a)if(t.constraints!==void 0){let kt=t.constraints,$i=o;if(o===$i)if(kt&&typeof kt=="object"&&!Array.isArray(kt))for(let yn in kt){let br=kt[yn],Dc=o;if(o===Dc)if(br&&typeof br=="object"&&!Array.isArray(br)){let jn;if(br.name===void 0&&(jn="name")||br.storage===void 0&&(jn="storage")||br.validate===void 0&&(jn="validate")||br.deriveConstraint===void 0&&(jn="deriveConstraint"))return Fe.errors=[{instancePath:e+"/constraints/"+yn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:jn},message:"must have required property '"+jn+"'"}],!1;if(br.name!==void 0){let Ds=br.name;if(typeof Ds!="string"){let Lc=typeof Ds,is;if(is===void 0)if(Lc=="number"||Lc=="boolean")is=""+Ds;else if(Ds===null)is="";else return Fe.errors=[{instancePath:e+"/constraints/"+yn.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;is!==void 0&&(Ds=is,br!==void 0&&(br.name=is))}}}else return Fe.errors=[{instancePath:e+"/constraints/"+yn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=Dc===o;if(!d)break}else return Fe.errors=[{instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=$i===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}else return Fe.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Fe.errors=i,o===0}_p.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,jsonShorthand:!0,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:"request-id",requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!0}});var CM=_((Mve,Ep)=>{"use strict";var vp=IM(),Wfe=$f()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:Yfe}=rr();function Xfe(t){let e=Wfe(t);if(!vp(e)){let r=new Yfe(JSON.stringify(vp.errors.map(n=>n.message)));throw r.errors=vp.errors,r}return E$(e)}function E$(t){let e=Object.getOwnPropertyNames(t);for(let r of e){let n=t[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(t[r]=n&&typeof n=="object"?E$(n):n)}return Object.freeze(t)}Ep.exports=Xfe;Ep.exports.defaultInitOptions=vp.defaultInitOptions;Ep.exports.utils={deepFreezeObject:E$}});var FM=_((Fve,MM)=>{"use strict";var{kAvvioBoot:Qfe,kChildren:AM,kRoutePrefix:kM,kLogLevel:qM,kLogSerializers:S$,kHooks:$$,kSchemaController:Ba,kContentTypeParser:jM,kReply:DM,kRequest:LM,kFourOhFour:Zfe,kPluginNameChain:xM}=Mt(),ede=Ud(),tde=oh(),rde=JS(),nde=Ev(),{buildHooks:sde}=xs(),Pc=e$();MM.exports=function(e,r,n){let s=Pc.registerPlugin.call(e,r),i=Pc.getPluginName(r)||Pc.getFuncPreview(r);if(s)return e[xM].push(i),e;let o=Object.create(e);e[AM].push(o),o.ready=e[Qfe].bind(o),o[AM]=[],o[DM]=ede.buildReply(o[DM]),o[LM]=tde.buildRequest(o[LM]),o[jM]=nde.helpers.buildContentTypeParser(o[jM]),o[$$]=sde(o[$$]),o[kM]=ide(o[kM],n.prefix),o[qM]=n.logLevel||o[qM],o[Ba]=rde.buildSchemaController(e[Ba]),o.getSchema=o[Ba].getSchema.bind(o[Ba]),o.getSchemas=o[Ba].getSchemas.bind(o[Ba]),o[Pc.kRegisteredPlugins]=Object.create(o[Pc.kRegisteredPlugins]),o[xM]=[i],(o[S$]||n.logSerializers)&&(o[S$]=Object.assign(Object.create(o[S$]),n.logSerializers)),n.prefix&&o[Zfe].arrange404(o);for(let a of o[$$].onRegister)a.call(this,o,n);return o};function ide(t,e){return e?(t.endsWith("/")&&e[0]==="/"?e=e.slice(1):e[0]!=="/"&&(e="/"+e),t+e):t}});var zM=_((Vve,VM)=>{"use strict";VM.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var HM=_(b$=>{"use strict";b$.parse=ade;b$.serialize=ude;var ode=Object.prototype.toString,Sp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function ade(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var r={},n=e||{},s=n.decode||lde,i=0;i<t.length;){var o=t.indexOf("=",i);if(o===-1)break;var a=t.indexOf(";",i);if(a===-1)a=t.length;else if(a<o){i=t.lastIndexOf(";",o-1)+1;continue}var u=t.slice(i,o).trim();if(r[u]===void 0){var c=t.slice(o+1,a).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1)),r[u]=dde(c,s)}i=a+1}return r}function ude(t,e,r){var n=r||{},s=n.encode||cde;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!Sp.test(t))throw new TypeError("argument name is invalid");var i=s(e);if(i&&!Sp.test(i))throw new TypeError("argument val is invalid");var o=t+"="+i;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!Sp.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!Sp.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var u=n.expires;if(!fde(u)||isNaN(u.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+u.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority){var c=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(c){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var l=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function lde(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function cde(t){return encodeURIComponent(t)}function fde(t){return ode.call(t)==="[object Date]"||t instanceof Date}function dde(t,e){try{return e(t)}catch{return t}}});var BM=_((Hve,KM)=>{"use strict";var{URL:UM}=require("node:url"),w$="http://localhost";KM.exports=function(e,r){(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]")&&e.startsWith("//")&&(e=w$+e);let n=typeof e=="object"?Object.assign(new UM(w$),e):new UM(e,w$);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},e.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var WM=_((Uve,$p)=>{"use strict";var{Readable:GM,addAbortSignal:hde}=require("node:stream"),P$=require("node:util"),pde=HM(),mde=require("node:assert"),{createDeprecation:yde}=Kp(),gde=BM(),{EventEmitter:_de}=require("node:events"),vde=yde({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});function Ede(t){return t.port?t.host:t.hostname+(t.protocol==="https:"?":443":":80")}var R$=class extends _de{constructor(e){super(),this.remoteAddress=e}};function JM(t){return new e(this);function e(r){ts.call(r,{...t,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(ts.prototype))this.constructor.prototype[n]=ts.prototype[n];return P$.inherits(this.constructor,t.Request),this}}function ts(t){GM.call(this,{autoDestroy:!1});let e=gde(t.url||t.path,t.query);this.url=e.pathname+e.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=t.method?t.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=t.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let u=r[o];mde(u!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+u}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||t.authority||Ede(e),t.cookies){let{cookies:o}=t,a=Object.keys(o).map(u=>pde.serialize(u,o[u]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new R$(t.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return vde(),this.socket},configurable:!0});let n=t.payload||t.body||null,s=n&&typeof n.resume=="function";n&&typeof n!="string"&&!s&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!s&&!Object.prototype.hasOwnProperty.call(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:t.simulate||{}};let i=t.signal;return i&&hde(i,this),this}P$.inherits(ts,GM);P$.inherits(JM,ts);ts.prototype.prepare=function(t){let e=this._lightMyRequest.payload;if(!e||typeof e.resume!="function")return t();let r=[];e.on("data",n=>r.push(Buffer.from(n))),e.on("end",()=>{let n=Buffer.concat(r);return this.headers["content-length"]=this.headers["content-length"]||""+n.length,this._lightMyRequest.payload=n,t()}),e.resume()};ts.prototype._read=function(t){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})};ts.prototype.destroy=function(t){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,t&&(this._error=!0,process.nextTick(()=>this.emit("error",t))),process.nextTick(()=>this.emit("close")))};$p.exports=ts;$p.exports.Request=ts;$p.exports.CustomRequest=JM});var XM=_((Kve,Tc)=>{"use strict";var Ga={decodeValues:!0,map:!1,silent:!1};function T$(t){return typeof t=="string"&&!!t.trim()}function O$(t,e){var r=t.split(";").filter(T$),n=r.shift(),s=Sde(n),i=s.name,o=s.value;e=e?Object.assign({},Ga,e):Ga;try{o=e.decodeValues?decodeURIComponent(o):o}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",u)}var a={name:i,value:o};return r.forEach(function(u){var c=u.split("="),l=c.shift().trimLeft().toLowerCase(),f=c.join("=");l==="expires"?a.expires=new Date(f):l==="max-age"?a.maxAge=parseInt(f,10):l==="secure"?a.secure=!0:l==="httponly"?a.httpOnly=!0:l==="samesite"?a.sameSite=f:a[l]=f}),a}function Sde(t){var e="",r="",n=t.split("=");return n.length>1?(e=n.shift(),r=n.join("=")):r=t,{name:e,value:r}}function YM(t,e){if(e=e?Object.assign({},Ga,e):Ga,!t)return e.map?{}:[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e=e?Object.assign({},Ga,e):Ga,e.map){var n={};return t.filter(T$).reduce(function(s,i){var o=O$(i,e);return s[o.name]=o,s},n)}else return t.filter(T$).map(function(s){return O$(s,e)})}function $de(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,s,i,o,a;function u(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function c(){return s=t.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<t.length;){for(n=r,a=!1;u();)if(s=t.charAt(r),s===","){for(i=r,r+=1,u(),o=r;r<t.length&&c();)r+=1;r<t.length&&t.charAt(r)==="="?(a=!0,r=o,e.push(t.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=t.length)&&e.push(t.substring(n,t.length))}return e}Tc.exports=YM;Tc.exports.parse=YM;Tc.exports.parseString=O$;Tc.exports.splitCookiesString=$de});var eF=_((Bve,ZM)=>{"use strict";var Oc=require("node:http"),{Writable:bde}=require("node:stream"),wde=require("node:util"),Rde=XM();function Ei(t,e,r){Oc.ServerResponse.call(this,t),this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]},this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(Tde()),this._promiseCallback=typeof r=="function";let n=!1,s=o=>{if(n=!0,this._promiseCallback)return process.nextTick(()=>e(o));process.nextTick(()=>e(null,o))},i=o=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>r(o));process.nextTick(()=>e(o,null))}};this.once("finish",()=>{let o=Pde(this);o.raw.req=t,s(o)}),this.connection.once("error",i),this.once("error",i),this.once("close",i)}wde.inherits(Ei,Oc.ServerResponse);Ei.prototype.setTimeout=function(t,e){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},t),this.on("timeout",e),this};Ei.prototype.writeHead=function(){let t=Oc.ServerResponse.prototype.writeHead.apply(this,arguments);return QM(this),t};Ei.prototype.write=function(t,e,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Oc.ServerResponse.prototype.write.call(this,t,e,r),this._lightMyRequest.payloadChunks.push(Buffer.from(t,e)),!0};Ei.prototype.end=function(t,e,r){t&&this.write(t,e),Oc.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};Ei.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&process.nextTick(()=>this.emit("error",t)),process.nextTick(()=>this.emit("close")))};Ei.prototype.addTrailers=function(t){for(let e in t)this._lightMyRequest.trailers[e.toLowerCase().trim()]=t[e].toString().trim()};function Pde(t){t._lightMyRequest.headers===null&&QM(t),Ode(t);let e={raw:{res:t},headers:t._lightMyRequest.headers,statusCode:t.statusCode,statusMessage:t.statusMessage,trailers:{},get cookies(){return Rde.parse(this)}},r=Buffer.concat(t._lightMyRequest.payloadChunks);return e.rawPayload=r,e.payload=r.toString(),e.body=e.payload,e.trailers=t._lightMyRequest.trailers,e.json=function(){return JSON.parse(e.payload)},e}function Tde(){return new bde({write(t,e,r){setImmediate(r)}})}function Ode(t){let e=t._lightMyRequest.headers;for(let r of Object.keys(e)){let n=e[r];Array.isArray(n)?e[r]=n.map(s=>""+s):e[r]=""+n}}function QM(t){t._lightMyRequest.headers=Object.assign({},t.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(e=>{let r=new RegExp("\\r\\n"+e+": ([^\\r]*)\\r\\n"),n=t._header.match(r);n&&(t._lightMyRequest.headers[e.toLowerCase()]=n[1])})}ZM.exports=Ei});var tF=_((Gve,N$)=>{"use strict";N$.exports=Dt;N$.exports.default=Dt;var Nde={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function Dt(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.url===void 0&&(y="url")){let S={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};i===null?i=[S]:i.push(S),o++}}var h=l===o;h&&(u=!0,c=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.path===void 0&&(y="path")){let S={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};i===null?i=[S]:i.push(S),o++}}var h=f===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let y={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf"};return i===null?i=[y]:i.push(y),o++,Dt.errors=i,!1}if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url!==void 0){let y=t.url,S=o,N=o,w=!1,T=null,A=o;if(typeof y!="string"){let j=typeof y,q;if(q===void 0)if(j=="number"||j=="boolean")q=""+y;else if(y===null)q="";else{let D={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[D]:i.push(D),o++}q!==void 0&&(y=q,t!==void 0&&(t.url=q))}var p=A===o;p&&(w=!0,T=0);let R=o;if(o===R)if(y&&typeof y=="object"&&!Array.isArray(y)){let j;if(y.pathname===void 0&&(j="pathname")){let q={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:j},message:"must have required property '"+j+"'"};i===null?i=[q]:i.push(q),o++}else{if(y.protocol!==void 0){let q=y.protocol,D=o;if(typeof q!="string"){let ee=typeof q,ve;if(ve===void 0)if(ee=="number"||ee=="boolean")ve=""+q;else if(q===null)ve="";else{let z={instancePath:e+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}ve!==void 0&&(q=ve,y!==void 0&&(y.protocol=ve))}var d=D===o}else var d=!0;if(d){if(y.hostname!==void 0){let q=y.hostname,D=o;if(typeof q!="string"){let ve=typeof q,z;if(z===void 0)if(ve=="number"||ve=="boolean")z=""+q;else if(q===null)z="";else{let G={instancePath:e+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[G]:i.push(G),o++}z!==void 0&&(q=z,y!==void 0&&(y.hostname=z))}var d=D===o}else var d=!0;if(d)if(y.pathname!==void 0){let q=y.pathname,D=o;if(typeof q!="string"){let ve=typeof q,z;if(z===void 0)if(ve=="number"||ve=="boolean")z=""+q;else if(q===null)z="";else{let G={instancePath:e+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[G]:i.push(G),o++}z!==void 0&&(q=z,y!==void 0&&(y.pathname=z))}var d=D===o}else var d=!0}}}else{let j={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[j]:i.push(j),o++}var p=R===o;if(p&&w?(w=!1,T=[T,1]):p&&(w=!0,T=1),w)o=N,i!==null&&(N?i.length=N:i=null);else{let j={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:T},message:"must match exactly one schema in oneOf"};return i===null?i=[j]:i.push(j),o++,Dt.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.path!==void 0){let y=t.path,S=o,N=o,w=!1,T=null,A=o;if(typeof y!="string"){let q=typeof y,D;if(D===void 0)if(q=="number"||q=="boolean")D=""+y;else if(y===null)D="";else{let ee={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ee]:i.push(ee),o++}D!==void 0&&(y=D,t!==void 0&&(t.path=D))}var E=A===o;E&&(w=!0,T=0);let R=o;if(o===R)if(y&&typeof y=="object"&&!Array.isArray(y)){let q;if(y.pathname===void 0&&(q="pathname")){let D={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:q},message:"must have required property '"+q+"'"};i===null?i=[D]:i.push(D),o++}else{if(y.protocol!==void 0){let D=y.protocol,ee=o;if(typeof D!="string"){let ve=typeof D,z;if(z===void 0)if(ve=="number"||ve=="boolean")z=""+D;else if(D===null)z="";else{let G={instancePath:e+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[G]:i.push(G),o++}z!==void 0&&(D=z,y!==void 0&&(y.protocol=z))}var g=ee===o}else var g=!0;if(g){if(y.hostname!==void 0){let D=y.hostname,ee=o;if(typeof D!="string"){let z=typeof D,G;if(G===void 0)if(z=="number"||z=="boolean")G=""+D;else if(D===null)G="";else{let Je={instancePath:e+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Je]:i.push(Je),o++}G!==void 0&&(D=G,y!==void 0&&(y.hostname=G))}var g=ee===o}else var g=!0;if(g)if(y.pathname!==void 0){let D=y.pathname,ee=o;if(typeof D!="string"){let z=typeof D,G;if(G===void 0)if(z=="number"||z=="boolean")G=""+D;else if(D===null)G="";else{let Je={instancePath:e+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Je]:i.push(Je),o++}G!==void 0&&(D=G,y!==void 0&&(y.pathname=G))}var g=ee===o}else var g=!0}}}else{let q={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[q]:i.push(q),o++}var E=R===o;if(E&&w?(w=!1,T=[T,1]):E&&(w=!0,T=1),w)o=N,i!==null&&(N?i.length=N:i=null);else{let q={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:T},message:"must match exactly one schema in oneOf"};return i===null?i=[q]:i.push(q),o++,Dt.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.cookies!==void 0){let y=t.cookies,S=o;if(o===S&&!(y&&typeof y=="object"&&!Array.isArray(y)))return Dt.errors=[{instancePath:e+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.headers!==void 0){let y=t.headers,S=o;if(o===S&&!(y&&typeof y=="object"&&!Array.isArray(y)))return Dt.errors=[{instancePath:e+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.query!==void 0){let y=t.query,S=o,N=o,w=!1,T=o;if(o===T&&!(y&&typeof y=="object"&&!Array.isArray(y))){let R={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[R]:i.push(R),o++}var $=T===o;if(w=w||$,!w){let R=o;if(typeof y!="string"){let q=typeof y,D;if(D===void 0)if(q=="number"||q=="boolean")D=""+y;else if(y===null)D="";else{let ee={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ee]:i.push(ee),o++}D!==void 0&&(y=D,t!==void 0&&(t.query=D))}var $=R===o;w=w||$}if(w)o=N,i!==null&&(N?i.length=N:i=null);else{let R={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,Dt.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.simulate!==void 0){let y=t.simulate,S=o;if(o===S)if(y&&typeof y=="object"&&!Array.isArray(y)){if(y.end!==void 0){let w=y.end,T=o;if(typeof w!="boolean"){let A;if(A===void 0)if(w==="false"||w===0||w===null)A=!1;else if(w==="true"||w===1)A=!0;else return Dt.errors=[{instancePath:e+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(w=A,y!==void 0&&(y.end=A))}var v=T===o}else var v=!0;if(v){if(y.split!==void 0){let w=y.split,T=o;if(typeof w!="boolean"){let R;if(R===void 0)if(w==="false"||w===0||w===null)R=!1;else if(w==="true"||w===1)R=!0;else return Dt.errors=[{instancePath:e+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(w=R,y!==void 0&&(y.split=R))}var v=T===o}else var v=!0;if(v){if(y.error!==void 0){let w=y.error,T=o;if(typeof w!="boolean"){let R;if(R===void 0)if(w==="false"||w===0||w===null)R=!1;else if(w==="true"||w===1)R=!0;else return Dt.errors=[{instancePath:e+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(w=R,y!==void 0&&(y.error=R))}var v=T===o}else var v=!0;if(v)if(y.close!==void 0){let w=y.close,T=o;if(typeof w!="boolean"){let R;if(R===void 0)if(w==="false"||w===0||w===null)R=!1;else if(w==="true"||w===1)R=!0;else return Dt.errors=[{instancePath:e+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(w=R,y!==void 0&&(y.close=R))}var v=T===o}else var v=!0}}}else return Dt.errors=[{instancePath:e+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.authority!==void 0){let y=t.authority,S=o;if(typeof y!="string"){let w=typeof y,T;if(T===void 0)if(w=="number"||w=="boolean")T=""+y;else if(y===null)T="";else return Dt.errors=[{instancePath:e+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;T!==void 0&&(y=T,t!==void 0&&(t.authority=T))}var m=S===o}else var m=!0;if(m){if(t.remoteAddress!==void 0){let y=t.remoteAddress,S=o;if(typeof y!="string"){let w=typeof y,T;if(T===void 0)if(w=="number"||w=="boolean")T=""+y;else if(y===null)T="";else return Dt.errors=[{instancePath:e+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;T!==void 0&&(y=T,t!==void 0&&(t.remoteAddress=T))}var m=S===o}else var m=!0;if(m){if(t.method!==void 0){let y=t.method,S=o;if(typeof y!="string"){let w=typeof y,T;if(T===void 0)if(w=="number"||w=="boolean")T=""+y;else if(y===null)T="";else return Dt.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;T!==void 0&&(y=T,t!==void 0&&(t.method=T))}if(!(y==="ACL"||y==="BIND"||y==="CHECKOUT"||y==="CONNECT"||y==="COPY"||y==="DELETE"||y==="GET"||y==="HEAD"||y==="LINK"||y==="LOCK"||y==="M-SEARCH"||y==="MERGE"||y==="MKACTIVITY"||y==="MKCALENDAR"||y==="MKCOL"||y==="MOVE"||y==="NOTIFY"||y==="OPTIONS"||y==="PATCH"||y==="POST"||y==="PROPFIND"||y==="PROPPATCH"||y==="PURGE"||y==="PUT"||y==="REBIND"||y==="REPORT"||y==="SEARCH"||y==="SOURCE"||y==="SUBSCRIBE"||y==="TRACE"||y==="UNBIND"||y==="UNLINK"||y==="UNLOCK"||y==="UNSUBSCRIBE"||y==="acl"||y==="bind"||y==="checkout"||y==="connect"||y==="copy"||y==="delete"||y==="get"||y==="head"||y==="link"||y==="lock"||y==="m-search"||y==="merge"||y==="mkactivity"||y==="mkcalendar"||y==="mkcol"||y==="move"||y==="notify"||y==="options"||y==="patch"||y==="post"||y==="propfind"||y==="proppatch"||y==="purge"||y==="put"||y==="rebind"||y==="report"||y==="search"||y==="source"||y==="subscribe"||y==="trace"||y==="unbind"||y==="unlink"||y==="unlock"||y==="unsubscribe"))return Dt.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:Nde.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=S===o}else var m=!0;if(m)if(t.validate!==void 0){let y=t.validate,S=o;if(typeof y!="boolean"){let w;if(w===void 0)if(y==="false"||y===0||y===null)w=!1;else if(y==="true"||y===1)w=!0;else return Dt.errors=[{instancePath:e+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;w!==void 0&&(y=w,t!==void 0&&(t.validate=w))}var m=S===o}else var m=!0}}}}}}}}}else return Dt.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Dt.errors=i,o===0}});var sF=_((Jve,Ic)=>{"use strict";var Ide=require("node:assert"),I$=WM(),bp=eF(),Rp="The dispatch function has already been invoked",rF=tF();function C$(t,e,r){return r===void 0?new Nc(t,e):wp(t,e,r)}function nF(t,e,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),r.prepare(()=>t.call(e,r,n))}function wp(t,e,r){if(e=typeof e=="string"?{url:e}:e,e.validate!==!1&&(Ide(typeof t=="function","dispatchFunc should be a function"),!rF(e)))throw new Error(rF.errors.map(o=>o.message));let n=e.server||{},s=e.Request?I$.CustomRequest:I$;if(t.request&&t.request.app===t&&(Object.setPrototypeOf(Object.getPrototypeOf(t.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(t.response),bp.prototype)),typeof r=="function"){let i=new s(e),o=new bp(i,r);return nF(t,n,i,o)}else return new Promise((i,o)=>{let a=new s(e),u=new bp(a,i,o);nF(t,n,a,u)})}function Nc(t,e){typeof e=="string"?this.option={url:e}:this.option=Object.assign({},e),this.dispatch=t,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var Cde=["delete","get","head","options","patch","post","put","trace"];Cde.forEach(t=>{Nc.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Rp);return this.option.url=e,this.option.method=t.toUpperCase(),this}});var Ade=["body","cookies","headers","payload","query"];Ade.forEach(t=>{Nc.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Rp);return this.option[t]=e,this}});Nc.prototype.end=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(Rp);if(this._hasInvoked=!0,typeof t=="function")wp(this.dispatch,this.option,t);else return this._promise=wp(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(t=>{t!=="constructor"&&(Nc.prototype[t]=function(...e){if(!this._promise){if(this._hasInvoked===!0)throw new Error(Rp);this._hasInvoked=!0,this._promise=wp(this.dispatch,this.option)}return this._promise[t](...e)})});function kde(t){return t instanceof I$||t instanceof bp||t&&t.constructor&&t.constructor.name==="_CustomLMRRequest"}Ic.exports=C$;Ic.exports.default=C$;Ic.exports.inject=C$;Ic.exports.isInjection=kde});var vF=_((Wve,Np)=>{"use strict";var qde="4.26.2",jde=Ab(),A$=require("node:http"),Cc,{kAvvioBoot:Ac,kChildren:k$,kServerBindings:iF,kBodyLimit:Dde,kRoutePrefix:oF,kLogLevel:Lde,kLogSerializers:xde,kHooks:q$,kSchemaController:Si,kRequestAcceptVersion:Mde,kReplySerializerDefault:aF,kContentTypeParser:Fde,kReply:Vde,kRequest:zde,kFourOhFour:Hde,kState:Ct,kOptions:j$,kPluginNameChain:kc,kSchemaErrorFormatter:D$,kErrorHandler:Pp,kKeepAliveConnections:L$,kChildLoggerFactory:x$,kGenReqId:M$}=Mt(),{createServer:Ude,compileValidateHTTPVersion:Kde}=tw(),qc=Ud(),Tp=oh(),Bde=ah(),{supportedMethods:Gde}=ov(),Ja=fv(),So=Ev(),uF=JS(),{Hooks:Jde,hookRunnerApplication:lF,supportedHooks:F$}=xs(),{createLogger:Wde,createChildLogger:cF,defaultChildLoggerFactory:Yde}=lu(),fF=e$(),{getGenReqId:dF,reqIdGenFactory:hF}=op(),{buildRouting:Xde,validateBodyLimitOption:Qde}=SM(),Zde=OM(),_F=CM(),ehe=FM(),{FSTDEP009:the}=ls(),rhe=zM(),{appendStackTrace:nhe,AVVIO_ERRORS_MAP:pF,...$o}=rr(),{defaultInitOptions:jr}=_F,{FST_ERR_ASYNC_CONSTRAINT:she,FST_ERR_BAD_URL:ihe,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:ohe,FST_ERR_OPTIONS_NOT_OBJ:ahe,FST_ERR_QSP_NOT_FN:uhe,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:lhe,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:che,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:fhe,FST_ERR_VERSION_CONSTRAINT_NOT_STR:dhe,FST_ERR_INSTANCE_ALREADY_LISTENING:hhe,FST_ERR_REOPENED_CLOSE_SERVER:phe,FST_ERR_ROUTE_REWRITE_NOT_STR:mhe,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:mF,FST_ERR_ERROR_HANDLER_NOT_FN:yhe}=$o,{buildErrorHandler:yF}=yl();function ghe(t){let e={};return["errorHandler","logLevel","logSerializers"].concat(F$).forEach(n=>{e[n]=t.store[n]}),Object.assign({},e)}function Op(t){if(t=t||{},typeof t!="object")throw new ahe;if(t.querystringParser&&typeof t.querystringParser!="function")throw new uhe(typeof t.querystringParser);if(t.schemaController&&t.schemaController.bucket&&typeof t.schemaController.bucket!="function")throw new lhe(typeof t.schemaController.bucket);Qde(t.bodyLimit);let e=t.requestIdHeader===!1?!1:(t.requestIdHeader||jr.requestIdHeader).toLowerCase(),r=hF(e,t.genReqId),n=t.requestIdLogLabel||"reqId",s=t.bodyLimit||jr.bodyLimit,i=t.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},t.ajv),a=t.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new che(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new fhe(typeof o.plugins);let{logger:u,hasLogger:c}=Wde(t);t.connectionTimeout=t.connectionTimeout||jr.connectionTimeout,t.keepAliveTimeout=t.keepAliveTimeout||jr.keepAliveTimeout,t.maxRequestsPerSocket=t.maxRequestsPerSocket||jr.maxRequestsPerSocket,t.requestTimeout=t.requestTimeout||jr.requestTimeout,t.logger=u,t.requestIdHeader=e,t.requestIdLogLabel=n,t.disableRequestLogging=i,t.ajv=o,t.clientErrorHandler=t.clientErrorHandler||G;let l=_F(t);t.exposeHeadRoutes=l.exposeHeadRoutes;let f=t.constraints;t.versioning&&(the(),f={...f,version:{name:"version",mustMatchWhenDerived:!0,storage:t.versioning.storage,deriveConstraint:t.versioning.deriveVersion,validate(I){if(typeof I!="string")throw new dhe}}});let h=Xde({config:{defaultRoute:Je,onBadUrl:H,constraints:f,ignoreTrailingSlash:t.ignoreTrailingSlash||jr.ignoreTrailingSlash,ignoreDuplicateSlashes:t.ignoreDuplicateSlashes||jr.ignoreDuplicateSlashes,maxParamLength:t.maxParamLength||jr.maxParamLength,caseSensitive:t.caseSensitive,allowUnsafeRegex:t.allowUnsafeRegex||jr.allowUnsafeRegex,buildPrettyMeta:ghe,querystringParser:t.querystringParser,useSemicolonDelimiter:t.useSemicolonDelimiter??jr.useSemicolonDelimiter}}),d=Zde(t),p=Ke(h,t);t.http2SessionTimeout=l.http2SessionTimeout;let{server:m,listen:g}=Ude(t,p),E=typeof m.closeAllConnections=="function",$=typeof m.closeIdleConnections=="function",v=t.forceCloseConnections;if(v==="idle"&&!$)throw new ohe;typeof v!="boolean"&&(v=$?"idle":!1);let y=!E&&v===!0?new Set:rhe(),S=qc.setupResponseListeners,N=uF.buildSchemaController(null,t.schemaController),w={[Ct]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,readyPromise:null},[L$]:y,[j$]:t,[k$]:[],[iF]:[],[Dde]:s,[oF]:"",[Lde]:"",[xde]:null,[q$]:new Jde,[Si]:N,[D$]:null,[Pp]:yF(),[x$]:Yde,[aF]:null,[Fde]:new So(s,t.onProtoPoisoning||jr.onProtoPoisoning,t.onConstructorPoisoning||jr.onConstructorPoisoning),[Vde]:qc.buildReply(qc),[zde]:Tp.buildRequest(Tp,t.trustProxy),[Hde]:d,[fF.kRegisteredPlugins]:[],[kc]:["fastify"],[Ac]:null,[M$]:r,routing:p,getDefaultRoute:h.getDefaultRoute.bind(h),setDefaultRoute:h.setDefaultRoute.bind(h),delete:function(x,F,Q){return h.prepareRoute.call(this,{method:"DELETE",url:x,options:F,handler:Q})},get:function(x,F,Q){return h.prepareRoute.call(this,{method:"GET",url:x,options:F,handler:Q})},head:function(x,F,Q){return h.prepareRoute.call(this,{method:"HEAD",url:x,options:F,handler:Q})},patch:function(x,F,Q){return h.prepareRoute.call(this,{method:"PATCH",url:x,options:F,handler:Q})},post:function(x,F,Q){return h.prepareRoute.call(this,{method:"POST",url:x,options:F,handler:Q})},put:function(x,F,Q){return h.prepareRoute.call(this,{method:"PUT",url:x,options:F,handler:Q})},options:function(x,F,Q){return h.prepareRoute.call(this,{method:"OPTIONS",url:x,options:F,handler:Q})},all:function(x,F,Q){return h.prepareRoute.call(this,{method:Gde,url:x,options:F,handler:Q})},route:function(x){return h.route.call(this,{options:x})},hasRoute:function(x){return h.hasRoute.call(this,{options:x})},findRoute:function(x){return h.findRoute(x)},log:u,withTypeProvider:ee,addHook:ve,addSchema:z,getSchema:N.getSchema.bind(N),getSchemas:N.getSchemas.bind(N),setValidatorCompiler:Ue,setSerializerCompiler:Lt,setSchemaController:we,setReplySerializer:At,setSchemaErrorFormatter:ns,setGenReqId:Re,addContentTypeParser:So.helpers.addContentTypeParser,hasContentTypeParser:So.helpers.hasContentTypeParser,getDefaultJsonParser:So.defaultParsers.getDefaultJsonParser,defaultTextParser:So.defaultParsers.defaultTextParser,removeContentTypeParser:So.helpers.removeContentTypeParser,removeAllContentTypeParsers:So.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(I){return this[fF.kRegisteredPlugins].includes(I)||this[kc].includes(I)},listen:g,server:m,addresses:function(){let I=this[iF].map(x=>x.address());return I.push(this.server.address()),I.filter(x=>x)},decorate:Ja.add,hasDecorator:Ja.exist,decorateReply:Ja.decorateReply,decorateRequest:Ja.decorateRequest,hasRequestDecorator:Ja.existRequest,hasReplyDecorator:Ja.existReply,inject:q,printRoutes:Dr,setNotFoundHandler:Hr,setErrorHandler:ie,setChildLoggerFactory:He,initialConfig:l,addConstraintStrategy:h.addConstraintStrategy.bind(h),hasConstraintStrategy:h.hasConstraintStrategy.bind(h)};Object.defineProperties(w,{listeningOrigin:{get(){let I=this.addresses().slice(-1).pop();if(typeof I=="string")return I;let x=I.family==="IPv6"?`[${I.address}]`:I.address;return`${this[j$].https?"https":"http"}://${x}:${I.port}`}},pluginName:{configurable:!0,get(){return this[kc].length>1?this[kc].join(" -> "):this[kc][0]}},prefix:{configurable:!0,get(){return this[oF]}},validatorCompiler:{configurable:!0,get(){return this[Si].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[Si].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[x$]}},version:{configurable:!0,get(){return qde}},errorHandler:{configurable:!0,get(){return this[Pp].func}},genReqId:{configurable:!0,get(){return this[M$]}}}),t.schemaErrorFormatter&&(gF(t.schemaErrorFormatter),w[D$]=t.schemaErrorFormatter.bind(w));let T=Number(t.pluginTimeout),A=jde(w,{autostart:!1,timeout:isNaN(T)===!1?T:jr.pluginTimeout,expose:{use:"register"}});A.override=ehe,A.on("start",()=>w[Ct].started=!0),w[Ac]=w.ready,w.ready=D,w.printPlugins=A.prettyPrint.bind(A),A.once("preReady",()=>{w.onClose((I,x)=>{w[Ct].closing=!0,h.closeRoutes(),lF("preClose",w[Ac],w,function(){if(w[Ct].listening){if(v==="idle")I.server.closeIdleConnections();else if(E&&v)I.server.closeAllConnections();else if(v===!0)for(let F of w[L$])F.destroy(),w[L$].delete(F)}!t.serverFactory||w[Ct].listening?I.server.close(function(F){F&&F.code!=="ERR_SERVER_NOT_RUNNING"?x(null):x()}):process.nextTick(x,null)})})});let R=new Bde({server:w,config:{}});w.setNotFoundHandler(),d.arrange404(w),h.setup(t,{avvio:A,fourOhFour:d,logger:u,hasLogger:c,setupResponseListeners:S,throwIfAlreadyStarted:j,validateHTTPVersion:Kde(t),keepAliveConnections:y}),m.on("clientError",t.clientErrorHandler.bind(w));try{let x=require("node:diagnostics_channel").channel("fastify.initialization");x.hasSubscribers&&x.publish({fastify:w})}catch{}return"asyncDispose"in Symbol&&(w[Symbol.asyncDispose]=function(){return w.close()}),w;function j(I){if(w[Ct].started)throw new hhe(I)}function q(I,x){if(Cc===void 0&&(Cc=sF()),w[Ct].started){if(w[Ct].closing){let F=new phe;if(x){x(F);return}else return Promise.reject(F)}return Cc(p,I,x)}if(x)this.ready(F=>{F?x(F,null):Cc(p,I,x)});else return Cc((F,Q)=>{this.ready(function(Ee){if(Ee){Q.emit("error",Ee);return}p(F,Q)})},I)}function D(I){if(this[Ct].readyPromise!==null){if(I!=null){this[Ct].readyPromise.then(()=>I(null,w),I);return}return this[Ct].readyPromise}let x,F;if(process.nextTick(Q),this[Ct].readyPromise=new Promise(function(Z,We){x=Z,F=We}),I)this[Ct].readyPromise.then(()=>I(null,w),I);else return this[Ct].readyPromise;function Q(){w[Ac]((Z,We)=>{Z||w[Ct].started||w[Ct].ready||w[Ct].booting?Ee(Z):(w[Ct].booting=!0,lF("onReady",w[Ac],w,Ee)),We()})}function Ee(Z){if(Z=Z!=null&&pF[Z.code]!=null?nhe(Z,new pF[Z.code](Z.message)):Z,Z)return F(Z);x(w),w[Ct].booting=!1,w[Ct].ready=!0,w[Ct].promise=null}}function ee(){return this}function ve(I,x){if(j('Cannot call "addHook"!'),x==null)throw new $o.FST_ERR_HOOK_INVALID_HANDLER(I,x);if(I==="onSend"||I==="preSerialization"||I==="onError"||I==="preParsing"){if(x.constructor.name==="AsyncFunction"&&x.length===4)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onReady"||I==="onListen"){if(x.constructor.name==="AsyncFunction"&&x.length!==0)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onRequestAbort"){if(x.constructor.name==="AsyncFunction"&&x.length!==1)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x.constructor.name==="AsyncFunction"&&x.length===3)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return I==="onClose"?this.onClose(x):I==="onReady"||I==="onListen"||I==="onRoute"?this[q$].add(I,x):this.after((Q,Ee)=>{F.call(this,I,x),Ee(Q)}),this;function F(Q,Ee){this[q$].add(Q,Ee),this[k$].forEach(Z=>F.call(Z,Q,Ee))}}function z(I){return j('Cannot call "addSchema"!'),this[Si].add(I),this[k$].forEach(x=>x.addSchema(I)),this}function G(I,x){if(I.code==="ECONNRESET"||x.destroyed)return;let F,Q,Ee,Z;I.code==="ERR_HTTP_REQUEST_TIMEOUT"?(Q="408",Ee=A$.STATUS_CODES[Q],F=`{"error":"${Ee}","message":"Client Timeout","statusCode":408}`,Z="timeout"):I.code==="HPE_HEADER_OVERFLOW"?(Q="431",Ee=A$.STATUS_CODES[Q],F=`{"error":"${Ee}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,Z="header_overflow"):(Q="400",Ee=A$.STATUS_CODES[Q],F=`{"error":"${Ee}","message":"Client Error","statusCode":400}`,Z="error"),this.log.trace({err:I},`client ${Z}`),x.writable&&x.write(`HTTP/1.1 ${Q} ${Ee}\r
Content-Length: ${F.length}\r
Content-Type: application/json\r
\r
${F}`),x.destroy(I)}function Je(I,x){I.headers["accept-version"]!==void 0&&(I.headers[Mde]=I.headers["accept-version"],I.headers["accept-version"]=void 0),d.router.lookup(I,x)}function H(I,x,F){if(a){let Ee=dF(R.server,x),Z=cF(R,u,x,Ee),We=new Tp(Ee,null,x,null,Z,R),hn=new qc(F,We,Z);return i===!1&&Z.info({req:We},"incoming request"),a(new ihe(I),We,hn)}let Q=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${I}' is not a valid url component","statusCode":400}`;F.writeHead(400,{"Content-Type":"application/json","Content-Length":Q.length}),F.end(Q)}function ht(I,x,F){if(I!==!1)return function(Ee){if(Ee){if(a){let We=dF(R.server,x),hn=cF(R,u,x,We),Ye=new Tp(We,null,x,null,hn,R),bt=new qc(F,Ye,hn);return i===!1&&hn.info({req:Ye},"incoming request"),a(new she,Ye,bt)}let Z='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';F.writeHead(500,{"Content-Type":"application/json","Content-Length":Z.length}),F.end(Z)}}}function Hr(I,x){return j('Cannot call "setNotFoundHandler"!'),d.setNotFoundHandler.call(this,I,x,A,h.routeHandler),this}function Ue(I){return j('Cannot call "setValidatorCompiler"!'),this[Si].setValidatorCompiler(I),this}function ns(I){return j('Cannot call "setSchemaErrorFormatter"!'),gF(I),this[D$]=I.bind(this),this}function Lt(I){return j('Cannot call "setSerializerCompiler"!'),this[Si].setSerializerCompiler(I),this}function we(I){j('Cannot call "setSchemaController"!');let x=this[Si],F=uF.buildSchemaController(x,Object.assign({},x.opts,I));return this[Si]=F,this.getSchema=F.getSchema.bind(F),this.getSchemas=F.getSchemas.bind(F),this}function At(I){return j('Cannot call "setReplySerializer"!'),this[aF]=I,this}function ie(I){if(j('Cannot call "setErrorHandler"!'),typeof I!="function")throw new yhe;return this[Pp]=yF(this[Pp],I.bind(this)),this}function He(I){return j('Cannot call "setChildLoggerFactory"!'),this[x$]=I,this}function Dr(I={}){return I.includeMeta=I.includeHooks?I.includeMeta?F$.concat(I.includeMeta):F$:I.includeMeta,h.printRoutes(I)}function Ke(I,{rewriteUrl:x,logger:F}){let Q;return function(Z,We){if(Q===void 0&&(Q=I.isAsyncConstraint()),x){Z.originalUrl=Z.url;let hn=x.call(w,Z);if(typeof hn=="string")Z.url=hn;else{let Ye=new mhe(Z.url,typeof hn);Z.destroy(Ye)}}I.routing(Z,We,ht(Q,Z,We))}}function Re(I){return j('Cannot call "setGenReqId"!'),this[M$]=hF(this[j$].requestIdHeader,I),this}}Op.errorCodes=$o;function gF(t){if(typeof t!="function")throw new mF(typeof t);if(t.constructor.name==="AsyncFunction")throw new mF("AsyncFunction")}Np.exports=Op;Np.exports.fastify=Op;Np.exports.default=Op});var Ehe={};LF(Ehe,{start:()=>_he,stop:()=>vhe});module.exports=MF(Ehe);var EF=xF(vF(),1);var rs="/spider";async function V$(t){t.register(async e=>{e.get("/check",async function(r,n){n.send({run:!e.stop})}),e.get("/config",async function(r,n){n.send({video:{sites:[{key:"node_site1",name:"Site1",type:3,api:rs+"/site01"},{key:"node_site2",name:"Site2",type:3,api:rs+"/site02"},{key:"node_site3",name:"Site3",type:3,api:rs+"/site03"}]},read:{sites:[{key:"node_site1",name:"Site1",type:3,api:rs+"/site01"},{key:"node_site2",name:"Site2",type:3,api:rs+"/site02"},{key:"node_site3",name:"Site3",type:3,api:rs+"/site03"}]},comic:{sites:[{key:"node_site1",name:"Site1",type:3,api:rs+"/site01"},{key:"node_site2",name:"Site2",type:3,api:rs+"/site02"},{key:"node_site3",name:"Site3",type:3,api:rs+"/site03"}]},pan:{sites:[{key:"node_alist",name:"Alist",type:40,api:rs+"/alist",ext:[]}]}})})})}var dn=null;async function _he(t){dn=(0,EF.default)({serverFactory:catServerFactory,forceCloseConnections:!0,logger:process.env.NODE_ENV!=="development",maxParamLength:10240}),dn.messageToDart=async(e,r)=>null,dn.address=function(){let e=this.server.address();return e.url=`http://${e.address}:${e.port}`,e.dynamic="js2p://_WEB_",e},dn.addHook("onError",async(e,r,n)=>(console.error(n),n.statusCode||(n.statusCode=500),n)),dn.stop=!1,dn.config=t,dn.register(V$),dn.listen({port:process.env.DEV_HTTP_PORT||0,host:"127.0.0.1"})}async function vhe(){dn&&(dn.close(),dn.stop=!0),dn=null}0&&(module.exports={start,stop});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2024 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.7.0
   *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
